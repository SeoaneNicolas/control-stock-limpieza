/*! For license information please see main.f65a8c8a.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var x=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case C:return"Suspense";case S:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case _:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var M=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},F=[],B=-1;function j(e){return{current:e}}function U(e){0>B||(e.current=F[B],F[B]=null,B--)}function V(e,t){B++,F[B]=e.current,e.current=t}var z=j(null),H=j(null),W=j(null),G=j(null);function q(e,t){switch(V(W,t),V(H,e),V(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ih(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sh(t=ih(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(z),V(z,e)}function Y(){U(z),U(H),U(W)}function X(e){null!==e.memoizedState&&V(G,e);var t=z.current,n=sh(t,e.type);t!==n&&(V(H,e),V(z,n))}function K(e){H.current===e&&(U(z),U(H)),G.current===e&&(U(G),Xh._currentValue=L)}var Q=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,$=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ve(r):0!==(o&=a)?i=ve(o):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=r&~s)?i=ve(a):0!==o?i=ve(o):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ee(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function Ce(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ae(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function xe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ke(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Re=Math.random().toString(36).slice(2),De="__reactFiber$"+Re,Me="__reactProps$"+Re,Oe="__reactContainer$"+Re,Pe="__reactEvents$"+Re,Le="__reactListeners$"+Re,Fe="__reactHandles$"+Re,Be="__reactResources$"+Re,je="__reactMarker$"+Re;function Ue(e){delete e[De],delete e[Me],delete e[Pe],delete e[Le],delete e[Fe]}function Ve(e){var t=e[De];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[De]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wh(e);null!==e;){if(n=e[De])return n;e=wh(e)}return t}n=(e=n).parentNode}return null}function ze(e){if(e=e[De]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function We(e){var t=e[Be];return t||(t=e[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[je]=!0}var qe=new Set,Ye={};function Xe(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Ye[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Qe,Ze,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},et={};function tt(e,t,n){if(i=t,Q.call(et,i)||!Q.call($e,i)&&(Je.test(i)?et[i]=!0:($e[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Ze=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+Ze}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=n?vt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(M(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&St(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&St(e,s,t[s])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return xt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var kt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Mt=null;function Ot(e){var t=ze(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Me]||null;if(!i)throw Error(o(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Pt=!1;function Lt(e,t,n){if(Pt)return e(t,n);Pt=!0;try{return e(t)}finally{if(Pt=!1,(null!==Dt||null!==Mt)&&(Vc(),Dt&&(t=Dt,e=Mt,Mt=Dt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Me]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Bt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Bt)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Md){jt=!1}var Vt=null,zt=null,Ht=null;function Wt(){if(Ht)return Ht;var e,t,n=zt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Ht=i.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Yt(){return!1}function Xt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?qt:Yt,this.isPropagationStopped=Yt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Kt,Qt,Zt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Xt(Jt),en=d({},Jt,{view:0,detail:0}),tn=Xt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Kt=e.screenX-Zt.screenX,Qt=e.screenY-Zt.screenY):Qt=Kt=0,Zt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),rn=Xt(nn),sn=Xt(d({},nn,{dataTransfer:0})),on=Xt(d({},en,{relatedTarget:0})),an=Xt(d({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Xt(d({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Xt(d({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return fn}var gn=Xt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Xt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Xt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Xt(d({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Xt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Xt(d({},Jt,{newState:0,oldState:0})),_n=[9,13,27,32],En=Bt&&"CompositionEvent"in window,Cn=null;Bt&&"documentMode"in document&&(Cn=document.documentMode);var Sn=Bt&&"TextEvent"in window&&!Cn,An=Bt&&(!En||Cn&&8<Cn&&11>=Cn),In=String.fromCharCode(32),Tn=!1;function xn(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var kn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Mn(e,t,n,r){Dt?Mt?Mt.push(r):Mt=[r]:Dt=r,0<(t=Wu(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Pn=null;function Ln(e){Lu(e,0)}function Fn(e){if(dt(He(e)))return e}function Bn(e,t){if("change"===e)return t}var jn=!1;if(Bt){var Un;if(Bt){var Vn="oninput"in document;if(!Vn){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),Vn="function"===typeof zn.oninput}Un=Vn}else Un=!1;jn=Un&&(!document.documentMode||9<document.documentMode)}function Hn(){On&&(On.detachEvent("onpropertychange",Wn),Pn=On=null)}function Wn(e){if("value"===e.propertyName&&Fn(Pn)){var t=[];Mn(t,Pn,e,Rt(e)),Lt(Ln,t)}}function Gn(e,t,n){"focusin"===e?(Hn(),Pn=n,(On=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Hn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Pn)}function Yn(e,t){if("click"===e)return Fn(t)}function Xn(e,t){if("input"===e||"change"===e)return Fn(t)}var Kn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Kn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Q.call(t,i)||!Kn(e[i],t[i]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Bt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Qn(sr,r)||(sr=r,0<(r=Wu(ir,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},hr={};function dr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return ur[e]=n[t];return e}Bt&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),gr=dr("animationstart"),mr=dr("transitionrun"),yr=dr("transitionstart"),vr=dr("transitioncancel"),wr=dr("transitionend"),br=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){br.set(e,t),Xe(t,[e])}_r.push("scrollEnd");var Cr=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=Cr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Cr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ar=[],Ir=0,Tr=0;function xr(){for(var e=Ir,t=Tr=Ir=0;t<e;){var n=Ar[t];Ar[t++]=null;var r=Ar[t];Ar[t++]=null;var i=Ar[t];Ar[t++]=null;var s=Ar[t];if(Ar[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Dr(n,i,s)}}function Nr(e,t,n,r){Ar[Ir++]=e,Ar[Ir++]=t,Ar[Ir++]=n,Ar[Ir++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function kr(e,t,n,r){return Nr(e,t,n,r),Mr(e)}function Rr(e,t){return Nr(e,null,null,t),Mr(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Mr(e){if(50<Dc)throw Dc=0,Mc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Pr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,n,r){return new Pr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function jr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Fr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Lr(31,n,t,i)).elementType=T,e.lanes=s,e;case m:return Vr(n.children,i,s,t);case y:a=8,i|=24;break;case v:return(e=Lr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case C:return(e=Lr(13,n,t,i)).elementType=C,e.lanes=s,e;case S:return(e=Lr(19,n,t,i)).elementType=S,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:case _:a=10;break e;case b:a=9;break e;case E:a=11;break e;case A:a=14;break e;case I:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vr(e,t,n,r){return(e=Lr(7,e,r,t)).lanes=n,e}function zr(e,t,n){return(e=Lr(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],Gr=0,qr=null,Yr=0,Xr=[],Kr=0,Qr=null,Zr=1,Jr="";function $r(e,t){Wr[Gr++]=Yr,Wr[Gr++]=qr,qr=e,Yr=t}function ei(e,t,n){Xr[Kr++]=Zr,Xr[Kr++]=Jr,Xr[Kr++]=Qr,Qr=e;var r=Zr;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zr=1<<32-fe(t)+i|n<<i|r,Jr=s+e}else Zr=1<<s|n<<i|r,Jr=e}function ti(e){null!==e.return&&($r(e,1),ei(e,1,0))}function ni(e){for(;e===qr;)qr=Wr[--Gr],Wr[Gr]=null,Yr=Wr[--Gr],Wr[Gr]=null;for(;e===Qr;)Qr=Xr[--Kr],Xr[Kr]=null,Jr=Xr[--Kr],Xr[Kr]=null,Zr=Xr[--Kr],Xr[Kr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ci(e){throw gi(Sr(Error(o(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[De]=e,t[Me]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Ou.length;n++)Fu(Ou[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),_t(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||ci(e)}function hi(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function di(e){if(e!==ri)return!1;if(!si)return hi(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||oh(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fh(e.type)?(e=vh,vh=null,ii=e):ii=n):ii=ri?yh(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),oi=null),e}function gi(e){null===oi?oi=[e]:oi.push(e)}var mi=j(null),yi=null,vi=null;function wi(e,t,n){V(mi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=mi.current,U(mi)}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),_i(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),_i(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ci(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Kn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Xh):e=[Xh])}i=i.return}null!==e&&Ei(t,e,n,r),t.flags|=262144}function Si(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ai(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ii(e){return xi(yi,e)}function Ti(e,t){return null===yi&&Ai(e),xi(e,t)}function xi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(o(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Ni="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ki=r.unstable_scheduleCallback,Ri=r.unstable_NormalPriority,Di={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mi(){return{controller:new Ni,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&ki(Ri,function(){e.controller.abort()})}var Pi=null,Li=0,Fi=0,Bi=null;function ji(){if(0===--Li&&null!==Pi){null!==Bi&&(Bi.status="fulfilled");var e=Pi;Pi=null,Fi=0,Bi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ui=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Pi){var n=Pi=[];Li=0,Fi=Nu(),Bi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Li++,t.then(ji,ji)}(0,t),null!==Ui&&Ui(e,t)};var Vi=j(null);function zi(){var e=Vi.current;return null!==e?e:rc.pooledCache}function Hi(e,t){V(Vi,null===t?Vi.current:t.pool)}function Wi(){var e=zi();return null===e?null:{parent:Di._currentValue,pool:e}}var Gi=Error(o(460)),qi=Error(o(474)),Yi=Error(o(542)),Xi={then:function(){}};function Ki(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qi(){}function Zi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qi,Qi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qi,Qi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Ji=t,Gi}}var Ji=null;function $i(){if(null===Ji)throw Error(o(459));var e=Ji;return Ji=null,e}function es(e){if(e===Gi||e===Yi)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Mr(e),Dr(e,null,n),t}return Nr(e,r,t,n),Mr(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Bi)throw Bi}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(sc&f)===f:(r&f)===f){0!==f&&f===Fi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){h=g.call(y,h,f);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(y,h,f):g)||void 0===f)break e;h=d({},h,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=o,e.lanes=o,e.memoizedState=h}}function hs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function ds(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var fs=j(null),ps=j(0);function gs(e,t){V(ps,e=hc),V(fs,t),hc=e|t.baseLanes}function ms(){V(ps,hc),V(fs,fs.current)}function ys(){hc=ps.current,U(fs),U(ps)}var vs=0,ws=null,bs=null,_s=null,Es=!1,Cs=!1,Ss=!1,As=0,Is=0,Ts=null,xs=0;function Ns(){throw Error(o(321))}function ks(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function Rs(e,t,n,r,i,s){return vs=s,ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?qo:Yo,Ss=!1,s=n(r,i),Ss=!1,Cs&&(s=Ms(t,n,r,i)),Ds(e),s}function Ds(e){O.H=Go;var t=null!==bs&&null!==bs.next;if(vs=0,_s=bs=ws=null,Es=!1,Is=0,Ts=null,t)throw Error(o(300));null===e||Ta||null!==(e=e.dependencies)&&Si(e)&&(Ta=!0)}function Ms(e,t,n,r){ws=e;var i=0;do{if(Cs&&(Ts=null),Is=0,Cs=!1,25<=i)throw Error(o(301));if(i+=1,_s=bs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=Xo,s=t(n,r)}while(Cs);return s}function Os(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Us(t):t,e=e.useState()[0],(null!==bs?bs.memoizedState:null)!==e&&(ws.flags|=1024),t}function Ps(){var e=0!==As;return As=0,e}function Ls(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fs(e){if(Es){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Es=!1}vs=0,_s=bs=ws=null,Cs=!1,Is=As=0,Ts=null}function Bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_s?ws.memoizedState=_s=e:_s=_s.next=e,_s}function js(){if(null===bs){var e=ws.alternate;e=null!==e?e.memoizedState:null}else e=bs.next;var t=null===_s?ws.memoizedState:_s.next;if(null!==t)_s=t,bs=e;else{if(null===e){if(null===ws.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(bs=e).memoizedState,baseState:bs.baseState,baseQueue:bs.baseQueue,queue:bs.queue,next:null},null===_s?ws.memoizedState=_s=e:_s=_s.next=e}return _s}function Us(e){var t=Is;return Is+=1,null===Ts&&(Ts=[]),e=Zi(Ts,e,t),t=ws,null===(null===_s?t.memoizedState:_s.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?qo:Yo),e}function Vs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Us(e);if(e.$$typeof===_)return Ii(e)}throw Error(o(438,String(e)))}function zs(e){var t=null,n=ws.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ws.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=x;return t.index++,n}function Hs(e,t){return"function"===typeof t?t(e):t}function Ws(e){return Gs(js(),bs,e)}function Gs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(sc&d)===d:(vs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Fi&&(h=!0);else{if((vs&f)===f){u=u.next,f===Fi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,ws.lanes|=f,fc|=f}d=u.action,Ss&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,ws.lanes|=d,fc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Kn(s,e.memoizedState)&&(Ta=!0,h&&null!==(n=Bi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function qs(e){var t=js(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Kn(s,t.memoizedState)||(Ta=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ys(e,t,n){var r=ws,i=js(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Kn((bs||i).memoizedState,n);if(a&&(i.memoizedState=n,Ta=!0),i=i.queue,yo(2048,8,Qs.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==_s&&1&_s.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ks.bind(null,r,i,n,t),null),null===rc)throw Error(o(349));s||0!==(124&vs)||Xs(r,t,n)}return n}function Xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ks(e,t,n,r){t.value=n,t.getSnapshot=r,Zs(t)&&Js(e)}function Qs(e,t,n){return n(function(){Zs(t)&&Js(e)})}function Zs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(r){return!0}}function Js(e){var t=Rr(e,2);null!==t&&Lc(t,e,2)}function $s(e){var t=Bs();if("function"===typeof e){var n=e;if(e=n(),Ss){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,Gs(e,bs,"function"===typeof r?r:Hs)}function to(e,t,n,r,i){if(zo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,no(t,s)):(s.next=n.next,t.pending=n.next=s)}}function no(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),ro(e,t,a)}catch(c){so(e,t,c)}finally{O.T=s}}else try{ro(e,t,s=n(i,r))}catch(u){so(e,t,u)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){io(e,t,n)},function(n){return so(e,t,n)}):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function so(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=ws;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=yh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=yh(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Bs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=jo.bind(null,ws,r),r.dispatch=n,r=$s(!1),s=Vo.bind(null,ws,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Bs()).queue=i,n=to.bind(null,ws,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return uo(js(),bs,e)}function uo(e,t,n){if(t=Gs(e,t,ao)[0],e=Ws(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Us(t)}catch(o){if(o===Gi)throw Yi;throw o}else r=t;var i=(t=js()).queue,s=i.dispatch;return n!==t.memoizedState&&(ws.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[r,s,e]}function ho(e,t){e.action=t}function fo(e){var t=js(),n=bs;if(null!==n)return uo(t,n,e);js(),t=t.memoizedState;var r=(n=js()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return js().memoizedState}function mo(e,t,n,r){var i=Bs();r=void 0===r?null:r,ws.flags|=e,i.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function yo(e,t,n,r){var i=js();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==bs&&null!==r&&ks(r,bs.memoizedState.deps)?i.memoizedState=po(t,s,n,r):(ws.flags|=e,i.memoizedState=po(1|t,s,n,r))}function vo(e,t){mo(8390656,8,e,t)}function wo(e,t){yo(2048,8,e,t)}function bo(e,t){return yo(4,2,e,t)}function _o(e,t){return yo(4,4,e,t)}function Eo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Co(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,Eo.bind(null,t,e),n)}function So(){}function Ao(e,t){var n=js();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ks(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Io(e,t){var n=js();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ks(t,r[1]))return r[0];if(r=e(),Ss){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function To(e,t,n){return void 0===n||0!==(1073741824&vs)?e.memoizedState=t:(e.memoizedState=n,e=Pc(),ws.lanes|=e,fc|=e,n)}function xo(e,t,n,r){return Kn(n,t)?n:null!==fs.current?(e=To(e,n,r),Kn(e,t)||(Ta=!0),e):0===(42&vs)?(Ta=!0,e.memoizedState=n):(e=Pc(),ws.lanes|=e,fc|=e,t)}function No(e,t,n,r,i){var s=P.p;P.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,Vo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Oc());else Uo(e,t,r,Oc())}catch(u){Uo(e,t,{then:function(){},status:"rejected",reason:u},Oc())}finally{P.p=s,O.T=o}}function ko(){}function Ro(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Do(e).queue;No(e,i,t,L,null===n?ko:function(){return Mo(e),n(r)})}function Do(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Mo(e){Uo(e,Do(e).next.queue,{},Oc())}function Oo(){return Ii(Xh)}function Po(){return js().memoizedState}function Lo(){return js().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),r=ss(t,e=is(n),n);return null!==r&&(Lc(r,t,n),os(r,t,n)),t={cache:Mi()},void(e.payload=t)}t=t.return}}function Bo(e,t,n){var r=Oc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},zo(e)?Ho(t,n):null!==(n=kr(e,t,n,r))&&(Lc(n,e,r),Wo(n,t,r))}function jo(e,t,n){Uo(e,t,n,Oc())}function Uo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(zo(e))Ho(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Kn(a,o))return Nr(e,t,i,0),null===rc&&xr(),!1}catch(l){}if(null!==(n=kr(e,t,i,r)))return Lc(n,e,r),Wo(n,t,r),!0}return!1}function Vo(e,t,n,r){if(r={lane:2,revertLane:Nu(),action:r,hasEagerState:!1,eagerState:null,next:null},zo(e)){if(t)throw Error(o(479))}else null!==(t=kr(e,n,r,2))&&Lc(t,e,2)}function zo(e){var t=e.alternate;return e===ws||null!==t&&t===ws}function Ho(e,t){Cs=Es=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Go={readContext:Ii,use:Vs,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useLayoutEffect:Ns,useInsertionEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useSyncExternalStore:Ns,useId:Ns,useHostTransitionStatus:Ns,useFormState:Ns,useActionState:Ns,useOptimistic:Ns,useMemoCache:Ns,useCacheRefresh:Ns},qo={readContext:Ii,use:Vs,useCallback:function(e,t){return Bs().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:vo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,mo(4194308,4,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mo(4194308,4,e,t)},useInsertionEffect:function(e,t){mo(4,2,e,t)},useMemo:function(e,t){var n=Bs();t=void 0===t?null:t;var r=e();if(Ss){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bs();if(void 0!==n){var i=n(t);if(Ss){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Bo.bind(null,ws,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Bs().memoizedState=e},useState:function(e){var t=(e=$s(e)).queue,n=jo.bind(null,ws,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:So,useDeferredValue:function(e,t){return To(Bs(),e,t)},useTransition:function(){var e=$s(!1);return e=No.bind(null,ws,e.queue,!0,!1),Bs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ws,i=Bs();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===rc)throw Error(o(349));0!==(124&sc)||Xs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,vo(Qs.bind(null,r,s,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ks.bind(null,r,s,n,t),null),n},useId:function(){var e=Bs(),t=rc.identifierPrefix;if(si){var n=Jr;t="\xab"+t+"R"+(n=(Zr&~(1<<32-fe(Zr)-1)).toString(32)+n),0<(n=As++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=xs++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Bs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vo.bind(null,ws,!0,n),n.dispatch=t,[e,t]},useMemoCache:zs,useCacheRefresh:function(){return Bs().memoizedState=Fo.bind(null,ws)}},Yo={readContext:Ii,use:Vs,useCallback:Ao,useContext:Ii,useEffect:wo,useImperativeHandle:Co,useInsertionEffect:bo,useLayoutEffect:_o,useMemo:Io,useReducer:Ws,useRef:go,useState:function(){return Ws(Hs)},useDebugValue:So,useDeferredValue:function(e,t){return xo(js(),bs.memoizedState,e,t)},useTransition:function(){var e=Ws(Hs)[0],t=js().memoizedState;return["boolean"===typeof e?e:Us(e),t]},useSyncExternalStore:Ys,useId:Po,useHostTransitionStatus:Oo,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(js(),0,e,t)},useMemoCache:zs,useCacheRefresh:Lo},Xo={readContext:Ii,use:Vs,useCallback:Ao,useContext:Ii,useEffect:wo,useImperativeHandle:Co,useInsertionEffect:bo,useLayoutEffect:_o,useMemo:Io,useReducer:qs,useRef:go,useState:function(){return qs(Hs)},useDebugValue:So,useDeferredValue:function(e,t){var n=js();return null===bs?To(n,e,t):xo(n,bs.memoizedState,e,t)},useTransition:function(){var e=qs(Hs)[0],t=js().memoizedState;return["boolean"===typeof e?e:Us(e),t]},useSyncExternalStore:Ys,useId:Po,useHostTransitionStatus:Oo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=js();return null!==bs?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:zs,useCacheRefresh:Lo},Ko=null,Qo=0;function Zo(e){var t=Qo;return Qo+=1,null===Ko&&(Ko=[]),Zi(Ko,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $o(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===m?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&ea(s)===t.type)?(Jo(t=i(t,n.props),n),t.return=e,t):(Jo(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=zr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Jo(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Hr(t,e.mode,n)).return=e,t;case I:return d(e,t=(0,t._init)(t._payload),n)}if(M(t)||k(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,Zo(t),n);if(t.$$typeof===_)return d(e,Ti(e,t),n);$o(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case I:return f(e,t,n=(i=n._init)(n._payload),r)}if(M(n)||k(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Zo(n),r);if(n.$$typeof===_)return f(e,t,Ti(e,n),r);$o(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(M(r)||k(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Zo(r),i);if(r.$$typeof===_)return y(e,t,n,Ti(t,r),i);$o(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===m){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===I&&ea(w)===c.type){n(l,c.sibling),Jo(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((h=Vr(u.props.children,l.mode,h,u.key)).return=l,l=h):(Jo(h=Ur(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case g:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Hr(u,l.mode,h)).return=l,l=h}return a(l);case I:return v(l,c,u=(w=u._init)(u._payload),h)}if(M(u))return function(i,o,a,l){for(var c=null,u=null,h=o,p=o=0,g=null;null!==h&&p<a.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var m=f(i,h,a[p],l);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m,h=g}if(p===a.length)return n(i,h),si&&$r(i,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],l))&&(o=s(h,o,p),null===u?c=h:u.sibling=h,u=h);return si&&$r(i,p),c}for(h=r(h);p<a.length;p++)null!==(g=y(h,i,p,a[p],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),si&&$r(i,p),c}(l,c,u,h);if(k(u)){if("function"!==typeof(w=k(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,p=a,g=a=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var w=f(i,p,v.value,c);if(null===w){null===p&&(p=m);break}e&&p&&null===w.alternate&&t(i,p),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,p=m}if(v.done)return n(i,p),si&&$r(i,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return si&&$r(i,g),u}for(p=r(p);!v.done;g++,v=l.next())null!==(v=y(p,i,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&p.forEach(function(e){return t(i,e)}),si&&$r(i,g),u}(l,c,u=w.call(u),h)}if("function"===typeof u.then)return v(l,c,Zo(u),h);if(u.$$typeof===_)return v(l,c,Ti(l,u),h);$o(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=zr(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{Qo=0;var i=v(e,t,n,r);return Ko=null,i}catch(o){if(o===Gi||o===Yi)throw o;var s=Lr(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var na=ta(!0),ra=ta(!1),ia=j(null),sa=null;function oa(e){var t=e.alternate;V(ua,1&ua.current),V(ia,e),null===sa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(sa=e)}function aa(e){if(22===e.tag){if(V(ua,ua.current),V(ia,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else la()}function la(){V(ua,ua.current),V(ia,ia.current)}function ca(e){U(ia),sa===e&&(sa=null),U(ua)}var ua=j(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||mh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Lc(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Lc(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Lc(t,e,n),os(t,e,n))}};function pa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(i,s))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ma(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function wa(e){console.error(e)}function ba(e){ya(e)}function _a(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ea(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ca(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){_a(e,t)},n}function Sa(e){return(e=is(e)).tag=3,e}function Aa(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Ea(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ea(t,n,r),"function"!==typeof i&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ia=Error(o(461)),Ta=!1;function xa(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Na(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ai(t),r=Rs(e,t,n,o,s,i),a=Ps(),null===e||Ta?(si&&a&&ti(t),t.flags|=1,xa(e,t,r,i),t.child):(Ls(e,t,i),Ka(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ra(e,t,s,r,i))}if(s=e.child,!Qa(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Br(s,r)).ref=t.ref,e.return=t,t.child=e}function Ra(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Qn(s,r)&&e.ref===t.ref){if(Ta=!1,t.pendingProps=r=s,!Qa(e,i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(Ta=!0)}}return Pa(e,t,n,r,i)}function Da(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Ma(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ma(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hi(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ms(),aa(t)}else null!==s?(Hi(0,s.cachePool),gs(t,s),la(),t.memoizedState=null):(null!==e&&Hi(0,null),ms(),la());return xa(e,t,i,n),t.child}function Ma(e,t,n,r){var i=zi();return i=null===i?null:{parent:Di._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Hi(0,null),ms(),aa(t),null!==e&&Ci(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Pa(e,t,n,r,i){return Ai(t),n=Rs(e,t,n,r,void 0,i),r=Ps(),null===e||Ta?(si&&r&&ti(t),t.flags|=1,xa(e,t,n,i),t.child):(Ls(e,t,i),Ka(e,t,i))}function La(e,t,n,r,i,s){return Ai(t),t.updateQueue=null,n=Ms(t,r,n,i),Ds(e),r=Ps(),null===e||Ta?(si&&r&&ti(t),t.flags|=1,xa(e,t,n,s),t.child):(Ls(e,t,s),Ka(e,t,s))}function Fa(e,t,n,r,i){if(Ai(t),null===t.stateNode){var s=Or,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ii(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ii(o):Or,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(da(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ma(n,a);s.props=l;var c=s.context,u=n.contextType;o=Or,"object"===typeof u&&null!==u&&(o=Ii(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&ga(t,s,r,o),ts=!1;var d=t.memoizedState;s.state=d,us(t,r,s,i),cs(),c=t.memoizedState,a||d!==c||ts?("function"===typeof h&&(da(t,n,h,r),c=t.memoizedState),(l=ts||pa(t,n,l,r,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=ma(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=Ii(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&ga(t,s,r,l),ts=!1,d=t.memoizedState,s.state=d,us(t,r,s,i),cs();var f=t.memoizedState;o!==h||d!==f||ts||null!==e&&null!==e.dependencies&&Si(e.dependencies)?("function"===typeof a&&(da(t,n,a,r),f=t.memoizedState),(u=ts||pa(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Si(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Oa(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):xa(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ka(e,t,i),e}function Ba(e,t,n,r){return fi(),t.flags|=256,xa(e,t,n,r),t.child}var ja={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ua(e){return{baseLanes:e,cachePool:Wi()}}function Va(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mc),e}function za(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?oa(t):la(),si){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qr?{id:Zr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Lr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return mh(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,s?(la(),c=Wa({mode:"hidden",children:c},s=t.mode),i=Vr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=Ua(n),s.childLanes=Va(e,r,n),t.memoizedState=ja,i):(oa(t),Ha(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Ga(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),s=i.fallback,c=t.mode,i=Wa({mode:"visible",children:i.children},c),(s=Vr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=Ua(n),i.childLanes=Va(e,r,n),t.memoizedState=ja,t=s);else if(oa(t),mh(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Ga(e,t,n)}else if(Ta||Ci(e,t,n,!1),r=0!==(n&e.childLanes),Ta||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:xe(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Rr(e,i),Lc(r,e,i),Ia;"$?"===c.data||Yc(),t=Ga(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yh(c.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Xr[Kr++]=Zr,Xr[Kr++]=Jr,Xr[Kr++]=Qr,Zr=e.id,Jr=e.overflow,Qr=t),(t=Ha(t,i.children)).flags|=4096);return t}return s?(la(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Br(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Br(u,s):(s=Vr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=Ua(n):(null!==(l=c.cachePool)?(u=Di._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Wi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Va(e,r,n),t.memoizedState=ja,i):(oa(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ha(e,t){return(t=Wa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wa(e,t){return(e=Lr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ga(e,t,n){return na(t,e.child,null,n),(e=Ha(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function Ya(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n,t);else if(19===e.tag)qa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(ua,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ya(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ya(t,!0,n,null,s);break;case"together":Ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ci(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Si(e))}function Za(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ta=!0;else{if(!Qa(e,n)&&0===(128&t.flags))return Ta=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),wi(0,Di,e.memoizedState.cache),fi();break;case 27:case 5:X(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?za(e,t,n):(oa(t),null!==(e=Ka(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ci(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Xa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Da(e,t,n);case 24:wi(0,Di,e.memoizedState.cache)}return Ka(e,t,n)}(e,t,n);Ta=0!==(131072&e.flags)}else Ta=!1,si&&0!==(1048576&t.flags)&&ei(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===E){t.tag=11,t=Na(null,t,r,e,n);break e}if(i===A){t.tag=14,t=ka(null,t,r,e,n);break e}}throw t=D(r)||r,Error(o(306,t,""))}Fr(r)?(e=ma(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=Pa(null,t,r,e,n))}return t;case 0:return Pa(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=ma(r,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var a=t.memoizedState;if(r=a.cache,wi(0,Di,r),r!==s.cache&&Ei(t,[Di],n,!0),cs(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ba(e,t,r,n);break e}if(r!==i){gi(i=Sr(Error(o(424)),t)),t=Ba(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yh(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Ka(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=xh(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rh(W.current).createElement(n))[De]=t,r[Me]=e,eh(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=xh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&si&&(r=t.stateNode=bh(t.type,t.pendingProps,W.current),ri=t,ai=!0,i=ii,fh(t.type)?(vh=i,ii=yh(r.firstChild)):ii=i),xa(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=yh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=yh(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),X(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,oh(i,s)?r=null:null!==a&&oh(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Rs(e,t,Os,null,null,n),Xh._currentValue=i),Oa(e,t),xa(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yh(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return za(e,t,n);case 4:return q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):xa(e,t,r,n),t.child;case 11:return Na(e,t,t.type,t.pendingProps,n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),xa(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ai(t),r=r(i=Ii(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return ka(e,t,t.type,t.pendingProps,n);case 15:return Ra(e,t,t.type,t.pendingProps,n);case 19:return Xa(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Wa(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Br(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Da(e,t,n);case 24:return Ai(t),r=Ii(Di),null===e?(null===(i=zi())&&(i=rc,s=Mi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),wi(0,Di,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,Di,r)):(r=s.cache,wi(0,Di,r),r!==i.cache&&Ei(t,[Di],n,!0))),xa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function $a(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Vh(t)){if(null!==(t=ia.current)&&((4194048&sc)===sc?null!==sa:(62914560&sc)!==sc&&0===(536870912&sc)||t!==sa))throw Ji=Xi,qi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ce():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(Di),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),$a(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),$a(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:K(t),n=W.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=z.current,di(t)?ui(t):(e=bh(i,r,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(K(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=z.current,di(t))ui(t);else{switch(i=rh(W.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[De]=t,e[Me]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(eh(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=W.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[De]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qu(e.nodeValue,n)))||ci(t)}else(e=rh(e).createTextNode(r))[De]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[De]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Y(),null===e&&Uu(t.stateNode.containerInfo),nl(t),null;case 10:return bi(t.type),nl(t),null;case 19:if(U(ua),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ha(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)jr(n,e),n=n.sibling;return V(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Ec&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>Ec&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,V(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),ys(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Vi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Di),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Di),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(ua),null;case 4:return Y(),null;case 10:return bi(t.type),null;case 22:case 23:return ca(t),ys(),null!==e&&U(Vi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Di),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:bi(Di),Y();break;case 26:case 27:case 5:K(t);break;case 4:Y();break;case 13:ca(t);break;case 19:U(ua);break;case 10:bi(t.type);break;case 22:case 23:ca(t),ys(),null!==e&&U(Vi);break;case 24:bi(Di)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ds(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=ma(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){uu(e,t,s)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||Ju(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&Ju(e,t,f,p,r,d)}}return void mt(e,a,l,c,u,h,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Ju(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Ju(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Ju(e,t,a,i,r,s)}return void bt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Ju(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Ju(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Ju(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Ju(e,t,u,f,r,p)}return;default:if(It(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&$u(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||$u(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Ju(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||Ju(e,t,d,f,r,p)}(r,e.type,n,t),r[Me]=t}catch(i){uu(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fh(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);eh(t,r,n),t[De]=e,t[Me]=n}catch(s){uu(e,e.return,s)}}var wl=!1,bl=!1,_l=!1,El="function"===typeof WeakSet?WeakSet:Set,Cl=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var i=ma(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ds(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&dl(n),512&r&&ul(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&kl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||bl,i=wl;var s=bl;wl=r,(bl=t)&&!s?jl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=i,bl=s}break;case 30:break;default:Fl(e,n)}}function Al(e){var t=e.alternate;null!==t&&(e.alternate=null,Al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Il=null,Tl=!1;function xl(e,t,n){for(n=n.child;null!==n;)Nl(e,t,n),n=n.sibling}function Nl(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:bl||hl(n,t),xl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||hl(n,t);var r=Il,i=Tl;fh(n.type)&&(Il=n.stateNode,Tl=!1),xl(e,t,n),_h(n.stateNode),Il=r,Tl=i;break;case 5:bl||hl(n,t);case 6:if(r=Il,i=Tl,Il=null,xl(e,t,n),Tl=i,null!==(Il=r))if(Tl)try{(9===Il.nodeType?Il.body:"HTML"===Il.nodeName?Il.ownerDocument.body:Il).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Il.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Il&&(Tl?(ph(9===(e=Il).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Td(e)):ph(Il,n.stateNode));break;case 4:r=Il,i=Tl,Il=n.stateNode.containerInfo,Tl=!0,xl(e,t,n),Il=r,Tl=i;break;case 0:case 11:case 14:case 15:bl||al(2,n,t),bl||al(4,n,t),xl(e,t,n);break;case 1:bl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,xl(e,t,n),bl=r;break;default:xl(e,t,n)}}function kl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Td(e)}catch(n){uu(t,t.return,n)}}function Rl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new El),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new El),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fh(l.type)){Il=l.stateNode,Tl=!1;break e}break;case 5:Il=l.stateNode,Tl=!1;break e;case 3:case 4:Il=l.stateNode.containerInfo,Tl=!0;break e}l=l.return}if(null===Il)throw Error(o(160));Nl(s,a,i),Il=null,Tl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Ml=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dl(t,e),Pl(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Dl(t,e),Pl(e),512&r&&(bl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ml;if(Dl(t,e),Pl(e),512&r&&(bl||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[je]||s[De]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),eh(s,r,n),s[De]=e,Ge(s),r=s;break e;case"link":var a=jh("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}eh(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=jh("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}eh(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[De]=e,Ge(s),r=s}e.stateNode=r}else Uh(i,e.type,e.stateNode);else e.stateNode=Oh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Uh(i,e.type,e.stateNode):Oh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Dl(t,e),Pl(e),512&r&&(bl||null===n||hl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Dl(t,e),Pl(e),512&r&&(bl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(_l=!0);break;case 6:if(Dl(t,e),Pl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Bh=null,i=Ml,Ml=Sh(t.containerInfo),Dl(t,e),Ml=i,Pl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Td(t.containerInfo)}catch(p){uu(e,e.return,p)}_l&&(_l=!1,Ll(e));break;case 4:r=Ml,Ml=Sh(e.stateNode.containerInfo),Dl(t,e),Pl(e),Ml=r;break;case 12:default:Dl(t,e),Pl(e);break;case 13:Dl(t,e),Pl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Rl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,h=bl;if(wl=u||i,bl=h||c,Dl(t,e),bl=h,wl=u,Pl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||bl||Bl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Rl(e,n))));break;case 19:Dl(t,e),Pl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Rl(e,r)));case 30:case 21:}}function Pl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Et(s,""),n.flags&=-33),yl(e,gl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;ml(e,gl(e),a);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ll(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ll(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Bl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Bl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Bl(t);break;case 27:_h(t.stateNode);case 26:case 5:hl(t,t.return),Bl(t);break;case 22:null===t.memoizedState&&Bl(t);break;default:Bl(t)}e=e.sibling}}function jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:jl(i,s,n),ol(4,s);break;case 1:if(jl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],a)}catch(c){uu(r,r.return,c)}}n&&64&o&&ll(s),ul(s,s.return);break;case 27:vl(s);case 26:case 5:jl(i,s,n),n&&null===r&&4&o&&dl(s),ul(s,s.return);break;case 12:jl(i,s,n);break;case 13:jl(i,s,n),n&&4&o&&kl(i,s);break;case 22:null===s.memoizedState&&jl(i,s,n),ul(s,s.return);break;case 30:break;default:jl(i,s,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function Vl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:zl(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:zl(e,t,n,r);break;case 3:zl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){zl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else zl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?zl(e,t,n,r):Gl(e,t):2&s._visibility?zl(e,t,n,r):(s._visibility|=2,Wl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Ul(o,t);break;case 24:zl(e,t,n,r),2048&i&&Vl(t.alternate,t)}}function Wl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Wl(s,o,a,l,i),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Wl(s,o,a,l,i):Gl(s,o):(u._visibility|=2,Wl(s,o,a,l,i)),i&&2048&c&&Ul(o.alternate,o);break;case 24:Wl(s,o,a,l,i),i&&2048&c&&Vl(o.alternate,o);break;default:Wl(s,o,a,l,i)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Gl(n,r),2048&i&&Ul(r.alternate,r);break;case 24:Gl(n,r),2048&i&&Vl(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var ql=8192;function Yl(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:Yl(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,n){if(null===zh)throw Error(o(475));var r=zh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Nh(n.href),s=e.querySelector(kh(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Ge(s);s=e.ownerDocument||e,n=Rh(n),(i=Eh.get(i))&&Lh(n,i),Ge(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Yl(e);break;case 3:case 4:var t=Ml;Ml=Sh(e.stateNode.containerInfo),Yl(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,Yl(e),ql=t):Yl(e))}}function Kl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Cl=r,$l(r,e)}Kl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Ql(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Cl=r,$l(r,e)}Kl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function $l(e,t){for(;null!==Cl;){var n=Cl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Cl=r;else e:for(n=e;null!==Cl;){var i=(r=Cl).sibling,s=r.return;if(Al(r),r===n){Cl=null;break e}if(null!==i){i.return=s,Cl=i;break e}Cl=s}}}var ec={getCacheForType:function(e){var t=Ii(Di),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,fc=0,pc=0,gc=0,mc=0,yc=0,vc=null,wc=null,bc=!1,_c=0,Ec=1/0,Cc=null,Sc=null,Ac=0,Ic=null,Tc=null,xc=0,Nc=0,kc=null,Rc=null,Dc=0,Mc=null;function Oc(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==O.T){return 0!==Fi?Fi:Nu()}return ke()}function Pc(){0===mc&&(mc=0===(536870912&sc)||si?Ee():536870912);var e=ia.current;return null!==e&&(e.flags|=32),mc}function Lc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),Uc(e,sc,mc,!1)),Ae(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===dc&&Uc(e,sc,mc,!1)),Eu(e))}function Fc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Gc(),i=qc();rc!==e||sc!==t?(Cc=null,Ec=te()+500,Hc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var s=ac;t:switch(oc){case 1:oc=0,ac=null,$c(e,t,s,1);break;case 2:case 9:if(Ki(s)){oc=0,ac=null,Jc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),Eu(e)},s.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Ki(s)?(oc=0,ac=null,Jc(t)):(oc=0,ac=null,$c(e,t,s,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||Vh(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}oc=0,ac=null,$c(e,t,s,5);break;case 6:oc=0,ac=null,$c(e,t,s,6);break;case 8:zc(),dc=6;break e;default:throw Error(o(462))}}Qc();break}catch(h){Wc(e,h)}return vi=yi=null,O.H=r,O.A=i,nc=n,null!==ic?0:(rc=null,sc=0,xr(),dc)}(e,t):Xc(e,t,!0),s=r;;){if(0===i){cc&&!r&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!s||jc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,a).flags|=256),2!==(a=Xc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,i=4;break e}s=wc,wc=i,null!==s&&(null===wc?wc=s:wc.push.apply(wc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){Hc(e,0),Uc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Uc(r,t,mc,!lc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=_c+300-te())){if(Uc(r,t,mc,!lc),0!==we(r,0,!0))break e;r.timeoutHandle=lh(Bc.bind(null,r,n,wc,Cc,bc,t,mc,pc,yc,lc,s,2,-0,0),i)}else Bc(r,n,wc,Cc,bc,t,mc,pc,yc,lc,s,0,-0,0)}break}i=Xc(e,t,!1),s=!1}Eu(e)}function Bc(e,t,n,r,i,s,a,l,c,u,h,d,f,p){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(zh={stylesheets:null,count:0,unsuspend:Hh},Xl(t),null!==(d=function(){if(null===zh)throw Error(o(475));var e=zh;return e.stylesheets&&0===e.count&&qh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&qh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nu.bind(null,e,t,s,n,r,i,a,l,c,h,1,f,p)),void Uc(e,s,a,!u);nu(e,t,s,n,r,i,a,l,c)}function jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Kn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,r){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Ie(e,n,t)}function Vc(){return 0!==(6&nc)||(Cu(0,!1),!1)}function zc(){if(null!==ic){if(0===oc)var e=ic.return;else vi=yi=null,Fs(e=ic),Ko=null,Qo=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ch(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc(),rc=e,ic=n=Br(e.current,null),sc=t,oc=0,ac=null,lc=!1,cc=be(e,t),uc=!1,yc=mc=gc=pc=fc=dc=0,wc=vc=null,bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hc=t,xr(),n}function Wc(e,t){ws=null,O.H=Go,t===Gi||t===Yi?(t=$i(),oc=3):t===qi?(t=$i(),oc=4):oc=t===Ia?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(dc=1,_a(e,Sr(t,e.current)))}function Gc(){var e=O.H;return O.H=Go,null===e?Go:e}function qc(){var e=O.A;return O.A=ec,e}function Yc(){dc=4,lc||(4194048&sc)!==sc&&null!==ia.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||Uc(rc,sc,mc,!1)}function Xc(e,t,n){var r=nc;nc|=2;var i=Gc(),s=qc();rc===e&&sc===t||(Cc=null,Hc(e,t)),t=!1;var o=dc;e:for(;;)try{if(0!==oc&&null!==ic){var a=ic,l=ac;switch(oc){case 8:zc(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=oc;if(oc=0,ac=null,$c(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,$c(e,a,l,c)}}Kc(),o=dc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,O.H=i,O.A=s,null===ic&&(rc=null,sc=0,xr()),o}function Kc(){for(;null!==ic;)Zc(ic)}function Qc(){for(;null!==ic&&!$();)Zc(ic)}function Zc(e){var t=Za(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=La(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=La(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Fs(t);default:sl(n,t),t=Za(n,t=ic=jr(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function $c(e,t,n,r){vi=yi=null,Fs(t),Ko=null,Qo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ci(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===sa?Yc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Xi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,i)),!1;case 22:return n.flags|=65536,r===Xi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,i)),!1}throw Error(o(435,n.tag))}return hu(e,r,i),Yc(),!1}if(si)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&gi(Sr(e=Error(o(422),{cause:r}),n))):(r!==li&&gi(Sr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Sr(r,n),as(e,i=Ca(e.stateNode,r,i)),4!==dc&&(dc=2)),!1;var s=Error(o(520),{cause:r});if(s=Sr(s,n),null===vc?vc=[s]:vc.push(s),4!==dc&&(dc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=Ca(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Sc||!Sc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Aa(i=Sa(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return dc=1,_a(e,Sr(n,e.current)),void(ic=null)}catch(s){if(null!==i)throw ic=i,s;return dc=1,_a(e,Sr(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===dc&&(dc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);dc=6,ic=null}function nu(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Ac);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&Ie(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Tr,a,l,c),e===rc&&(ic=rc=null,sc=0),Tc=t,Ic=e,xc=n,Nc=s,kc=i,Rc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(se,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=P.p,P.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,th=nd,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:e,selectionRange:n},nd=!1,Cl=t;null!==Cl;)if(e=(t=Cl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Cl=e;else for(;null!==Cl;){switch(s=(t=Cl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=ma(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Cl=e;break}Cl=t.return}}(e,t)}finally{nc=a,P.p=i,O.T=r}}Ac=1,ru(),iu(),su()}}function ru(){if(1===Ac){Ac=0;var e=Ic,t=Tc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=P.p;P.p=2;var i=nc;nc|=4;try{Ol(t,e);var s=nh,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&$n(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(o=m,m=g,g=o);var y=Jn(a,g),v=Jn(a,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=h.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nd=!!th,nh=th=null}finally{nc=i,P.p=r,O.T=n}}e.current=t,Ac=2}}function iu(){if(2===Ac){Ac=0;var e=Ic,t=Tc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=P.p;P.p=2;var i=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=i,P.p=r,O.T=n}}Ac=3}}function su(){if(4===Ac||3===Ac){Ac=0,ee();var e=Ic,t=Tc,n=xc,r=Rc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ac=5:(Ac=0,Tc=Ic=null,ou(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Sc=null),Ne(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=P.p,P.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,P.p=i}}0!==(3&xc)&&au(),Eu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Mc?Dc++:(Dc=0,Mc=e):Dc=0,Cu(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function au(e){return ru(),iu(),su(),lu()}function lu(){if(5!==Ac)return!1;var e=Ic,t=Nc;Nc=0;var n=Ne(xc),r=O.T,i=P.p;try{P.p=32>n?32:n,O.T=null,n=kc,kc=null;var s=Ic,a=xc;if(Ac=0,Tc=Ic=null,xc=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Zl(s.current),Hl(s,s.current,a,n),nc=l,Cu(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{P.p=i,O.T=r,ou(e,t)}}function cu(e,t,n){t=Sr(n,t),null!==(e=ss(e,t=Ca(e.stateNode,t,2),2))&&(Ae(e,2),Eu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Sr(n,e),null!==(r=ss(t,n=Sa(2),2))&&(Aa(n,r,t,e),Ae(r,2),Eu(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=du.bind(null,e,t,n),t.then(e,e))}function du(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===dc||3===dc&&(62914560&sc)===sc&&300>te()-_c?0===(2&nc)&&Hc(e,0):gc|=n,yc===sc&&(yc=0)),Eu(e)}function fu(e,t){0===t&&(t=Ce()),null!==(e=Rr(e,t))&&(Ae(e,t),Eu(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),fu(e,n)}var mu=null,yu=null,vu=!1,wu=!1,bu=!1,_u=0;function Eu(e){e!==yu&&null===e.next&&(null===yu?mu=yu=e:yu=yu.next=e),wu=!0,vu||(vu=!0,hh(function(){0!==(6&nc)?Z(re,Su):Au()}))}function Cu(e,t){if(!bu&&wu){bu=!0;do{for(var n=!1,r=mu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,xu(r,s))}else s=sc,0===(3&(s=we(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,s)||(n=!0,xu(r,s));r=r.next}}while(n);bu=!1}}function Su(){Au()}function Au(){wu=vu=!1;var e=0;0!==_u&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ah&&(ah=e,!0);return ah=null,!1}()&&(e=_u),_u=0);for(var t=te(),n=null,r=mu;null!==r;){var i=r.next,s=Iu(r,t);0===s?(r.next=null,null===n?mu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&s))&&(wu=!0)),r=i}Cu(e,!1)}function Iu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=_e(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=sc,n=we(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ne(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Tu.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Tu(e,t){if(0!==Ac&&5!==Ac)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=we(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Iu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Tu.bind(null,e):null)}function xu(e,t){if(au())return null;Fc(e,t,!0)}function Nu(){return 0===_u&&(_u=Ee()),_u}function ku(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Nt(""+e)}function Ru(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Du=0;Du<_r.length;Du++){var Mu=_r[Du];Er(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}Er(fr,"onAnimationEnd"),Er(pr,"onAnimationIteration"),Er(gr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(mr,"onTransitionRun"),Er(yr,"onTransitionStart"),Er(vr,"onTransitionCancel"),Er(wr,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Lu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ya(u)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ya(u)}i.currentTarget=null,s=l}}}}function Fu(e,t){var n=t[Pe];void 0===n&&(n=t[Pe]=new Set);var r=e+"__bubble";n.has(r)||(Vu(t,e,2,!1),n.add(r))}function Bu(e,t,n){var r=0;t&&(r|=4),Vu(n,e,r,t)}var ju="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[ju]){e[ju]=!0,qe.forEach(function(t){"selectionchange"!==t&&(Pu.has(t)||Bu(t,!1,e),Bu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ju]||(t[ju]=!0,Bu("selectionchange",!1,t))}}function Vu(e,t,n,r){switch(cd(t)){case 2:var i=rd;break;case 8:i=id;break;default:i=sd}n=i.bind(null,t,n,e),i=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=Ve(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Lt(function(){var r=s,i=Rt(n),o=[];e:{var a=br.get(e);if(void 0!==a){var c=$t,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case gr:c=an;break;case wr:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mn;break;case"toggle":case"beforetoggle":c=bn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Ft(g,f))&&h.push(Hu(g,m,p)),d)break;g=g.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===kt||!(u=n.relatedTarget||n.fromElement)||!Ve(u)&&!u[Oe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ve(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(h=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),d=null==c?a:He(c),p=null==u?a:He(u),(a=new h(m,g+"leave",c,n,i)).target=d,a.relatedTarget=p,m=null,Ve(i)===r&&((h=new h(f,g+"enter",u,n,i)).target=p,h.relatedTarget=d,m=h),d=m,c&&u)e:{for(f=u,g=0,p=h=c;p;p=Gu(p))g++;for(p=0,m=f;m;m=Gu(m))p++;for(;0<g-p;)h=Gu(h),g--;for(;0<p-g;)f=Gu(f),p--;for(;g--;){if(h===f||null!==f&&h===f.alternate)break e;h=Gu(h),f=Gu(f)}h=null}else h=null;null!==c&&qu(o,a,c,h,!1),null!==u&&null!==d&&qu(o,d,u,h,!0)}if("select"===(c=(a=r?He(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=Bn;else if(Dn(a))if(jn)y=Xn;else{y=qn;var v=Gn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&It(r.elementType)&&(y=Bn):y=Yn;switch(y&&(y=y(e,r))?Mn(o,y,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?He(r):window,e){case"focusin":(Dn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var w;if(En)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else kn?xn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(An&&"ko"!==n.locale&&(kn||"onCompositionStart"!==b?"onCompositionEnd"===b&&kn&&(w=Wt()):(zt="value"in(Vt=i)?Vt.value:Vt.textContent,kn=!0)),0<(v=Wu(r,b)).length&&(b=new cn(b,e,null,n,i),o.push({event:b,listeners:v}),w?b.data=w:null!==(w=Nn(n))&&(b.data=w))),(w=Sn?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Tn=!0,In);case"textInput":return(e=t.data)===In&&Tn?null:e;default:return null}}(e,n):function(e,t){if(kn)return"compositionend"===e||!En&&xn(e,t)?(e=Wt(),Ht=zt=Vt=null,kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Wu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:b}),v.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=ku((i[Me]||null).action),o=r.submitter;o&&null!==(t=(t=o[Me]||null)?ku(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new $t("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==_u){var e=o?Ru(i,o):new FormData(i);Ro(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Ru(i,o):new FormData(i),Ro(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Lu(o,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ft(e,n))&&r.unshift(Hu(e,i,s)),null!=(i=Ft(e,t))&&r.push(Hu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Ft(n,s))&&o.unshift(Hu(n,c,l)):i||null!=(c=Ft(n,s))&&o.push(Hu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yu=/\r\n?/g,Xu=/\u0000|\uFFFD/g;function Ku(e){return("string"===typeof e?e:""+e).replace(Yu,"\n").replace(Xu,"")}function Qu(e,t){return t=Ku(t),Ku(e)===t}function Zu(){}function Ju(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":At(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Ju(e,t,"name",i.name,i,null),Ju(e,t,"formEncType",i.formEncType,i,null),Ju(e,t,"formMethod",i.formMethod,i,null),Ju(e,t,"formTarget",i.formTarget,i,null)):(Ju(e,t,"encType",i.encType,i,null),Ju(e,t,"method",i.method,i,null),Ju(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function $u(e,t,n,r,i,s){switch(n){case"style":At(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Me]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function eh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,r,a,n,null)}}return s&&Ju(e,t,"srcSet",n.srcSet,n,null),void(i&&Ju(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Ju(e,t,i,h,n,null)}}return yt(e,r,l,c,u,a,s,!1),void ht(e);case"select":for(s in Fu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ju(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Fu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Ju(e,t,a,l,n,null)}return _t(e,i,s,r),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Ju(e,t,c,i,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(i=0;i<Ou.length;i++)Fu(Ou[i],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,u,i,n,null)}return;default:if(It(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&$u(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Ju(e,t,l,i,n,null))}var th=null,nh=null;function rh(e){return 9===e.nodeType?e:e.ownerDocument}function ih(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function oh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ah=null;var lh="function"===typeof setTimeout?setTimeout:void 0,ch="function"===typeof clearTimeout?clearTimeout:void 0,uh="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uh?function(e){return uh.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout(function(){throw e})}function fh(e){return"head"===e}function ph(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&_h(o.documentElement),2&n&&_h(o.body),4&n)for(_h(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[je]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Td(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Td(t)}function gh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gh(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function mh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vh=null;function wh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bh(e,t,n){switch(t=rh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function _h(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var Eh=new Map,Ch=new Set;function Sh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ah=P.d;P.d={f:function(){var e=Ah.f(),t=Vc();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Mo(t):Ah.r(e)},D:function(e){Ah.D(e),Th("dns-prefetch",e,null)},C:function(e,t){Ah.C(e,t),Th("preconnect",e,t)},L:function(e,t,n){Ah.L(e,t,n);var r=Ih;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var s=i;switch(t){case"style":s=Nh(e);break;case"script":s=Dh(e)}Eh.has(s)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Eh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(kh(s))||"script"===t&&r.querySelector(Mh(s))||(eh(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Ah.m(e,t);var n=Ih;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Dh(e)}if(!Eh.has(s)&&(e=d({rel:"modulepreload",href:e},t),Eh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mh(s)))return}eh(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Ah.X(e,t);var n=Ih;if(n&&e){var r=We(n).hoistableScripts,i=Dh(e),s=r.get(i);s||((s=n.querySelector(Mh(i)))||(e=d({src:e,async:!0},t),(t=Eh.get(i))&&Fh(e,t),Ge(s=n.createElement("script")),eh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Ah.S(e,t,n);var r=Ih;if(r&&e){var i=We(r).hoistableStyles,s=Nh(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(kh(s)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Eh.get(s))&&Lh(e,n);var l=o=r.createElement("link");Ge(l),eh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Ph(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Ah.M(e,t);var n=Ih;if(n&&e){var r=We(n).hoistableScripts,i=Dh(e),s=r.get(i);s||((s=n.querySelector(Mh(i)))||(e=d({src:e,async:!0,type:"module"},t),(t=Eh.get(i))&&Fh(e,t),Ge(s=n.createElement("script")),eh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Ih="undefined"===typeof document?null:document;function Th(e,t,n){var r=Ih;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ch.has(i)||(Ch.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(eh(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function xh(e,t,n,r){var i,s,a,l,c=(c=W.current)?Sh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Nh(n.href),(r=(n=We(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Nh(n.href);var u=We(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(kh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Eh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Eh.set(e,n),u||(i=c,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),eh(s,"link",a),Ge(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Dh(n),(r=(n=We(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Nh(e){return'href="'+gt(e)+'"'}function kh(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Dh(e){return'[src="'+gt(e)+'"]'}function Mh(e){return"script[async]"+e}function Oh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),eh(r,"style",i),Ph(r,n.precedence,e),t.instance=r;case"stylesheet":i=Nh(n.href);var s=e.querySelector(kh(i));if(s)return t.state.loading|=4,t.instance=s,Ge(s),s;r=Rh(n),(i=Eh.get(i))&&Lh(r,i),Ge(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(s,"link",r),t.state.loading|=4,Ph(s,n.precedence,e),t.instance=s;case"script":return s=Dh(n.src),(i=e.querySelector(Mh(s)))?(t.instance=i,Ge(i),i):(r=n,(i=Eh.get(s))&&Fh(r=d({},n),i),Ge(i=(e=e.ownerDocument||e).createElement("script")),eh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ph(r,n.precedence,e));return t.instance}function Ph(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Lh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Bh=null;function jh(e,t,n){if(null===Bh){var r=new Map,i=Bh=new Map;i.set(n,r)}else(r=(i=Bh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[je]||s[De]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Uh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var zh=null;function Hh(){}function Wh(){if(this.count--,0===this.count)if(this.stylesheets)qh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gh=null;function qh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gh=new Map,t.forEach(Yh,e),Gh=null,Wh.call(e))}function Yh(e,t){if(!(4&t.state.loading)){var n=Gh.get(e);if(n)var r=n.get(null);else{n=new Map,Gh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Wh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Xh={$$typeof:_,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Kh(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Qh(e,t,n,r,i,s,o,a,l,c,u,h){return e=new Kh(e,t,n,o,a,l,c,h),t=1,!0===s&&(t|=24),s=Lr(3,null,null,t),e.current=s,s.stateNode=e,(t=Mi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Zh(e){return e?e=Or:Or}function Jh(e,t,n,r,i,s){i=Zh(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Lc(n,0,t),os(n,e,t))}function $h(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ed(e,t){$h(e,t),(e=e.alternate)&&$h(e,t)}function td(e){if(13===e.tag){var t=Rr(e,67108864);null!==t&&Lc(t,0,67108864),ed(e,67108864)}}var nd=!0;function rd(e,t,n,r){var i=O.T;O.T=null;var s=P.p;try{P.p=2,sd(e,t,n,r)}finally{P.p=s,O.T=i}}function id(e,t,n,r){var i=O.T;O.T=null;var s=P.p;try{P.p=8,sd(e,t,n,r)}finally{P.p=s,O.T=i}}function sd(e,t,n,r){if(nd){var i=od(r);if(null===i)zu(e,t,r,ad,n),vd(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hd=wd(hd,e,t,n,r,i),!0;case"dragenter":return dd=wd(dd,e,t,n,r,i),!0;case"mouseover":return fd=wd(fd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return pd.set(s,wd(pd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gd.set(s,wd(gd.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vd(e,r),4&t&&-1<yd.indexOf(e)){for(;null!==i;){var s=ze(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ve(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}Eu(s),0===(6&nc)&&(Ec=te()+500,Cu(0,!1))}}break;case 13:null!==(a=Rr(s,2))&&Lc(a,0,2),Vc(),ed(s,2)}if(null===(s=od(r))&&zu(e,t,r,ad,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else zu(e,t,r,null,n)}}function od(e){return ld(e=Rt(e))}var ad=null;function ld(e){if(ad=null,null!==(e=Ve(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ad=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var ud=!1,hd=null,dd=null,fd=null,pd=new Map,gd=new Map,md=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vd(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":fd=null;break;case"pointerover":case"pointerout":pd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(t.pointerId)}}function wd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ze(t))&&td(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bd(e){var t=Ve(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}(e.priority,function(){if(13===n.tag){var e=Oc();e=xe(e);var t=Rr(n,e);null!==t&&Lc(t,0,e),ed(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _d(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=od(e.nativeEvent);if(null!==n)return null!==(t=ze(n))&&td(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);kt=r,n.target.dispatchEvent(r),kt=null,t.shift()}return!0}function Ed(e,t,n){_d(e)&&n.delete(t)}function Cd(){ud=!1,null!==hd&&_d(hd)&&(hd=null),null!==dd&&_d(dd)&&(dd=null),null!==fd&&_d(fd)&&(fd=null),pd.forEach(Ed),gd.forEach(Ed)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Cd)))}var Ad=null;function Id(e){Ad!==e&&(Ad=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ad===e&&(Ad=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===ld(r||n))continue;break}var s=ze(n);null!==s&&(e.splice(t,3),t-=3,Ro(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Td(e){function t(t){return Sd(t,e)}null!==hd&&Sd(hd,e),null!==dd&&Sd(dd,e),null!==fd&&Sd(fd,e),pd.forEach(t),gd.forEach(t);for(var n=0;n<md.length;n++){var r=md[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<md.length&&null===(n=md[0]).blockedOn;)bd(n),null===n.blockedOn&&md.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Me]||null;if("function"===typeof s)o||Id(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Me]||null)a=o.formAction;else if(null!==ld(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Id(n)}}}function xd(e){this._internalRoot=e}function Nd(e){this._internalRoot=e}Nd.prototype.render=xd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jh(t.current,Oc(),e,t,null,null)},Nd.prototype.unmount=xd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jh(e.current,2,null,e,null,null),Vc(),t[Oe]=null}},Nd.prototype.unstable_scheduleHydration=function(e){if(e){var t=ke();e={blockedOn:null,target:e,priority:t};for(var n=0;n<md.length&&0!==t&&t<md[n].priority;n++);md.splice(n,0,e),0===n&&bd(e)}};var kd=i.version;if("19.1.1"!==kd)throw Error(o(527,kd,"19.1.1"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Rd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ue=Dd.inject(Rd),he=Dd}catch(Od){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=va,s=wa,l=ba;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qh(e,1,!1,null,0,n,r,i,s,l,0,null),e[Oe]=t.current,Uu(e),new xd(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=va,l=wa,c=ba,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Qh(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Zh(null),n=t.current,(i=is(r=xe(r=Oc()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,Ae(t,n),Eu(t),e[Oe]=t.current,Uu(e),new Nd(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},72:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function o(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var a,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),s(r,n.prototype),o(r),r}return i(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class h extends c{}h.kind="IllegalArgumentException";class d{constructor(e){if(this.binarizer=e,null===e)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new d(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new d(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new d(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class m extends c{}m.kind="IndexOutOfBoundsException";class y extends m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class v{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){v.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new h("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return g.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=v.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-r-1}static numberComparator(e,t){return e-t}}class w{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}w.MIN_VALUE_32_BITS=-2147483648,w.MAX_VALUE=Number.MAX_SAFE_INTEGER;class b{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?b.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=b.makeArray(e);g.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=n[r]}const o=32*r+w.numberOfTrailingZeros(i);return o>t?t:o}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=~n[r]}const o=32*r+w.numberOfTrailingZeros(i);return o>t?t:o}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new h;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++){const o=(2<<(s<r?31:31&t))-(1<<(s>n?0:31&e));i[s]|=o}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new h;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let o=r;o<=i;o++){const a=(2<<(o<i?31:31&t))-(1<<(o>r?0:31&e))&4294967295;if((s[o]&a)!==(n?a:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new h("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let i=1;i<n;i++){const n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof b))return!1;const t=e;return this.size===t.size&&v.equals(this.bits,t.bits)}hashCode(){return 31*this.size+v.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new b(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(a||(a={}));var _,E=a;class C extends c{static getFormatInstance(){return new C}}C.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(_||(_={}));class S{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];this.otherEncodingNames=i,S.VALUE_IDENTIFIER_TO_ECI.set(e,this),S.NAME_TO_ECI.set(n,this);const o=this.values;for(let a=0,l=o.length;a!==l;a++){const e=o[a];S.VALUES_TO_ECI.set(e,this)}for(const a of i)S.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new C("incorect value");const t=S.VALUES_TO_ECI.get(e);if(void 0===t)throw new C("incorect value");return t}static getCharacterSetECIByName(e){const t=S.NAME_TO_ECI.get(e);if(void 0===t)throw new C("incorect value");return t}equals(e){if(!(e instanceof S))return!1;const t=e;return this.getName()===t.getName()}}S.VALUE_IDENTIFIER_TO_ECI=new Map,S.VALUES_TO_ECI=new Map,S.NAME_TO_ECI=new Map,S.Cp437=new S(_.Cp437,Int32Array.from([0,2]),"Cp437"),S.ISO8859_1=new S(_.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),S.ISO8859_2=new S(_.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),S.ISO8859_3=new S(_.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),S.ISO8859_4=new S(_.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),S.ISO8859_5=new S(_.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),S.ISO8859_6=new S(_.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),S.ISO8859_7=new S(_.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),S.ISO8859_8=new S(_.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),S.ISO8859_9=new S(_.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),S.ISO8859_10=new S(_.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),S.ISO8859_11=new S(_.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),S.ISO8859_13=new S(_.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),S.ISO8859_14=new S(_.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),S.ISO8859_15=new S(_.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),S.ISO8859_16=new S(_.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),S.SJIS=new S(_.SJIS,20,"SJIS","Shift_JIS"),S.Cp1250=new S(_.Cp1250,21,"Cp1250","windows-1250"),S.Cp1251=new S(_.Cp1251,22,"Cp1251","windows-1251"),S.Cp1252=new S(_.Cp1252,23,"Cp1252","windows-1252"),S.Cp1256=new S(_.Cp1256,24,"Cp1256","windows-1256"),S.UnicodeBigUnmarked=new S(_.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),S.UTF8=new S(_.UTF8,26,"UTF8","UTF-8"),S.ASCII=new S(_.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),S.Big5=new S(_.Big5,28,"Big5"),S.GB18030=new S(_.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),S.EUC_KR=new S(_.EUC_KR,30,"EUC_KR","EUC-KR");class A extends c{}A.kind="UnsupportedOperationException";class I{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!I.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof S?e:S.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(I.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(S.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new A("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(S.UTF8)||e.equals(S.ISO8859_1)||e.equals(S.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class T{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return I.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(E.CHARACTER_SET))return t.get(E.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,o=0,a=0,l=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let v=0;v<n&&(r||i||s);v++){const t=255&e[v];s&&(o>0?0===(128&t)?s=!1:o--:0!==(128&t)&&(0===(64&t)?s=!1:(o++,0===(32&t)?a++:(o++,0===(16&t)?l++:(o++,0===(8&t)?c++:s=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&m++),i&&(u>0?t<64||127===t||t>252?i=!1:u--:128===t||160===t||t>239?i=!1:t>160&&t<224?(h++,f=0,d++,d>p&&(p=d)):t>127?(u++,d=0,f++,f>g&&(g=f)):(d=0,f=0))}return s&&o>0&&(s=!1),i&&u>0&&(i=!1),s&&(y||a+l+c>0)?T.UTF8:i&&(T.ASSUME_SHIFT_JIS||p>=3||g>=3)?T.SHIFT_JIS:r&&i?2===p&&2===h||10*m>=n?T.SHIFT_JIS:T.ISO88591:r?T.ISO88591:i?T.SHIFT_JIS:s?T.UTF8:T.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=-1;function s(e,t,r,s,o,a){if("%%"===e)return"%";if(void 0===n[++i])return;e=s?parseInt(s.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=n[i];break;case"c":l=n[i][0];break;case"f":l=parseFloat(n[i]).toFixed(e);break;case"p":l=parseFloat(n[i]).toPrecision(e);break;case"e":l=parseFloat(n[i]).toExponential(e);break;case"x":l=parseInt(n[i]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[i],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(r),h=r&&r[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+h:h+l;return l}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)}static getBytes(e,t){return I.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}T.SHIFT_JIS=S.SJIS.getName(),T.GB2312="GB2312",T.ISO88591=S.ISO8859_1.getName(),T.EUC_JP="EUC_JP",T.UTF8=S.UTF8.getName(),T.PLATFORM_DEFAULT_ENCODING=T.UTF8,T.ASSUME_SHIFT_JIS=!1;class x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=T.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class N{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new h("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new N(n,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new h("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,o=-1,a=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new h("row lengths do not match");s=i,a++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[i]=!0,i++;else{if(e.substring(l,l+n.length)!==n)throw new h("illegal character encountered: "+e.substring(l));l+=n.length,r[i]=!1,i++}if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new h("row lengths do not match");a++}const c=new N(o,a);for(let u=0;u<i;u++)r[u]&&c.set(Math.floor(u%o),Math.floor(u/o));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new h("input matrix dimensions do not match");const t=new b(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const s=i*n,o=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[s+e]^=o[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new h("Left and top must be nonnegative");if(r<1||n<1)throw new h("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new h("The region must fit inside the matrix");const o=this.rowSize,a=this.bits;for(let l=t;l<s;l++){const t=l*o;for(let n=e;n<i;n++)a[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new b(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(32*s,r[i+s]);return t}setRow(e,t){g.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new b(e),r=new b(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,s=t,o=-1,a=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<s&&(s=l),l>a&&(a=l),32*e<i){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<i&&(i=32*e+n)}if(32*e+31>o){let n=31;for(;t>>>n===0;)n--;32*e+n>o&&(o=32*e+n)}}}return o<i||a<s?null:Int32Array.from([i,s,o-i+1,a-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let o=0;for(;0===(s<<31-o&4294967295);)o++;return i+=o,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const s=t[n];let o=31;for(;s>>>o===0;)o--;return i+=o,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof N))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&v.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+v.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new x;for(let i=0,s=this.height;i<s;i++){for(let n=0,s=this.width;n<s;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new N(this.width,this.height,this.rowSize,this.bits.slice())}}class k extends c{static getNotFoundInstance(){return new k}}k.kind="NotFoundException";class R extends p{constructor(e){super(e),this.luminances=R.EMPTY,this.buckets=new Int32Array(R.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new b(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let a=0;a<r;a++)s[(255&i[a])>>R.LUMINANCE_SHIFT]++;const o=R.estimateBlackPoint(s);if(r<3)for(let a=0;a<r;a++)(255&i[a])<o&&t.set(a);else{let e=255&i[0],n=255&i[1];for(let s=1;s<r-1;s++){const r=255&i[s+1];(4*n-e-r)/2<o&&t.set(s),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new N(t,n);this.initArrays(t);const i=this.buckets;for(let a=1;a<5;a++){const r=Math.floor(n*a/5),s=e.getRow(r,this.luminances),o=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<o;e++)i[(255&s[e])>>R.LUMINANCE_SHIFT]++}const s=R.estimateBlackPoint(i),o=e.getMatrix();for(let a=0;a<n;a++){const e=a*t;for(let n=0;n<t;n++)(255&o[e+n])<s&&r.set(n,a)}return r}createBinarizer(e){return new R(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<R.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let c=0;c<t;c++)e[c]>i&&(r=c,i=e[c]),e[c]>n&&(n=e[c]);let s=0,o=0;for(let c=0;c<t;c++){const t=c-r,n=e[c]*t*t;n>o&&(s=c,o=n)}if(r>s){const e=r;r=s,s=e}if(s-r<=t/16)throw new k;let a=s-1,l=-1;for(let c=s-1;c>r;c--){const t=c-r,i=t*t*(s-c)*(n-e[c]);i>l&&(a=c,l=i)}return a<<R.LUMINANCE_SHIFT}}R.LUMINANCE_BITS=5,R.LUMINANCE_SHIFT=8-R.LUMINANCE_BITS,R.LUMINANCE_BUCKETS=1<<R.LUMINANCE_BITS,R.EMPTY=Uint8ClampedArray.from([0]);class D extends R{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=D.MINIMUM_DIMENSION&&n>=D.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>D.BLOCK_SIZE_POWER;0!==(t&D.BLOCK_SIZE_MASK)&&i++;let s=n>>D.BLOCK_SIZE_POWER;0!==(n&D.BLOCK_SIZE_MASK)&&s++;const o=D.calculateBlackPoints(r,i,s,t,n),a=new N(t,n);D.calculateThresholdForBlock(r,i,s,t,n,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new D(e)}static calculateThresholdForBlock(e,t,n,r,i,s,o){const a=i-D.BLOCK_SIZE,l=r-D.BLOCK_SIZE;for(let c=0;c<n;c++){let i=c<<D.BLOCK_SIZE_POWER;i>a&&(i=a);const u=D.cap(c,2,n-3);for(let n=0;n<t;n++){let a=n<<D.BLOCK_SIZE_POWER;a>l&&(a=l);const c=D.cap(n,2,t-3);let h=0;for(let e=-2;e<=2;e++){const t=s[u+e];h+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const d=h/25;D.thresholdBlock(e,a,i,d,r,o)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let o=0,a=n*i+t;o<D.BLOCK_SIZE;o++,a+=i)for(let i=0;i<D.BLOCK_SIZE;i++)(255&e[a+i])<=r&&s.set(t+i,n+o)}static calculateBlackPoints(e,t,n,r,i){const s=i-D.BLOCK_SIZE,o=r-D.BLOCK_SIZE,a=new Array(n);for(let l=0;l<n;l++){a[l]=new Int32Array(t);let n=l<<D.BLOCK_SIZE_POWER;n>s&&(n=s);for(let i=0;i<t;i++){let t=i<<D.BLOCK_SIZE_POWER;t>o&&(t=o);let s=0,c=255,u=0;for(let i=0,o=n*r+t;i<D.BLOCK_SIZE;i++,o+=r){for(let t=0;t<D.BLOCK_SIZE;t++){const n=255&e[o+t];s+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>D.MIN_DYNAMIC_RANGE)for(i++,o+=r;i<D.BLOCK_SIZE;i++,o+=r)for(let t=0;t<D.BLOCK_SIZE;t++)s+=255&e[o+t]}let h=s>>2*D.BLOCK_SIZE_POWER;if(u-c<=D.MIN_DYNAMIC_RANGE&&(h=c/2,l>0&&i>0)){const e=(a[l-1][i]+2*a[l][i-1]+a[l-1][i-1])/4;c<e&&(h=e)}a[l][i]=h}}return a}}D.BLOCK_SIZE_POWER=3,D.BLOCK_SIZE=1<<D.BLOCK_SIZE_POWER,D.BLOCK_SIZE_MASK=D.BLOCK_SIZE-1,D.MINIMUM_DIMENSION=5*D.BLOCK_SIZE,D.MIN_DYNAMIC_RANGE=24;class M{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new A("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new A("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new A("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new x;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let i;i=n<64?"#":n<128?"+":n<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class O extends M{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new O(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new O(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new O(this.delegate.rotateCounterClockwise45())}}class P extends M{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=P.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return P.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,o=e.length;i<o;i+=4,s++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[s]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*P.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=o,t.height=a,n.translate(o/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=P.makeBufferFromCanvasImageData(t),this}invert(){return new O(this)}}P.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var F,B=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){e.done?n(e.value):i(e.value).then(o,a)}l((r=r.apply(e,t||[])).next())})};class j{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new L(e.deviceId,e.label))})}findDeviceById(e){return B(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return B(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return B(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return B(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return B(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return B(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return B(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return B(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new u("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new u("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode)return s(new k("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(o){if(t&&o instanceof k||(o instanceof f||o instanceof C)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(o)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof f||r instanceof C||r instanceof k)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new P(t),r=new D(n);return new d(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===s||null===s?g.currentTimeMillis():s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);g.arraycopy(t,0,n,0,t.length),g.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(F||(F={}));var V,z=F;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(V||(V={}));var H,W,G,q,Y,X,K=V;class Q{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Z{exp(e){return this.expTable[e]}log(e){if(0===e)throw new h;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class J{constructor(e,t){if(0===t.length)throw new h;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=Z.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=Z.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=Z.addOrSubtract(t[s-i],n[s]);return new J(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),o=this.field;for(let a=0;a<n;a++){const e=t[a];for(let t=0;t<i;t++)s[a+t]=Z.addOrSubtract(s[a+t],o.multiply(e,r[t]))}return new J(o,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new J(n,r)}multiplyByMonomial(e,t){if(e<0)throw new h;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let o=0;o<r;o++)i[o]=s.multiply(n[o],t);return new J(s,i)}divide(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new h("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const i=r.getDegree()-e.getDegree(),o=t.multiply(r.getCoefficient(r.getDegree()),s),a=e.multiplyByMonomial(i,o),l=t.buildMonomial(i,o);n=n.addOrSubtract(l),r=r.addOrSubtract(a)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class $ extends c{}$.kind="ArithmeticException";class ee extends Z{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let o=0;o<t;o++)r[o]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let o=0;o<t-1;o++)s[r[o]]=o;this.logTable=s,this.zero=new J(this,Int32Array.from([0])),this.one=new J(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new h;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new J(this,n)}inverse(e){if(0===e)throw new $;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+w.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new J(n,e),i=new Int32Array(t);let s=!0;for(let d=0;d<t;d++){const e=r.evaluateAt(n.exp(d+n.getGeneratorBase()));i[i.length-1-d]=e,0!==e&&(s=!1)}if(s)return;const o=new J(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),o,t),l=a[0],c=a[1],u=this.findErrorLocations(l),h=this.findErrorMagnitudes(c,u);for(let d=0;d<u.length;d++){const t=e.length-1-n.log(u[d]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],h[d])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let i=e,s=t,o=r.getZero(),a=r.getOne();for(;s.getDegree()>=(n/2|0);){let e=i,t=o;if(i=s,o=a,i.isZero())throw new te("r_{i-1} was zero");s=e;let n=r.getZero();const l=i.getCoefficient(i.getDegree()),c=r.inverse(l);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const e=s.getDegree()-i.getDegree(),t=r.multiply(s.getCoefficient(s.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(e,t)),s=s.addOrSubtract(i.multiplyByMonomial(e,t))}if(a=n.multiply(o).addOrSubtract(t),s.getDegree()>=i.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=r.inverse(l);return[a.multiplyScalar(c),s.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)0===e.evaluateAt(s)&&(n[r]=i.inverse(s),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const o=i.inverse(t[s]);let a=1;for(let e=0;e<n;e++)if(s!==e){const n=i.multiply(t[e],o),r=0===(1&n)?1|n:-2&n;a=i.multiply(a,r)}r[s]=i.multiply(e.evaluateAt(o),i.inverse(a)),0!==i.getGeneratorBase()&&(r[s]=i.multiply(r[s],o))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(H||(H={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=ie.convertBoolArrayToByteArray(r),s=ie.getEncodedData(r),o=new Q(i,s,null,null);return o.setNumBits(r.length),o}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=H.UPPER,r=H.UPPER,i="",s=0;for(;s<t;)if(r===H.BINARY){if(t-s<5)break;let o=ie.readCode(e,s,5);if(s+=5,0===o){if(t-s<11)break;o=ie.readCode(e,s,11)+31,s+=11}for(let n=0;n<o;n++){if(t-s<8){s=t;break}const n=ie.readCode(e,s,8);i+=T.castAsNonUtf8Char(n),s+=8}r=n}else{let o=r===H.DIGIT?4:5;if(t-s<o)break;let a=ie.readCode(e,s,o);s+=o;let l=ie.getCharacter(r,a);l.startsWith("CTRL_")?(n=r,r=ie.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(e){switch(e){case"L":return H.LOWER;case"P":return H.PUNCT;case"M":return H.MIXED;case"D":return H.DIGIT;case"B":return H.BINARY;default:return H.UPPER}}static getCharacter(e,t){switch(e){case H.UPPER:return ie.UPPER_TABLE[t];case H.LOWER:return ie.LOWER_TABLE[t];case H.MIXED:return ie.MIXED_TABLE[t];case H.PUNCT:return ie.PUNCT_TABLE[t];case H.DIGIT:return ie.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new C;let s=e.length%n,o=new Int32Array(i);for(let d=0;d<i;d++,s+=n)o[d]=ie.readCode(e,s,n);try{new re(t).decode(o,i-r)}catch(h){throw new C(h)}let a=(1<<n)-1,l=0;for(let d=0;d<r;d++){let e=o[d];if(0===e||e===a)throw new C;1!==e&&e!==a-1||l++}let c=new Array(r*n-l),u=0;for(let d=0;d<r;d++){let e=o[d];if(1===e||e===a-1)c.fill(e>1,u,u+n-1),u+=n-1;else for(let t=n-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let o=0;o<i.length;o++)i[o]=o;else{let e=r+1+2*w.truncDivision(w.truncDivision(r,2)-1,15),t=r/2,n=w.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+w.truncDivision(r,15);i[t-r-1]=n-e-1,i[t+r]=n+e+1}}for(let o=0,a=0;o<n;o++){let l=4*(n-o)+(t?9:12),c=2*o,u=r-1-c;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)s[a+n+r]=e.get(i[c+r],i[c+t]),s[a+2*l+n+r]=e.get(i[c+t],i[u-r]),s[a+4*l+n+r]=e.get(i[u-r],i[u-t]),s[a+6*l+n+r]=e.get(i[u-t],i[c+r])}a+=8*l}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ie.readCode(e,t,8):ie.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ie.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class se{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class oe{static floatToIntBits(e){return e}}oe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ae){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*oe.floatToIntBits(this.x)+oe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,o;if(n>=t&&n>=r?(s=e[0],i=e[1],o=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],o=e[2]):(s=e[2],i=e[0],o=e[1]),this.crossProductZ(i,s,o)<0){const e=i;i=o,o=e}e[0]=i,e[1]=s,e[2]=o}static distance(e,t){return se.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,o=!1,a=!1,l=!1,c=!1,u=!1;const h=this.width,d=this.height;for(;s;){s=!1;let f=!0;for(;(f||!a)&&t<h;)f=this.containsBlackPoint(n,r,t,!1),f?(t++,s=!0,a=!0):a||t++;if(t>=h){i=!0;break}let p=!0;for(;(p||!l)&&r<d;)p=this.containsBlackPoint(e,t,r,!0),p?(r++,s=!0,l=!0):l||r++;if(r>=d){i=!0;break}let g=!0;for(;(g||!c)&&e>=0;)g=this.containsBlackPoint(n,r,e,!1),g?(e--,s=!0,c=!0):c||e--;if(e<0){i=!0;break}let m=!0;for(;(m||!u)&&n>=0;)m=this.containsBlackPoint(e,t,n,!0),m?(n--,s=!0,u=!0):u||n--;if(n<0){i=!0;break}s&&(o=!0)}if(!i&&o){const i=t-e;let s=null;for(let t=1;null===s&&t<i;t++)s=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==s)throw new k;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==o)throw new k;let a=null;for(let e=1;null===a&&e<i;e++)a=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==a)throw new k;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new k;return this.centerEdges(l,s,a,o)}throw new k}getBlackPointOnSegment(e,t,n,r){const i=se.round(se.distance(e,t,n,r)),s=(n-e)/i,o=(r-t)/i,a=this.image;for(let l=0;l<i;l++){const n=se.round(e+l*s),r=se.round(t+l*o);if(a.get(n,r))return new ae(n,r)}return null}centerEdges(e,t,n,r){const i=e.getX(),s=e.getY(),o=t.getX(),a=t.getY(),l=n.getX(),c=n.getY(),u=r.getX(),h=r.getY(),d=ue.CORR;return i<this.width/2?[new ae(u-d,h+d),new ae(o+d,a+d),new ae(l-d,c-d),new ae(i+d,s-d)]:[new ae(u+d,h+d),new ae(o+d,a-d),new ae(l-d,c+d),new ae(i-d,s-d)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let s=e;s<=t;s++)if(i.get(s,n))return!0}else for(let s=e;s<=t;s++)if(i.get(n,s))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class he{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const e=Math.floor(t[s]),o=Math.floor(t[s+1]);if(e<-1||e>n||o<-1||o>r)throw new k;i=!1,-1===e?(t[s]=0,i=!0):e===n&&(t[s]=n-1,i=!0),-1===o?(t[s+1]=0,i=!0):o===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const e=Math.floor(t[s]),o=Math.floor(t[s+1]);if(e<-1||e>n||o<-1||o>r)throw new k;i=!1,-1===e?(t[s]=0,i=!0):e===n&&(t[s]=n-1,i=!0),-1===o?(t[s+1]=0,i=!0):o===r&&(t[s+1]=r-1,i=!0)}}}class de{constructor(e,t,n,r,i,s,o,a,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=o,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,g){const m=de.quadrilateralToSquare(e,t,n,r,i,s,o,a);return de.squareToQuadrilateral(l,c,u,h,d,f,p,g).times(m)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let h=0;h<t;h+=2){const t=e[h],d=e[h+1],f=i*t+a*d+u;e[h]=(n*t+s*d+l)/f,e[h+1]=(r*t+o*d+c)/f}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33,h=e.length;for(let d=0;d<h;d++){const h=e[d],f=t[d],p=i*h+a*f+u;e[d]=(n*h+s*f+l)/p,t[d]=(r*h+o*f+c)/p}}static squareToQuadrilateral(e,t,n,r,i,s,o,a){const l=e-n+i-o,c=t-r+s-a;if(0===l&&0===c)return new de(n-e,i-n,e,r-t,s-r,t,0,0,1);{const u=n-i,h=o-i,d=r-s,f=a-s,p=u*f-h*d,g=(l*f-h*c)/p,m=(u*c-l*d)/p;return new de(n-e+g*n,o-e+m*o,e,r-t+g*r,a-t+m*a,t,g,m,1)}}static quadrilateralToSquare(e,t,n,r,i,s,o,a){return de.squareToQuadrilateral(e,t,n,r,i,s,o,a).buildAdjoint()}buildAdjoint(){return new de(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new de(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends he{sampleGrid(e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,g,m,y,v){const w=de.quadrilateralToQuadrilateral(r,i,s,o,a,l,c,u,h,d,f,p,g,m,y,v);return this.sampleGridWithTransform(e,t,n,w)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new k;const i=new N(t,n),s=new Float32Array(2*t);for(let a=0;a<n;a++){const t=s.length,n=a+.5;for(let e=0;e<t;e+=2)s[e]=e/2+.5,s[e+1]=n;r.transformPoints(s),he.checkAndNudgePoints(e,s);try{for(let n=0;n<t;n+=2)e.get(Math.floor(s[n]),Math.floor(s[n+1]))&&i.set(n/2,a)}catch(o){throw new k}}return i}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new fe;class ge{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ce(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new k;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let e=n[(this.shift+s)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach((e,r,i)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(w.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new k}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let l=n-1;l>=0;--l)s[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(s,i)}catch(a){throw new k}let o=0;for(let l=0;l<r;l++)o=(o<<4)+s[l];return o}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,s,1,-1),o=this.getFirstDifferent(n,s,1,1),a=this.getFirstDifferent(r,s,-1,1),l=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,o,a,l))break}t=e,n=o,r=a,i=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;let o=new ae(t.getX()+.5,t.getY()-.5),a=new ae(n.getX()+.5,n.getY()+.5),l=new ae(r.getX()-.5,r.getY()+.5),c=new ae(i.getX()-.5,i.getY()-.5);return this.expandSquare([o,a,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new ue(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(o){let i=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new ge(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,s-7),!1,-1,-1).toResultPoint()}let i=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let o=new ue(this.image,15,i,s).detect();e=o[0],t=o[1],n=o[2],r=o[3]}catch(o){e=this.getFirstDifferent(new ge(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,s-7),!1,-1,-1).toResultPoint()}return i=se.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ge(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=pe.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,l=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,a,a,l,a,l,l,a,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,o=e.getX(),a=e.getY(),l=s*(t.getX()-e.getX())/i,c=s*(t.getY()-e.getY())/i;for(let u=0;u<n;u++)this.image.get(se.round(o+u*l),se.round(a+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new ge(e.getX()-i,e.getY()+i),t=new ge(t.getX()-i,t.getY()-i),n=new ge(n.getX()+i,n.getY()-i),r=new ge(r.getX()+i,r.getY()+i);let s=this.getColor(r,e);if(0===s)return!1;let o=this.getColor(e,t);return o===s&&(o=this.getColor(t,n),o===s&&(o=this.getColor(n,r),o===s))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,o=e.getX(),a=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let h=0;h<c;h++)o+=r,a+=i,this.image.get(se.round(o),se.round(a))!==l&&s++;let u=s/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new ge(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,l=new ae(o+r*i,a+r*s),c=new ae(o-r*i,a-r*s);return i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2,[l,new ae(o+r*i,a+r*s),c,new ae(o-r*i,a-r*s)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=se.round(e.getX()),n=se.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(w.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new me(e.getBlackMatrix()),i=null,s=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=(new ie).decode(e)}catch(c){n=c}if(null==s)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=(new ie).decode(e)}catch(c){if(null!=n)throw n;throw c}let o=new U(s.getText(),s.getRawBytes(),s.getNumBits(),i,z.AZTEC,g.currentTimeMillis()),a=s.getByteSegments();null!=a&&o.putMetadata(K.BYTE_SEGMENTS,a);let l=s.getECLevel();return null!=l&&o.putMetadata(K.ERROR_CORRECTION_LEVEL,l),o}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(E.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class ve extends j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class we{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(E.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata();let s=270;null!==i&&!0===i.get(K.ORIENTATION)&&(s+=i.get(K.ORIENTATION)%360),r.putMetadata(K.ORIENTATION,s);const o=r.getResultPoints();if(null!==o){const e=n.getHeight();for(let t=0;t<o.length;t++)o[t]=new ae(e-o[t].getY()-1,o[t].getX())}return r}throw new k}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new b(n);const s=t&&!0===t.get(E.TRY_HARDER),o=Math.max(1,r>>(s?8:5));let a;a=s?r:15;const l=Math.trunc(r/2);for(let h=0;h<a;h++){const s=Math.trunc((h+1)/2),a=l+o*(0===(1&h)?s:-s);if(a<0||a>=r)break;try{i=e.getBlackRow(a,i)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(E.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(E.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(a,i,t);if(1===e){r.putMetadata(K.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new ae(n-e[0].getX()-1,e[0].getY()),e[1]=new ae(n-e[1].getX()-1,e[1].getY()))}return r}catch(u){}}}throw new k}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const i=e.getSize();if(t>=i)throw new k;let s=!e.get(t),o=0,a=t;for(;a<i;){if(e.get(a)!==s)n[o]++;else{if(++o===r)break;n[o]=1,s=!s}a++}if(o!==r&&(o!==r-1||a!==i))throw new k}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new k;we.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let l=0;l<r;l++)i+=e[l],s+=t[l];if(i<s)return Number.POSITIVE_INFINITY;const o=i/s;n*=o;let a=0;for(let l=0;l<r;l++){const r=e[l],i=t[l]*o,s=r>i?r-i:i-r;if(s>n)return Number.POSITIVE_INFINITY;a+=s}return a/i}}class be extends we{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,o=!1;const a=6;for(let l=n;l<t;l++)if(e.get(l)!==o)i[r]++;else{if(r===a-1){let t=be.MAX_AVG_VARIANCE,n=-1;for(let e=be.CODE_START_A;e<=be.CODE_START_C;e++){const r=we.patternMatchVariance(i,be.CODE_PATTERNS[e],be.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,n]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,o=!o}throw new k}static decodeCode(e,t,n){we.recordPattern(e,n,t);let r=be.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<be.CODE_PATTERNS.length;s++){const e=be.CODE_PATTERNS[s],n=this.patternMatchVariance(t,e,be.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=s)}if(i>=0)return i;throw new k}decodeRow(e,t,n){const r=n&&!0===n.get(E.ASSUME_GS1),i=be.findStartPattern(t),s=i[2];let o=0;const a=new Uint8Array(20);let l;switch(a[o++]=s,s){case be.CODE_START_A:l=be.CODE_CODE_A;break;case be.CODE_START_B:l=be.CODE_CODE_B;break;case be.CODE_START_C:l=be.CODE_CODE_C;break;default:throw new C}let c=!1,u=!1,h="",d=i[0],p=i[1];const g=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,v=s,w=0,b=!0,_=!1,S=!1;for(;!c;){const e=u;switch(u=!1,m=y,y=be.decodeCode(t,g,p),a[o++]=y,y!==be.CODE_STOP&&(b=!0),y!==be.CODE_STOP&&(w++,v+=w*y),d=p,p+=g.reduce((e,t)=>e+t,0),y){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new C}switch(l){case be.CODE_CODE_A:if(y<64)h+=S===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),S=!1;else if(y<96)h+=S===_?String.fromCharCode(y-64):String.fromCharCode(y+64),S=!1;else switch(y!==be.CODE_STOP&&(b=!1),y){case be.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!_&&S?(_=!0,S=!1):_&&S?(_=!1,S=!1):S=!0;break;case be.CODE_SHIFT:u=!0,l=be.CODE_CODE_B;break;case be.CODE_CODE_B:l=be.CODE_CODE_B;break;case be.CODE_CODE_C:l=be.CODE_CODE_C;break;case be.CODE_STOP:c=!0}break;case be.CODE_CODE_B:if(y<96)h+=S===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),S=!1;else switch(y!==be.CODE_STOP&&(b=!1),y){case be.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!_&&S?(_=!0,S=!1):_&&S?(_=!1,S=!1):S=!0;break;case be.CODE_SHIFT:u=!0,l=be.CODE_CODE_A;break;case be.CODE_CODE_A:l=be.CODE_CODE_A;break;case be.CODE_CODE_C:l=be.CODE_CODE_C;break;case be.CODE_STOP:c=!0}break;case be.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==be.CODE_STOP&&(b=!1),y){case be.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case be.CODE_CODE_A:l=be.CODE_CODE_A;break;case be.CODE_CODE_B:l=be.CODE_CODE_B;break;case be.CODE_STOP:c=!0}}e&&(l=l===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const A=p-d;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-d)/2),!1))throw new k;if(v-=w*m,v%103!==m)throw new f;const I=h.length;if(0===I)throw new k;I>0&&b&&(h=l===be.CODE_CODE_C?h.substring(0,I-2):h.substring(0,I-1));const T=(i[1]+i[0])/2,x=d+A/2,N=a.length,R=new Uint8Array(N);for(let f=0;f<N;f++)R[f]=a[f];const D=[new ae(T,e),new ae(x,e)];return new U(h,R,0,D,z.CODE_128,(new Date).getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class _e extends we{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,s,o=_e.findAsteriskPattern(t,r),a=t.getNextSet(o[1]),l=t.getSize();do{_e.recordPattern(t,a,r);let e=_e.toNarrowWidePattern(r);if(e<0)throw new k;i=_e.patternToChar(e),this.decodeRowResult+=i,s=a;for(let t of r)a+=t;a=t.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let f of r)u+=f;if(a!==l&&2*(a-s-u)<u)throw new k;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=_e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==_e.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new k;c=this.extendedMode?_e.decodeExtended(this.decodeRowResult):this.decodeRowResult;let h=(o[1]+o[0])/2,d=s+u/2;return new U(c,null,0,[new ae(h,e),new ae(d,e)],z.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,o=!1,a=t.length;for(let l=r;l<n;l++)if(e.get(l)!==o)t[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(t)===_e.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,o=!o}throw new k}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=2147483647;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let s=0,o=0;for(let a=0;a<n;a++){let i=e[a];i>r&&(o|=1<<n-1-a,t++,s+=i)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=s))return-1}return o}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<_e.CHARACTER_ENCODINGS.length;t++)if(_e.CHARACTER_ENCODINGS[t]===e)return _e.ALPHABET_STRING.charAt(t);if(e===_e.ASTERISK_ENCODING)return"*";throw new k}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),s="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new C;s=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new C;s=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")s=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")s=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")s=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)s="\0";else if("V"===i)s="@";else if("W"===i)s="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new C;s="\x7f"}break;case"/":if(i>="A"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new C;s=":"}}n+=s,r++}else n+=t}return n}}_e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_e.ASTERISK_ENCODING=148;class Ee extends we{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new x;Ee.decodeMiddle(t,r[1],i[0],s);let o=s.toString(),a=null;null!=n&&(a=n.get(E.ALLOWED_LENGTHS)),null==a&&(a=Ee.DEFAULT_ALLOWED_LENGTHS);let l=o.length,c=!1,u=0;for(let d of a){if(l===d){c=!0;break}d>u&&(u=d)}if(!c&&l>u&&(c=!0),!c)throw new C;const h=[new ae(r[1],e),new ae(i[0],e)];return new U(o,null,0,h,z.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),o=new Int32Array(5);for(i.fill(0),s.fill(0),o.fill(0);t<n;){we.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;s[e]=i[t],o[e]=i[t+1]}let n=Ee.decodeDigit(s);r.append(n.toString()),n=this.decodeDigit(o),r.append(n.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=Ee.skipWhiteSpace(e),n=Ee.findGuardPattern(e,t,Ee.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new k}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new k;return n}decodeEnd(e){e.reverse();try{let n,r=Ee.skipWhiteSpace(e);try{n=Ee.findGuardPattern(e,r,Ee.END_PATTERN_REVERSED[0])}catch(t){t instanceof k&&(n=Ee.findGuardPattern(e,r,Ee.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),o=!1,a=0,l=t;i.fill(0);for(let c=t;c<s;c++)if(e.get(c)!==o)i[a]++;else{if(a===r-1){if(we.patternMatchVariance(i,n,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],g.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,o=!o}throw new k}static decodeDigit(e){let t=Ee.MAX_AVG_VARIANCE,n=-1,r=Ee.PATTERNS.length;for(let i=0;i<r;i++){let r=Ee.PATTERNS[i],s=we.patternMatchVariance(e,r,Ee.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=i):s===t&&(n=-1)}if(n>=0)return n%10;throw new k}}Ee.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ee.MAX_AVG_VARIANCE=.38,Ee.MAX_INDIVIDUAL_VARIANCE=.5,Ee.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ee.START_PATTERN=Int32Array.from([1,1,1,1]),Ee.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ce extends we{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]),t=Ce.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=t[0];r=t[1];let o=s-(r-s);o>=0&&(n=e.isRange(o,s,!1))}return t}static checkChecksum(e){return Ce.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ce.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Ce.findGuardPattern(e,t,!1,Ce.START_END_PATTERN,new Int32Array(Ce.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize(),o=0,a=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,c=n;for(let u=t;u<s;u++)if(e.get(u)!==c)i[o]++;else{if(o===l-1){if(we.patternMatchVariance(i,r,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<o-1;t++)i[t]=e[t];i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,c=!c}throw new k}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,o=r.length;for(let a=0;a<o;a++){let e=r[a],n=we.patternMatchVariance(t,e,Ce.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,s=a)}if(s>=0)return s;throw new k}}Ce.MAX_AVG_VARIANCE=.48,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.START_END_PATTERN=Int32Array.from([1,1,1]),Ce.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ce.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ce.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Se{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=Se.parseExtensionString(s),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],l=new U(s,null,0,a,z.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let l=0;l<5&&s<i;l++){let t=Ce.decodeDigit(e,r,s,Ce.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<4-l),4!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new k;let a=this.determineCheckDigit(o);if(Se.extensionChecksum(n.toString())!==a)throw new k;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new k}static parseExtensionString(e){if(5!==e.length)return null;let t=Se.parseExtension5String(e);return null==t?null:new Map([[K.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ae{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=Ae.parseExtensionString(s),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],l=new U(s,null,0,a,z.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<2&&s<i;a++){let t=Ce.decodeDigit(e,r,s,Ce.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<1-a),1!==a&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new k;if(parseInt(n.toString())%4!==o)throw new k;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[K.ISSUE_NUMBER,parseInt(e)]])}}class Ie{static decodeRow(e,t,n){let r=Ce.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Se).decodeRow(e,t,r)}catch(i){return(new Ae).decodeRow(e,t,r)}}}Ie.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Te extends Ce{constructor(){super(),this.decodeRowStringBuffer="",Te.L_AND_G_PATTERNS=Te.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Te.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];Te.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Te.findStartGuardPattern(t),i=null==n?null:n.get(E.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new ae((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),o=s.rowOffset,a=s.resultString;if(null!=i){const t=new ae(o,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,o);if(null!=i){const t=new ae((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new k;let h=a.toString();if(h.length<8)throw new C;if(!Te.checkChecksum(h))throw new f;let d=(r[1]+r[0])/2,p=(l[1]+l[0])/2,g=this.getBarcodeFormat(),m=[new ae(d,e),new ae(p,e)],y=new U(h,null,0,m,g,(new Date).getTime()),v=0;try{let n=Ie.decodeRow(e,t,l[1]);y.putMetadata(K.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),v=n.getText().length}catch(b){}let w=null==n?null:n.get(E.ALLOWED_EAN_EXTENSIONS);if(null!=w){let e=!1;for(let t in w)if(v.toString()===t){e=!0;break}if(!e)throw new k}return y}decodeEnd(e,t){return Te.findGuardPattern(e,t,!1,Te.START_END_PATTERN,new Int32Array(Te.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Te.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Te.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}return(1e3-n)%10}}class xe extends Te{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<6&&s<i;a++){let t=Te.decodeDigit(e,r,s,Te.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<5-a)}n=xe.determineFirstDigit(n,o),s=Te.findGuardPattern(e,s,!0,Te.MIDDLE_PATTERN,new Int32Array(Te.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&s<i;a++){let t=Te.decodeDigit(e,r,s,Te.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return z.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new k}}xe.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ne extends Te{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let o=0;o<4&&s<i;o++){let t=Te.decodeDigit(e,r,s,Te.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}s=Te.findGuardPattern(e,s,!0,Te.MIDDLE_PATTERN,new Int32Array(Te.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<4&&s<i;o++){let t=Te.decodeDigit(e,r,s,Te.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return z.EAN_8}}class ke extends Te{constructor(){super(...arguments),this.ean13Reader=new xe}getBarcodeFormat(){return z.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new U(t.substring(1),null,null,e.getResultPoints(),z.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new k}reset(){this.ean13Reader.reset()}}class Re extends Te{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],o=0;for(let a=0;a<6&&s<i;a++){const t=Re.decodeDigit(e,r,s,Re.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)s+=e;t>=10&&(o|=1<<5-a)}return{rowOffset:s,resultString:Re.determineNumSysAndCheckDigit(n,o)}}decodeEnd(e,t){return Re.findGuardPatternWithoutCounters(e,t,!0,Re.MIDDLE_END_PATTERN)}checkChecksum(e){return Te.checkChecksum(Re.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw k.getNotFoundInstance()}getBarcodeFormat(){return z.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new x;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Re.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Re.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class De extends we{constructor(e){super();let n=null==e?null:e.get(E.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new xe),r.push(new ke),r.push(new Ne),r.push(new Re)):(n.indexOf(z.EAN_13)>-1&&r.push(new xe),n.indexOf(z.UPC_A)>-1&&r.push(new ke),n.indexOf(z.EAN_8)>-1&&r.push(new Ne),n.indexOf(z.UPC_E)>-1&&r.push(new Re)),this.readers=r}decodeRow(e,t,n){for(let i of this.readers)try{const r=i.decodeRow(e,t,n),s=r.getBarcodeFormat()===z.EAN_13&&"0"===r.getText().charAt(0),o=null==n?null:n.get(E.POSSIBLE_FORMATS),a=null==o||o.includes(z.UPC_A);if(s&&a){const e=r.getRawBytes(),t=new U(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),z.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new k}reset(){for(let e of this.readers)e.reset()}}class Me extends we{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(we.patternMatchVariance(e,t[n],Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return n;throw new k}static count(e){return se.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=Me.MIN_FINDER_PATTERN_RATIO&&n<=Me.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}Me.MAX_AVG_VARIANCE=.2,Me.MAX_INDIVIDUAL_VARIANCE=.45,Me.MIN_FINDER_PATTERN_RATIO=9.5/12,Me.MAX_FINDER_PATTERN_RATIO=12.5/14;class Oe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pe{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ae(n,i)),this.resultPoints.push(new ae(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Pe))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Le{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let a of e)r+=a;let i=0,s=0,o=e.length;for(let a=0;a<o-1;a++){let l;for(l=1,s|=1<<a;l<e[a];l++,s&=~(1<<a)){let e=Le.combins(r-l-1,o-a-2);if(n&&0===s&&r-l-(o-a-1)>=o-a-1&&(e-=Le.combins(r-l-(o-a),o-a-2)),o-a-1>1){let n=0;for(let e=r-l-(o-a-2);e>t;e--)n+=Le.combins(r-l-e-1,o-a-3);e-=n*(o-1-a)}else r-l>t&&e--;i+=e}r-=l}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let o=e;o>n;o--)i*=o,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class Fe{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new b(12*t),r=0,i=e[0].getRightChar().getValue();for(let s=11;s>=0;--s)0!=(i&1<<s)&&n.set(r),r++;for(let s=1;s<e.length;++s){let t=e[s],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class Be{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class je{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ue extends je{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ue.FNC1}}Ue.FNC1="$";class Ve extends je{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ze extends je{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new C;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ze.FNC1}isSecondDigitFNC1(){return this.secondDigit===ze.FNC1}isAnyFNC1(){return this.firstDigit===ze.FNC1||this.secondDigit===ze.FNC1}}ze.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new k;let t=e.substring(0,2);for(let i of He.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,i[2],e):He.processFixedAI(2,i[1],e);if(e.length<3)throw new k;let n=e.substring(0,3);for(let i of He.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,i[2],e):He.processFixedAI(3,i[1],e);for(let i of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);if(e.length<4)throw new k;let r=e.substring(0,4);for(let i of He.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);throw new k}static processFixedAI(e,t,n){if(n.length<e)throw new k;let r=n.substring(0,e);if(n.length<e+t)throw new k;let i=n.substring(e,e+t),s=n.substring(e+t),o="("+r+")"+i,a=He.parseFieldsInGeneralPurpose(s);return null==a?o:o+a}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let s=n.substring(e,r),o=n.substring(r),a="("+i+")"+s,l=He.parseFieldsInGeneralPurpose(o);return null==l?a:a+l}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class We{constructor(e){this.buffer=new x,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=He.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new ze(this.information.getSize(),0===t?ze.FNC1:t-1,ze.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new ze(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return We.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ve(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ve(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new Ve(this.current.getPosition(),this.buffer.toString()):new Ve(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Be(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Be(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Be(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Be(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ue(e+7,""+(r+1));if(r>=90&&r<116)return new Ue(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new C}return new Ue(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ue(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new Ue(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ge{constructor(e){this.information=e,this.generalDecoder=new We(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class qe extends Ge{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}qe.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),e.append(n)}}qe.GTIN_SIZE=40;class Ye extends qe{constructor(e){super(e)}parseInformation(){let e=new x;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ye.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Ye.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Ye.HEADER_SIZE+44)}}Ye.HEADER_SIZE=4;class Xe extends Ge{constructor(e){super(e)}parseInformation(){let e=new x;return this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE)}}Xe.HEADER_SIZE=5;class Ke extends qe{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let o=0;o<5;++o)i/s===0&&e.append("0"),s/=10;e.append(i)}}class Qe extends Ke{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Qe.HEADER_SIZE+Ke.GTIN_SIZE+Qe.WEIGHT_SIZE)throw new k;let e=new x;return this.encodeCompressedGtin(e,Qe.HEADER_SIZE),this.encodeCompressedWeight(e,Qe.HEADER_SIZE+Ke.GTIN_SIZE,Qe.WEIGHT_SIZE),e.toString()}}Qe.HEADER_SIZE=5,Qe.WEIGHT_SIZE=15;class Ze extends Qe{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Je extends Qe{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class $e extends qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$e.HEADER_SIZE+qe.GTIN_SIZE)throw new k;let e=new x;this.encodeCompressedGtin(e,$e.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+qe.GTIN_SIZE,$e.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField($e.HEADER_SIZE+qe.GTIN_SIZE+$e.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}$e.HEADER_SIZE=8,$e.LAST_DIGIT_SIZE=2;class et extends qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+qe.GTIN_SIZE)throw new k;let e=new x;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+qe.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+qe.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+qe.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Ke{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new k;let e=new x;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Ye(e);if(!e.get(2))return new Xe(e);switch(We.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ze(e);case 5:return new Je(e)}switch(We.extractNumericValueFromBitArray(e,1,5)){case 12:return new $e(e);case 13:return new et(e)}switch(We.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class st extends Me{constructor(e){super(...arguments),this.pairs=new Array(st.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return st.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,st.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof k){if(!this.pairs.length)throw new k;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new k}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!st.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new k}static isValidSequence(e){for(let t of st.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||st.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Fe.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new U(t,null,null,i,z.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let s=1;s<this.pairs.size();++s){let e=this.pairs.get(s);r+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i=t.length%2==0;this.startFromEven&&(i=!i);let s=!0,o=-1;do{this.findNextPair(e,t,o),r=this.parseFoundFinderPattern(e,n,i),null==r?o=st.getNextSecondBar(e,this.startEnd[0]):s=!1}while(s);let a,l=this.decodeDataCharacter(e,r,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new k;try{a=this.decodeDataCharacter(e,r,i,!1)}catch(c){a=null,this.verbose&&console.log(c)}return new rt(l,a,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,s=e.getSize();i=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let o=t.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;i<s&&(a=!e.get(i),a);)i++;let l=0,c=i;for(let u=i;u<s;u++)if(e.get(u)!=a)r[l]++;else{if(3==l){if(o&&st.reverseCounters(r),st.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);o&&st.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,a=!a}throw new k}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let o,a=this.getDecodeFinderCounters();g.arraycopy(a,0,a,1,a.length-1),a[0]=r;try{o=this.parseFinderValue(a,st.FINDER_PATTERNS)}catch(l){return null}return new Pe(o,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let S=0;S<i.length;S++)i[S]=0;if(r)st.recordPatternInReverse(e,t.getStartEnd()[0],i);else{st.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let s=17,o=se.sum(new Int32Array(i))/s,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(o-a)/a>.3)throw new k;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let S=0;S<i.length;S++){let e=1*i[S]/o,t=e+.5;if(t<1){if(e<.3)throw new k;t=1}else if(t>8){if(e>8.7)throw new k;t=8}let n=S/2;0==(1&S)?(l[n]=t,u[n]=e-t):(c[n]=t,h[n]=e-t)}this.adjustOddEvenCounts(s);let d=4*t.getValue()+(n?0:2)+(r?0:1)-1,f=0,p=0;for(let S=l.length-1;S>=0;S--){if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[d][2*S];p+=l[S]*e}f+=l[S]}let g=0;for(let S=c.length-1;S>=0;S--)if(st.isNotA1left(t,n,r)){let e=st.WEIGHTS[d][2*S+1];g+=c[S]*e}let m=p+g;if(0!=(1&f)||f>13||f<4)throw new k;let y=(13-f)/2,v=st.SYMBOL_WIDEST[y],w=9-v,b=Le.getRSSvalue(l,v,!0),_=Le.getRSSvalue(c,w,!1),E=st.EVEN_TOTAL_SUBSET[y],C=st.GSUM[y];return new Oe(b*E+_+C,m)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=se.sum(new Int32Array(this.getOddCounts())),n=se.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);let a=t+n-e,l=1==(1&t),c=0==(1&n);if(1==a)if(l){if(c)throw new k;i=!0}else{if(!c)throw new k;o=!0}else if(-1==a)if(l){if(c)throw new k;r=!0}else{if(!c)throw new k;s=!0}else{if(0!=a)throw new k;if(l){if(!c)throw new k;t<n?(r=!0,o=!0):(i=!0,s=!0)}else if(c)throw new k}if(r){if(i)throw new k;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(o)throw new k;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.SYMBOL_WIDEST=[7,5,4,3,1],st.EVEN_TOTAL_SUBSET=[4,20,52,104,204],st.GSUM=[0,348,1388,2948,3988],st.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],st.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],st.FINDER_PAT_A=0,st.FINDER_PAT_B=1,st.FINDER_PAT_C=2,st.FINDER_PAT_D=3,st.FINDER_PAT_E=4,st.FINDER_PAT_F=5,st.FINDER_PATTERN_SEQUENCES=[[st.FINDER_PAT_A,st.FINDER_PAT_A],[st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B],[st.FINDER_PAT_A,st.FINDER_PAT_C,st.FINDER_PAT_B,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_C],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F]],st.MAX_PAIRS=11;class ot extends Oe{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class at extends Me{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);at.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);at.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&at.checkChecksum(s,e))return at.constructResult(s,e);throw new k}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new x;for(let l=13-r.length;l>0;l--)i.append("0");i.append(r);let s=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);s+=0===(1&l)?3*e:e}s=10-s%10,10===s&&(s=0),i.append(s.toString());let o=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new U(i.toString(),null,0,[o[0],o[1],a[0],a[1]],z.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),o=null==r?null:r.get(E.NEED_RESULT_POINT_CALLBACK);if(null!=o){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),o.foundPossibleResultPoint(new ae(r,n))}let a=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new ot(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(i){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let g=0;g<r.length;g++)r[g]=0;if(n)we.recordPatternInReverse(e,t.getStartEnd()[0],r);else{we.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,s=se.sum(new Int32Array(r))/i,o=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let g=0;g<r.length;g++){let e=r[g]/s,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(g/2);0===(1&g)?(o[n]=t,l[n]=e-t):(a[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,i);let u=0,h=0;for(let g=o.length-1;g>=0;g--)h*=9,h+=o[g],u+=o[g];let d=0,f=0;for(let g=a.length-1;g>=0;g--)d*=9,d+=a[g],f+=a[g];let p=h+3*d;if(n){if(0!==(1&u)||u>12||u<4)throw new k;let e=(12-u)/2,t=at.OUTSIDE_ODD_WIDEST[e],n=9-t,r=Le.getRSSvalue(o,t,!1),i=Le.getRSSvalue(a,n,!0),s=at.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=at.OUTSIDE_GSUM[e];return new Oe(r*s+i+l,p)}{if(0!==(1&f)||f>10||f<4)throw new k;let e=(10-f)/2,t=at.INSIDE_ODD_WIDEST[e],n=9-t,r=Le.getRSSvalue(o,t,!0),i=Le.getRSSvalue(a,n,!1),s=at.INSIDE_ODD_TOTAL_SUBSET[e],l=at.INSIDE_GSUM[e];return new Oe(i*s+r+l,p)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let o=0,a=s;for(let l=s;l<r;l++)if(e.get(l)!==i)n[o]++;else{if(3===o){if(Me.isFinderPattern(n))return[a,l];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,i=!i}throw new k}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const o=r[0]-s,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);g.arraycopy(a,0,l,1,a.length-1),l[0]=o;const c=this.parseFinderValue(l,at.FINDER_PATTERNS);let u=s,h=r[1];return n&&(u=e.getSize()-1-u,h=e.getSize()-1-h),new Pe(c,[s,r[1]],u,h,t)}adjustOddEvenCounts(e,t){let n=se.sum(new Int32Array(this.getOddCounts())),r=se.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,o=!1,a=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(o=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(o=!0));let l=n+r-t,c=(1&n)===(e?1:0),u=1===(1&r);if(1===l)if(c){if(u)throw new k;s=!0}else{if(!u)throw new k;a=!0}else if(-1===l)if(c){if(u)throw new k;i=!0}else{if(!u)throw new k;o=!0}else{if(0!==l)throw new k;if(c){if(!u)throw new k;n<r?(i=!0,a=!0):(s=!0,o=!0)}else if(u)throw new k}if(i){if(s)throw new k;Me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new k;Me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],at.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],at.OUTSIDE_GSUM=[0,161,961,2015,2715],at.INSIDE_GSUM=[0,336,1036,1516],at.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],at.INSIDE_ODD_WIDEST=[2,4,6,8],at.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends we{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(E.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(E.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(z.EAN_13)||n.includes(z.UPC_A)||n.includes(z.EAN_8)||n.includes(z.UPC_E))&&this.readers.push(new De(e)),n.includes(z.CODE_39)&&this.readers.push(new _e(r)),n.includes(z.CODE_128)&&this.readers.push(new be),n.includes(z.ITF)&&this.readers.push(new Ee),n.includes(z.RSS_14)&&this.readers.push(new at),n.includes(z.RSS_EXPANDED)&&this.readers.push(new st(this.verbose))):(this.readers.push(new De(e)),this.readers.push(new _e),this.readers.push(new De(e)),this.readers.push(new be),this.readers.push(new Ee),this.readers.push(new at),this.readers.push(new st(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch(r){}throw new k}reset(){this.readers.forEach(e=>e.reset())}}class ct extends j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ht{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dt{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let o=0;const a=s.getECCodewords(),l=s.getECBlocks();for(let c of l)o+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new C;for(let n of dt.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new C}toString(){return""+this.versionNumber}static buildVersions(){return[new dt(1,10,10,8,8,new ut(5,new ht(1,3))),new dt(2,12,12,10,10,new ut(7,new ht(1,5))),new dt(3,14,14,12,12,new ut(10,new ht(1,8))),new dt(4,16,16,14,14,new ut(12,new ht(1,12))),new dt(5,18,18,16,16,new ut(14,new ht(1,18))),new dt(6,20,20,18,18,new ut(18,new ht(1,22))),new dt(7,22,22,20,20,new ut(20,new ht(1,30))),new dt(8,24,24,22,22,new ut(24,new ht(1,36))),new dt(9,26,26,24,24,new ut(28,new ht(1,44))),new dt(10,32,32,14,14,new ut(36,new ht(1,62))),new dt(11,36,36,16,16,new ut(42,new ht(1,86))),new dt(12,40,40,18,18,new ut(48,new ht(1,114))),new dt(13,44,44,20,20,new ut(56,new ht(1,144))),new dt(14,48,48,22,22,new ut(68,new ht(1,174))),new dt(15,52,52,24,24,new ut(42,new ht(2,102))),new dt(16,64,64,14,14,new ut(56,new ht(2,140))),new dt(17,72,72,16,16,new ut(36,new ht(4,92))),new dt(18,80,80,18,18,new ut(48,new ht(4,114))),new dt(19,88,88,20,20,new ut(56,new ht(4,144))),new dt(20,96,96,22,22,new ut(68,new ht(4,174))),new dt(21,104,104,24,24,new ut(56,new ht(6,136))),new dt(22,120,120,18,18,new ut(68,new ht(6,175))),new dt(23,132,132,20,20,new ut(62,new ht(8,163))),new dt(24,144,144,22,22,new ut(62,new ht(8,156),new ht(2,155))),new dt(25,8,18,6,16,new ut(7,new ht(1,5))),new dt(26,8,32,6,14,new ut(11,new ht(1,10))),new dt(27,12,26,10,24,new ut(14,new ht(1,16))),new dt(28,12,36,10,16,new ut(18,new ht(1,22))),new dt(29,16,36,14,16,new ut(24,new ht(1,32))),new dt(30,16,48,14,22,new ut(28,new ht(1,49)))]}}dt.VERSIONS=dt.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new C;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new N(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return dt.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let o=!1,a=!1,l=!1,c=!1;do{if(n!==i||0!==r||o)if(n!==i-2||0!==r||0===(3&s)||a)if(n!==i+4||2!==r||0!==(7&s)||l)if(n!==i-2||0!==r||4!==(7&s)||c){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n-=2,r+=2}while(n>=0&&r<s);n+=1,r+=3;do{n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,s),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(i,s),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(i,s),n-=2,r+=2,a=!0;else e[t++]=255&this.readCorner1(i,s),n-=2,r+=2,o=!0}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new C;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new h("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,o=n/i|0,a=new N(o*i,s*r);for(let l=0;l<s;++l){const t=l*r;for(let n=0;n<o;++n){const s=n*i;for(let o=0;o<r;++o){const c=l*(r+2)+1+o,u=t+o;for(let t=0;t<i;++t){const r=n*(i+2)+1+t;if(e.get(r,c)){const e=s+t;a.set(e,u)}}}}}return a}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let h of i)r+=h.getCount();const s=new Array(r);let o=0;for(let h of i)for(let e=0;e<h.getCount();e++){const e=h.getDataCodewords(),t=n.getECCodewords()+e;s[o++]=new pt(e,new Uint8Array(t))}const a=s[0].codewords.length-n.getECCodewords(),l=a-1;let c=0;for(let h=0;h<l;h++)for(let t=0;t<o;t++)s[t].codewords[h]=e[c++];const u=24===t.getVersionNumber(),d=u?8:o;for(let h=0;h<d;h++)s[h].codewords[a-1]=e[c++];const f=s[0].codewords.length;for(let h=a;h<f;h++)for(let t=0;t<o;t++){const n=u?(t+8)%o:t,r=u&&n>7?h-1:h;s[n].codewords[r]=e[c++]}if(c!==e.length)throw new h;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new h(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,o=e<s?e:s,a=s-o,l=255>>8-o<<a;t=(i[r]&l)>>a,e-=o,n+=o,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const s=8-e,o=255>>s<<s;t=t<<e|(i[r]&o)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(W||(W={}));class mt{static decode(e){const t=new gt(e),n=new x,r=new x,i=new Array;let s=W.ASCII_ENCODE;do{if(s===W.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case W.C40_ENCODE:this.decodeC40Segment(t,n);break;case W.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case W.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case W.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case W.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new C}s=W.ASCII_ENCODE}}while(s!==W.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Q(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new C;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),W.ASCII_ENCODE;if(129===i)return W.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return W.C40_ENCODE;case 231:return W.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return W.ANSIX12_ENCODE;case 239:return W.TEXT_ENCODE;case 240:return W.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new C}}while(e.available()>0);return W.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new C;{const e=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new C}i=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),i=0;break;default:throw new C}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){const s=r[e];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new C;{const e=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new C}i=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new C;{const e=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}break;default:throw new C}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new C;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(s=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new C;const o=new Uint8Array(s);for(let l=0;l<s;l++){if(e.available()<8)throw new C;o[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(o);try{t.append(I.decode(o,T.ISO88591))}catch(a){throw new ne("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),n=t.getVersion(),r=t.readCodewords(),i=pt.getDataBlocks(r,n);let s=0;for(let l of i)s+=l.getNumDataCodewords();const o=new Uint8Array(s),a=i.length;for(let l=0;l<a;l++){const e=i[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)o[r*a+l]=t[r]}return mt.decode(o)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class vt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new k;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let o=this.transitionsBetween(n,s)+1,a=this.transitionsBetween(i,s)+1;1===(1&o)&&(o+=1),1===(1&a)&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a));let l=vt.sampleGrid(this.image,n,r,i,s,o,a);return new le(l,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new ae(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new ae(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),o=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,t),c=s,u=[i,t,n,r];return c>o&&(c=o,u[0]=t,u[1]=n,u[2]=r,u[3]=i),c>a&&(c=a,u[0]=n,u[1]=r,u[2]=i,u[3]=t),c>l&&(u[0]=r,u[1]=i,u[2]=t,u[3]=n),u}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=vt.shiftPoint(n,r,4*(s+1)),a=vt.shiftPoint(r,n,4*(s+1));return this.transitionsBetween(o,t)<this.transitionsBetween(a,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=this.transitionsBetween(n,i),a=vt.shiftPoint(t,n,4*(o+1)),l=vt.shiftPoint(r,n,4*(s+1));s=this.transitionsBetween(a,i),o=this.transitionsBetween(l,i);let c=new ae(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),u=new ae(i.getX()+(t.getX()-n.getX())/(o+1),i.getY()+(t.getY()-n.getY())/(o+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(a,c)+this.transitionsBetween(l,c)>this.transitionsBetween(a,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,o=this.transitionsBetween(r,i)+1,a=vt.shiftPoint(t,n,4*o),l=vt.shiftPoint(r,n,4*s);s=this.transitionsBetween(a,i)+1,o=this.transitionsBetween(l,i)+1,1===(1&s)&&(s+=1),1===(1&o)&&(o+=1);let c,u,h=(t.getX()+n.getX()+r.getX()+i.getX())/4,d=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=vt.moveAway(t,h,d),n=vt.moveAway(n,h,d),r=vt.moveAway(r,h,d),i=vt.moveAway(i,h,d),a=vt.shiftPoint(t,n,4*o),a=vt.shiftPoint(a,i,4*s),c=vt.shiftPoint(n,t,4*o),c=vt.shiftPoint(c,r,4*s),l=vt.shiftPoint(r,i,4*o),l=vt.shiftPoint(l,n,4*s),u=vt.shiftPoint(i,r,4*o),u=vt.shiftPoint(u,t,4*s),[a,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,o){return pe.getInstance().sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-r)>Math.abs(i-n);if(o){let e=n;n=r,r=e,e=i,i=s,s=e}let a=Math.abs(i-n),l=Math.abs(s-r),c=-a/2,u=r<s?1:-1,h=n<i?1:-1,d=0,f=this.image.get(o?r:n,o?n:r);for(let p=n,g=r;p!==i;p+=h){let e=this.image.get(o?g:p,o?p:g);if(e!==f&&(d++,f=e),c+=l,c>0){if(g===s)break;g+=u,c-=a}}return d}}class wt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(E.PURE_BARCODE)){const r=wt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=wt.NO_POINTS}else{const r=new vt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const i=t.getRawBytes(),s=new U(t.getText(),i,8*i.length,n,z.DATA_MATRIX,g.currentTimeMillis()),o=t.getByteSegments();null!=o&&s.putMetadata(K.BYTE_SEGMENTS,o);const a=t.getECLevel();return null!=a&&s.putMetadata(K.ERROR_CORRECTION_LEVEL,a),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new k;const r=this.moduleSize(t,e);let i=t[1];const s=n[1];let o=t[0];const a=(n[0]-o+1)/r,l=(s-i+1)/r;if(a<=0||l<=0)throw new k;const c=r/2;i+=c,o+=c;const u=new N(a,l);for(let h=0;h<l;h++){const t=i+h*r;for(let n=0;n<a;n++)e.get(o+n*r,t)&&u.set(n,h)}return u}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new k;const s=r-e[0];if(0===s)throw new k;return s}}wt.NO_POINTS=[];class bt extends j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new wt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(G||(G={}));class _t{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,_t.FOR_BITS.set(n,this),_t.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return _t.L;case"M":return _t.M;case"Q":return _t.Q;case"H":return _t.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=_t.FOR_BITS.size)throw new h;return _t.FOR_BITS.get(e)}}_t.FOR_BITS=new Map,_t.FOR_VALUE=new Map,_t.L=new _t(G.L,"L",1),_t.M=new _t(G.M,"M",0),_t.Q=new _t(G.Q,"Q",3),_t.H=new _t(G.H,"H",2);class Et{constructor(e){this.errorCorrectionLevel=_t.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return w.bitCount(e^t)}static decodeFormatInformation(e,t){const n=Et.doDecodeFormatInformation(e,t);return null!==n?n:Et.doDecodeFormatInformation(e^Et.FORMAT_INFO_MASK_QR,t^Et.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of Et.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new Et(i[1]);let o=Et.numBitsDiffering(e,s);o<n&&(r=i[1],n=o),e!==t&&(o=Et.numBitsDiffering(t,s),o<n&&(r=i[1],n=o))}return n<=3?new Et(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Et))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Et.FORMAT_INFO_MASK_QR=21522,Et.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ct{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class St{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.ecBlocks=r;let s=0;const o=r[0].getECCodewordsPerBlock(),a=r[0].getECBlocks();for(const l of a)s+=l.getCount()*(l.getDataCodewords()+o);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new C;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new C}}static getVersionForNumber(e){if(e<1||e>40)throw new h;return At.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<At.VERSION_DECODE_INFO.length;r++){const i=At.VERSION_DECODE_INFO[r];if(i===e)return At.getVersionForNumber(r+7);const s=Et.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?At.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new N(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new Ct(7,new St(1,19)),new Ct(10,new St(1,16)),new Ct(13,new St(1,13)),new Ct(17,new St(1,9))),new At(2,Int32Array.from([6,18]),new Ct(10,new St(1,34)),new Ct(16,new St(1,28)),new Ct(22,new St(1,22)),new Ct(28,new St(1,16))),new At(3,Int32Array.from([6,22]),new Ct(15,new St(1,55)),new Ct(26,new St(1,44)),new Ct(18,new St(2,17)),new Ct(22,new St(2,13))),new At(4,Int32Array.from([6,26]),new Ct(20,new St(1,80)),new Ct(18,new St(2,32)),new Ct(26,new St(2,24)),new Ct(16,new St(4,9))),new At(5,Int32Array.from([6,30]),new Ct(26,new St(1,108)),new Ct(24,new St(2,43)),new Ct(18,new St(2,15),new St(2,16)),new Ct(22,new St(2,11),new St(2,12))),new At(6,Int32Array.from([6,34]),new Ct(18,new St(2,68)),new Ct(16,new St(4,27)),new Ct(24,new St(4,19)),new Ct(28,new St(4,15))),new At(7,Int32Array.from([6,22,38]),new Ct(20,new St(2,78)),new Ct(18,new St(4,31)),new Ct(18,new St(2,14),new St(4,15)),new Ct(26,new St(4,13),new St(1,14))),new At(8,Int32Array.from([6,24,42]),new Ct(24,new St(2,97)),new Ct(22,new St(2,38),new St(2,39)),new Ct(22,new St(4,18),new St(2,19)),new Ct(26,new St(4,14),new St(2,15))),new At(9,Int32Array.from([6,26,46]),new Ct(30,new St(2,116)),new Ct(22,new St(3,36),new St(2,37)),new Ct(20,new St(4,16),new St(4,17)),new Ct(24,new St(4,12),new St(4,13))),new At(10,Int32Array.from([6,28,50]),new Ct(18,new St(2,68),new St(2,69)),new Ct(26,new St(4,43),new St(1,44)),new Ct(24,new St(6,19),new St(2,20)),new Ct(28,new St(6,15),new St(2,16))),new At(11,Int32Array.from([6,30,54]),new Ct(20,new St(4,81)),new Ct(30,new St(1,50),new St(4,51)),new Ct(28,new St(4,22),new St(4,23)),new Ct(24,new St(3,12),new St(8,13))),new At(12,Int32Array.from([6,32,58]),new Ct(24,new St(2,92),new St(2,93)),new Ct(22,new St(6,36),new St(2,37)),new Ct(26,new St(4,20),new St(6,21)),new Ct(28,new St(7,14),new St(4,15))),new At(13,Int32Array.from([6,34,62]),new Ct(26,new St(4,107)),new Ct(22,new St(8,37),new St(1,38)),new Ct(24,new St(8,20),new St(4,21)),new Ct(22,new St(12,11),new St(4,12))),new At(14,Int32Array.from([6,26,46,66]),new Ct(30,new St(3,115),new St(1,116)),new Ct(24,new St(4,40),new St(5,41)),new Ct(20,new St(11,16),new St(5,17)),new Ct(24,new St(11,12),new St(5,13))),new At(15,Int32Array.from([6,26,48,70]),new Ct(22,new St(5,87),new St(1,88)),new Ct(24,new St(5,41),new St(5,42)),new Ct(30,new St(5,24),new St(7,25)),new Ct(24,new St(11,12),new St(7,13))),new At(16,Int32Array.from([6,26,50,74]),new Ct(24,new St(5,98),new St(1,99)),new Ct(28,new St(7,45),new St(3,46)),new Ct(24,new St(15,19),new St(2,20)),new Ct(30,new St(3,15),new St(13,16))),new At(17,Int32Array.from([6,30,54,78]),new Ct(28,new St(1,107),new St(5,108)),new Ct(28,new St(10,46),new St(1,47)),new Ct(28,new St(1,22),new St(15,23)),new Ct(28,new St(2,14),new St(17,15))),new At(18,Int32Array.from([6,30,56,82]),new Ct(30,new St(5,120),new St(1,121)),new Ct(26,new St(9,43),new St(4,44)),new Ct(28,new St(17,22),new St(1,23)),new Ct(28,new St(2,14),new St(19,15))),new At(19,Int32Array.from([6,30,58,86]),new Ct(28,new St(3,113),new St(4,114)),new Ct(26,new St(3,44),new St(11,45)),new Ct(26,new St(17,21),new St(4,22)),new Ct(26,new St(9,13),new St(16,14))),new At(20,Int32Array.from([6,34,62,90]),new Ct(28,new St(3,107),new St(5,108)),new Ct(26,new St(3,41),new St(13,42)),new Ct(30,new St(15,24),new St(5,25)),new Ct(28,new St(15,15),new St(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new Ct(28,new St(4,116),new St(4,117)),new Ct(26,new St(17,42)),new Ct(28,new St(17,22),new St(6,23)),new Ct(30,new St(19,16),new St(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new Ct(28,new St(2,111),new St(7,112)),new Ct(28,new St(17,46)),new Ct(30,new St(7,24),new St(16,25)),new Ct(24,new St(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new Ct(30,new St(4,121),new St(5,122)),new Ct(28,new St(4,47),new St(14,48)),new Ct(30,new St(11,24),new St(14,25)),new Ct(30,new St(16,15),new St(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new Ct(30,new St(6,117),new St(4,118)),new Ct(28,new St(6,45),new St(14,46)),new Ct(30,new St(11,24),new St(16,25)),new Ct(30,new St(30,16),new St(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new Ct(26,new St(8,106),new St(4,107)),new Ct(28,new St(8,47),new St(13,48)),new Ct(30,new St(7,24),new St(22,25)),new Ct(30,new St(22,15),new St(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new Ct(28,new St(10,114),new St(2,115)),new Ct(28,new St(19,46),new St(4,47)),new Ct(28,new St(28,22),new St(6,23)),new Ct(30,new St(33,16),new St(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new Ct(30,new St(8,122),new St(4,123)),new Ct(28,new St(22,45),new St(3,46)),new Ct(30,new St(8,23),new St(26,24)),new Ct(30,new St(12,15),new St(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new Ct(30,new St(3,117),new St(10,118)),new Ct(28,new St(3,45),new St(23,46)),new Ct(30,new St(4,24),new St(31,25)),new Ct(30,new St(11,15),new St(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new Ct(30,new St(7,116),new St(7,117)),new Ct(28,new St(21,45),new St(7,46)),new Ct(30,new St(1,23),new St(37,24)),new Ct(30,new St(19,15),new St(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new Ct(30,new St(5,115),new St(10,116)),new Ct(28,new St(19,47),new St(10,48)),new Ct(30,new St(15,24),new St(25,25)),new Ct(30,new St(23,15),new St(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new Ct(30,new St(13,115),new St(3,116)),new Ct(28,new St(2,46),new St(29,47)),new Ct(30,new St(42,24),new St(1,25)),new Ct(30,new St(23,15),new St(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new Ct(30,new St(17,115)),new Ct(28,new St(10,46),new St(23,47)),new Ct(30,new St(10,24),new St(35,25)),new Ct(30,new St(19,15),new St(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new Ct(30,new St(17,115),new St(1,116)),new Ct(28,new St(14,46),new St(21,47)),new Ct(30,new St(29,24),new St(19,25)),new Ct(30,new St(11,15),new St(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new Ct(30,new St(13,115),new St(6,116)),new Ct(28,new St(14,46),new St(23,47)),new Ct(30,new St(44,24),new St(7,25)),new Ct(30,new St(59,16),new St(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new Ct(30,new St(12,121),new St(7,122)),new Ct(28,new St(12,47),new St(26,48)),new Ct(30,new St(39,24),new St(14,25)),new Ct(30,new St(22,15),new St(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new Ct(30,new St(6,121),new St(14,122)),new Ct(28,new St(6,47),new St(34,48)),new Ct(30,new St(46,24),new St(10,25)),new Ct(30,new St(2,15),new St(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new Ct(30,new St(17,122),new St(4,123)),new Ct(28,new St(29,46),new St(14,47)),new Ct(30,new St(49,24),new St(10,25)),new Ct(30,new St(24,15),new St(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new Ct(30,new St(4,122),new St(18,123)),new Ct(28,new St(13,46),new St(32,47)),new Ct(30,new St(48,24),new St(14,25)),new Ct(30,new St(42,15),new St(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new Ct(30,new St(20,117),new St(4,118)),new Ct(28,new St(40,47),new St(7,48)),new Ct(30,new St(43,24),new St(22,25)),new Ct(30,new St(10,15),new St(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new Ct(30,new St(19,118),new St(6,119)),new Ct(28,new St(18,47),new St(31,48)),new Ct(30,new St(34,24),new St(34,25)),new Ct(30,new St(20,15),new St(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(q||(q={}));class It{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}It.values=new Map([[q.DATA_MASK_000,new It(q.DATA_MASK_000,(e,t)=>0===(e+t&1))],[q.DATA_MASK_001,new It(q.DATA_MASK_001,(e,t)=>0===(1&e))],[q.DATA_MASK_010,new It(q.DATA_MASK_010,(e,t)=>t%3===0)],[q.DATA_MASK_011,new It(q.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[q.DATA_MASK_100,new It(q.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[q.DATA_MASK_101,new It(q.DATA_MASK_101,(e,t)=>e*t%6===0)],[q.DATA_MASK_110,new It(q.DATA_MASK_110,(e,t)=>e*t%6<3)],[q.DATA_MASK_111,new It(q.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class Tt{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new C;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=Et.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new C}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return At.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,s,n);let i=At.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let t=e-9;t>=r;t--)n=this.copyBit(s,t,n);if(i=At.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new C}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=It.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const o=new Uint8Array(t.getTotalCodewords());let a=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let e=0;e<r;e++){const t=s?r-1-e:e;for(let e=0;e<2;e++)i.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(o[a++]=l,c=0,l=0))}s=!s}if(a!==t.getTotalCodewords())throw new C;return o}remask(){if(null===this.parsedFormatInfo)return;const e=It.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class xt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new h;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const h of s)i+=h.getCount();const o=new Array(i);let a=0;for(const h of s)for(let e=0;e<h.getCount();e++){const e=h.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;o[a++]=new xt(e,new Uint8Array(t))}const l=o[0].codewords.length;let c=o.length-1;for(;c>=0&&o[c].codewords.length!==l;)c--;c++;const u=l-r.getECCodewordsPerBlock();let d=0;for(let h=0;h<u;h++)for(let t=0;t<a;t++)o[t].codewords[h]=e[d++];for(let h=c;h<a;h++)o[h].codewords[u]=e[d++];const f=o[0].codewords.length;for(let h=u;h<f;h++)for(let t=0;t<a;t++){const n=t<c?h:h+1;o[t].codewords[n]=e[d++]}return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(Y||(Y={}));class Nt{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,Nt.FOR_BITS.set(r,this),Nt.FOR_VALUE.set(e,this)}static forBits(e){const t=Nt.FOR_BITS.get(e);if(void 0===t)throw new h;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Nt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.TERMINATOR=new Nt(Y.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Nt.NUMERIC=new Nt(Y.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Nt.ALPHANUMERIC=new Nt(Y.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Nt.STRUCTURED_APPEND=new Nt(Y.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Nt.BYTE=new Nt(Y.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Nt.ECI=new Nt(Y.ECI,"ECI",Int32Array.from([0,0,0]),7),Nt.KANJI=new Nt(Y.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Nt.FNC1_FIRST_POSITION=new Nt(Y.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Nt.FNC1_SECOND_POSITION=new Nt(Y.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Nt.HANZI=new Nt(Y.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class kt{static decode(e,t,n,r){const i=new gt(e);let s=new x;const o=new Array;let a=-1,l=-1;try{let e,n=null,c=!1;do{if(i.available()<4)e=Nt.TERMINATOR;else{const t=i.readBits(4);e=Nt.forBits(t)}switch(e){case Nt.TERMINATOR:break;case Nt.FNC1_FIRST_POSITION:case Nt.FNC1_SECOND_POSITION:c=!0;break;case Nt.STRUCTURED_APPEND:if(i.available()<16)throw new C;a=i.readBits(8),l=i.readBits(8);break;case Nt.ECI:const u=kt.parseECIValue(i);if(n=S.getCharacterSetECIByValue(u),null===n)throw new C;break;case Nt.HANZI:const h=i.readBits(4),d=i.readBits(e.getCharacterCountBits(t));h===kt.GB2312_SUBSET&&kt.decodeHanziSegment(i,s,d);break;default:const f=i.readBits(e.getCharacterCountBits(t));switch(e){case Nt.NUMERIC:kt.decodeNumericSegment(i,s,f);break;case Nt.ALPHANUMERIC:kt.decodeAlphanumericSegment(i,s,f,c);break;case Nt.BYTE:kt.decodeByteSegment(i,s,f,n,o,r);break;case Nt.KANJI:kt.decodeKanjiSegment(i,s,f);break;default:throw new C}}}while(e!==Nt.TERMINATOR)}catch(c){throw new C}return new Q(e,s.toString(),0===o.length?null:o,null===n?null:n.toString(),a,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new C;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let s=t/96<<8&4294967295|t%96;s+=s<959?41377:42657,r[i]=s>>8&255,r[i+1]=255&s,i+=2,n--}try{t.append(I.decode(r,T.GB2312))}catch(s){throw new C(s)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new C;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let s=t/192<<8&4294967295|t%192;s+=s<7936?33088:49472,r[i]=s>>8,r[i+1]=s,i+=2,n--}try{t.append(I.decode(r,T.SHIFT_JIS))}catch(s){throw new C(s)}}static decodeByteSegment(e,t,n,r,i,s){if(8*n>e.available())throw new C;const o=new Uint8Array(n);for(let c=0;c<n;c++)o[c]=e.readBits(8);let a;a=null===r?T.guessEncoding(o,s):r.getName();try{t.append(I.decode(o,a))}catch(l){throw new C(l)}i.push(o)}static toAlphaNumericChar(e){if(e>=kt.ALPHANUMERIC_CHARS.length)throw new C;return kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new C;const r=e.readBits(11);t.append(kt.toAlphaNumericChar(Math.floor(r/45))),t.append(kt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new C;t.append(kt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=i;s<t.length();s++)"%"===t.charAt(s)&&(s<t.length()-1&&"%"===t.charAt(s+1)?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new C;const r=e.readBits(10);if(r>=1e3)throw new C;t.append(kt.toAlphaNumericChar(Math.floor(r/100))),t.append(kt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(kt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new C;const n=e.readBits(7);if(n>=100)throw new C;t.append(kt.toAlphaNumericChar(Math.floor(n/10))),t.append(kt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new C;const n=e.readBits(4);if(n>=10)throw new C;t.append(kt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new C}}kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kt.GB2312_SUBSET=1;class Rt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Dt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(N.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new Tt(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Rt(!0)),e}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=xt.getDataBlocks(i,n,r);let o=0;for(const c of s)o+=c.getNumDataCodewords();const a=new Uint8Array(o);let l=0;for(const c of s){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)a[l++]=e[n]}return kt.decode(a,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class Mt extends ae{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Mt(r,i,s)}}class Ot{constructor(e,t,n,r,i,s,o){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),s=this.image;for(let o=0;o<t;o++){const t=r+(0===(1&o)?Math.floor((o+1)/2):-Math.floor((o+1)/2));i[0]=0,i[1]=0,i[2]=0;let a=e;for(;a<n&&!s.get(a,t);)a++;let l=0;for(;a<n;){if(s.get(a,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,a);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;a++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&!i.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(t,a)&&o[1]<=n;)o[1]++,a++;if(a===s||o[1]>n)return NaN;for(;a<s&&!i.get(t,a)&&o[2]<=n;)o[2]++,a++;if(o[2]>n)return NaN;const l=o[0]+o[1]+o[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(o)?Ot.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Ot.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,s,i))return e.combineEstimate(s,i,t);const n=new Mt(i,s,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Pt extends ae{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,o=(this.count*this.estimatedModuleSize+n)/r;return new Pt(i,s,o,r)}}class Lt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ft{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(E.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(E.PURE_BARCODE),r=this.image,i=r.getHeight(),s=r.getWidth();let o=Math.floor(3*i/(4*Ft.MAX_MODULES));(o<Ft.MIN_SKIP||t)&&(o=Ft.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let u=o-1;u<i&&!a;u+=o){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<s;t++)if(r.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Ft.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(o=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-o,t=s-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Ft.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,s,n)&&(o=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return ae.orderBestPatterns(c),new Lt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const n=e[i];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let s=0;const o=this.image;for(;e>=s&&t>=s&&o.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;const a=o.getHeight(),l=o.getWidth();for(s=1;e+s<a&&t+s<l&&o.get(t+s,e+s);)i[2]++,s++;if(e+s>=a||t+s>=l)return!1;for(;e+s<a&&t+s<l&&!o.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=a||t+s>=l||i[3]>=n)return!1;for(;e+s<a&&t+s<l&&o.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-r)<2*r&&Ft.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(t,a);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&i.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(t,a);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(t,a)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&i.get(t,a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-r)>=2*r?NaN:Ft.foundPatternCross(o)?Ft.centerFromEnd(o,a):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,s=i.getWidth(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(a,t);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,t)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&i.get(a,t)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(a,t);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(a,t)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&i.get(a,t)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-r)>=r?NaN:Ft.foundPatternCross(o)?Ft.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=Ft.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],i),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],i)))){const e=i/7;let t=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(e,o,s)){n[r]=i.combineEstimate(o,s,e),t=!0;break}}if(!t){const t=new Pt(s,o,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Ft.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=Ft.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new k;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,i+=t*t}n=r/e;let s=Math.sqrt(i/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0});const o=Math.max(.2*n,s);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>o&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Ft.CENTER_QUORUM=2,Ft.MIN_SKIP=3,Ft.MAX_MODULES=57;class Bt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(E.NEED_RESULT_POINT_CALLBACK);const t=new Ft(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new k("No pattern found in proccess finder.");const s=Bt.computeDimension(t,n,r,i),o=At.getProvisionalVersionForDimension(s),a=o.getDimensionForVersion()-7;let l=null;if(o.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),s=n.getY()-t.getY()+r.getY(),o=1-3/a,c=Math.floor(t.getX()+o*(e-t.getX())),u=Math.floor(t.getY()+o*(s-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,c,u,t);break}catch(d){if(!(d instanceof k))throw d}}const c=Bt.createTransform(t,n,r,l,s),u=Bt.sampleGrid(this.image,c,s);let h;return h=null===l?[r,t,n]:[r,t,n,l],new le(u,h)}static createTransform(e,t,n,r,i){const s=i-3.5;let o,a,l,c;return null!==r?(o=r.getX(),a=r.getY(),l=s-3,c=l):(o=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),l=s,c=s),de.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,c,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return pe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=se.round(ae.distance(e,t)/r),s=se.round(ae.distance(e,n)/r);let o=Math.floor((i+s)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new k("Dimensions could be not found.")}return o}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);let a=Math.floor(t-(r-t)*s);return s=1,a<0?(s=t/(t-a),a=0):a>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,o,a),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}const s=Math.abs(n-e),o=Math.abs(r-t);let a=-s/2;const l=e<n?1:-1,c=t<r?1:-1;let u=0;const h=n+l;for(let d=e,f=t;d!==h;d+=l){const n=i?f:d,l=i?d:f;if(1===u===this.image.get(n,l)){if(2===u)return se.distance(d,f,e,t);u++}if(a+=o,a>0){if(f===r)break;f+=c,a-=s}}return 2===u?se.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),o=Math.min(this.image.getWidth()-1,t+i);if(o-s<3*e)throw new k("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-a<3*e)throw new k("Alignment bottom exceeds estimated module size.");return new Ot(this.image,s,a,o-s,l-a,e,this.resultPointCallback).find()}}class jt{constructor(){this.decoder=new Dt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(E.PURE_BARCODE)){const i=jt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=jt.NO_POINTS}else{const i=new Bt(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof Rt&&n.getOther().applyMirroredCorrection(r);const i=new U(n.getText(),n.getRawBytes(),void 0,r,z.QR_CODE,void 0),s=n.getByteSegments();null!==s&&i.putMetadata(K.BYTE_SEGMENTS,s);const o=n.getECLevel();return null!==o&&i.putMetadata(K.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(i.putMetadata(K.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(K.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new k;const r=this.moduleSize(t,e);let i=t[1],s=n[1],o=t[0],a=n[0];if(o>=a||i>=s)throw new k;if(s-i!==a-o&&(a=o+(s-i),a>=e.getWidth()))throw new k;const l=Math.round((a-o+1)/r),c=Math.round((s-i+1)/r);if(l<=0||c<=0)throw new k;if(c!==l)throw new k;const u=Math.floor(r/2);i+=u,o+=u;const h=o+Math.floor((l-1)*r)-a;if(h>0){if(h>u)throw new k;o-=h}const d=i+Math.floor((c-1)*r)-s;if(d>0){if(d>u)throw new k;i-=d}const f=new N(l,c);for(let p=0;p<c;p++){const t=i+Math.floor(p*r);for(let n=0;n<l;n++)e.get(o+Math.floor(n*r),t)&&f.set(n,p)}return f}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],o=!0,a=0;for(;i<r&&s<n;){if(o!==t.get(i,s)){if(5===++a)break;o=!o}i++,s++}if(i===r||s===n)throw new k;return(i-e[0])/7}}jt.NO_POINTS=new Array;class Ut{PDF417Common(){}static getBitCountSum(e){return se.sum(e)}static toIntArray(e){if(null==e||!e.length)return Ut.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=v.binarySearch(Ut.SYMBOL_TABLE,262143&e);return t<0?-1:(Ut.CODEWORD_TABLE[t]-1)%Ut.NUMBER_OF_CODEWORDS}}Ut.NUMBER_OF_CODEWORDS=929,Ut.MAX_CODEWORDS_IN_BARCODE=Ut.NUMBER_OF_CODEWORDS-1,Ut.MIN_ROWS_IN_BARCODE=3,Ut.MAX_ROWS_IN_BARCODE=90,Ut.MODULES_IN_CODEWORD=17,Ut.MODULES_IN_STOP_PATTERN=18,Ut.BARS_IN_MODULE=8,Ut.EMPTY_INT_ARRAY=new Int32Array([]),Ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Vt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class zt{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=zt.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=zt.detect(n,r)),new Vt(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const o=zt.findVertices(t,r,i);if(null!=o[0]||null!=o[3]){if(s=!0,n.push(o),!e)break;null!=o[2]?(i=Math.trunc(o[2].getX()),r=Math.trunc(o[2].getY())):(i=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY()))}else{if(!s)break;s=!1,i=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=zt.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return zt.copyToResult(s,zt.findRowsWithPattern(e,r,i,t,n,zt.START_PATTERN),zt.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),zt.copyToResult(s,zt.findRowsWithPattern(e,r,i,t,n,zt.STOP_PATTERN),zt.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const o=new Array(4);let a=!1;const l=new Int32Array(s.length);for(;r<t;r+=zt.ROW_STEP){let t=zt.findGuardPattern(e,i,r,n,!1,s,l);if(null!=t){for(;r>0;){const o=zt.findGuardPattern(e,i,--r,n,!1,s,l);if(null==o){r++;break}t=o}o[0]=new ae(t[0],r),o[1]=new ae(t[1],r),a=!0;break}}let c=r+1;if(a){let r=0,i=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;c<t;c++){const t=zt.findGuardPattern(e,i[0],c,n,!1,s,l);if(null!=t&&Math.abs(i[0]-t[0])<zt.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<zt.MAX_PATTERN_DRIFT)i=t,r=0;else{if(r>zt.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,o[2]=new ae(i[0],c),o[3]=new ae(i[1],c)}return c-r<zt.BARCODE_MIN_HEIGHT&&v.fill(o,null),o}static findGuardPattern(e,t,n,r,i,s,o){v.fillWithin(o,0,o.length,0);let a=t,l=0;for(;e.get(a,n)&&a>0&&l++<zt.MAX_PIXEL_DRIFT;)a--;let c=a,u=0,h=s.length;for(let d=i;c<r;c++)if(e.get(c,n)!==d)o[u]++;else{if(u===h-1){if(zt.patternMatchVariance(o,s,zt.MAX_INDIVIDUAL_VARIANCE)<zt.MAX_AVG_VARIANCE)return new Int32Array([a,c]);a+=o[0]+o[1],g.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,d=!d}return u===h-1&&zt.patternMatchVariance(o,s,zt.MAX_INDIVIDUAL_VARIANCE)<zt.MAX_AVG_VARIANCE?new Int32Array([a,c-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let l=0;l<r;l++)i+=e[l],s+=t[l];if(i<s)return 1/0;let o=i/s;n*=o;let a=0;for(let l=0;l<r;l++){let r=e[l],i=t[l]*o,s=r>i?r-i:i-r;if(s>n)return 1/0;a+=s}return a/i}}zt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),zt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),zt.MAX_AVG_VARIANCE=.42,zt.MAX_INDIVIDUAL_VARIANCE=.8,zt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),zt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),zt.MAX_PIXEL_DRIFT=3,zt.MAX_PATTERN_DRIFT=5,zt.SKIPPED_ROW_COUNT_MAX=25,zt.ROW_STEP=5,zt.BARCODE_MIN_HEIGHT=10;class Ht{constructor(e,t){if(0===t.length)throw new h;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new Ht(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Ht?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Ht(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let o=0;o<n;o++){let e=t[o];for(let t=0;t<i;t++)s[o+t]=this.field.add(s[o+t],this.field.multiply(e,r[t]))}return new Ht(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Ht(this.field,t)}multiplyScalar(e){if(0===e)return new Ht(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Ht(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new h;if(0===t)return new Ht(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Ht(this.field,r)}toString(){let e=new x;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Wt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new h;return this.logTable[e]}inverse(e){if(0===e)throw new $;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Gt extends Wt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Ht(this,new Int32Array([0])),this.one=new Ht(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new h;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Ht(this,n)}}Gt.PDF417_GF=new Gt(Ut.NUMBER_OF_CODEWORDS,3);class qt{constructor(){this.field=Gt.PDF417_GF}decode(e,t,n){let r=new Ht(this.field,e),i=new Int32Array(t),s=!1;for(let f=t;f>0;f--){let e=r.evaluateAt(this.field.exp(f));i[t-f]=e,0!==e&&(s=!0)}if(!s)return 0;let o=this.field.getOne();if(null!=n)for(const f of n){let t=this.field.exp(e.length-1-f),n=new Ht(this.field,new Int32Array([this.field.subtract(0,t),1]));o=o.multiply(n)}let a=new Ht(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),c=l[0],u=l[1],h=this.findErrorLocations(c),d=this.findErrorMagnitudes(u,c,h);for(let p=0;p<h.length;p++){let t=e.length-1-this.field.log(h[p]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],d[p])}return h.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,s=this.field.getZero(),o=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=s;if(r=i,s=o,r.isZero())throw f.getChecksumInstance();i=e;let n=this.field.getZero(),a=r.getCoefficient(r.getDegree()),l=this.field.inverse(a);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}o=n.multiply(s).subtract(t).negative()}let a=o.getCoefficient(0);if(0===a)throw f.getChecksumInstance();let l=this.field.inverse(a);return[o.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw f.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let l=1;l<=r;l++)i[r-l]=this.field.multiply(l,t.getCoefficient(l));let s=new Ht(this.field,i),o=n.length,a=new Int32Array(o);for(let l=0;l<o;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(s.evaluateAt(t));a[l]=this.field.multiply(r,i)}return a}}class Yt{constructor(e,t,n,r,i){e instanceof Yt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=null==t||null==n,o=null==r||null==i;if(s&&o)throw new k;s?(t=new ae(0,r.getY()),n=new ae(0,i.getY())):o&&(r=new ae(e.getWidth()-1,t.getY()),i=new ae(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Yt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let o=new ae(t.getX(),i);n?r=o:s=o}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let s=new ae(e.getX(),r);n?i=s:o=s}return new Yt(this.image,r,i,s,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Kt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,i,s,o,a){if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),h=i&&i[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+h:h+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=Kt.form(e,n)}toString(){return this.buffer}}class Qt{constructor(e){this.boundingBox=new Yt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Qt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Kt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Qt.MAX_NEARBY_DISTANCE=5;class Zt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Ut.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Jt extends Qt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,l=1,c=0;for(let u=s;u<o;u++){if(null==t[u])continue;let n=t[u],r=n.getRowNumber()-a;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,a=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>u)t[u]=null;else{let e;e=l>2?(l-2)*r:r;let i=e>=u;for(let n=1;n<=e&&!i;n++)i=null!=t[u-n];i?t[u]=null:(a=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.getCodewords(),a=-1;for(let l=i;l<s;l++){if(null==o[l])continue;let t=o[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-a;0===n||(1===n?a=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?o[l]=null:a=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Zt,n=new Zt,r=new Zt,i=new Zt;for(let o of e){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let e=o.getValue()%30,s=o.getRowNumber();switch(this._isLeft||(s+=2),s%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;let s=new Xt(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount())e[n]=null;else switch(this._isLeft||(s+=2),s%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class $t{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Ut.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=$t.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=$t.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let o=new Array(14);o[2]=i[t],o[3]=s[t],t>0&&(o[0]=n[t-1],o[4]=i[t-1],o[5]=s[t-1]),t>1&&(o[8]=n[t-2],o[10]=i[t-2],o[11]=s[t-2]),t<n.length-1&&(o[1]=n[t+1],o[6]=i[t+1],o[7]=s[t+1]),t<n.length-2&&(o[9]=n[t+2],o[12]=i[t+2],o[13]=s[t+2]);for(let a of o)if($t.adjustRowNumber(r,a))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Kt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Ut.SYMBOL_TABLE.length;e++){let t=Ut.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<Ut.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-r-1]=Math.fround(i/Ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=se.sum(e),n=new Int32Array(Ut.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<Ut.MODULES_IN_CODEWORD;s++){let o=t/(2*Ut.MODULES_IN_CODEWORD)+s*t/Ut.MODULES_IN_CODEWORD;i+e[r]<=o&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Ut.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=se.sum(e),n=new Array(Ut.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=oe.MAX_VALUE,i=-1;this.bSymbolTableReady||tn.initialize();for(let s=0;s<tn.RATIOS_TABLE.length;s++){let e=0,t=tn.RATIOS_TABLE[s];for(let i=0;i<Ut.BARS_IN_MODULE;i++){let s=Math.fround(t[i]-n[i]);if(e+=Math.fround(s*s),e>=r)break}e<r&&(r=e,i=Ut.SYMBOL_TABLE[s])}return i}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(e=>new Array(Ut.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class sn extends c{}sn.kind="NullPointerException";class on{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new sn;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new m;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class an extends c{}class ln extends on{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new h("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new an;t=w.MAX_VALUE}this.buf=v.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new m;this.ensureCapacity(this.count+n),g.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return v.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let un;function hn(e){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(e)}function dn(){let e=[];e[0]=hn(1);let t=hn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(X||(X={}));class fn{static decode(e,t){let n=new x(""),r=S.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],o=new nn;for(;i<e[0];){switch(s){case fn.TEXT_COMPACTION_MODE_LATCH:i=fn.textCompaction(e,i,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:i=fn.byteCompaction(s,e,r,i,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:i=fn.numericCompaction(e,i,n);break;case fn.ECI_CHARSET:S.getCharacterSetECIByValue(e[i++]);break;case fn.ECI_GENERAL_PURPOSE:i+=2;break;case fn.ECI_USER_DEFINED:i++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=fn.decodeMacroBlock(e,i,o);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new C;default:i--,i=fn.textCompaction(e,i,n)}if(!(i<e.length))throw C.getFormatInstance();s=e[i++]}if(0===n.length())throw C.getFormatInstance();let a=new Q(null,n.toString(),null,t);return a.setOther(o),a}static decodeMacroBlock(e,t,n){if(t+fn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw C.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let o=0;o<fn.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)r[o]=e[t];n.setSegmentIndex(w.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new x;t=fn.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new x;t=fn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new x;t=fn.textCompaction(e,t+1,i),n.setSender(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new x;t=fn.textCompaction(e,t+1,s),n.setAddressee(s.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let o=new x;t=fn.numericCompaction(e,t+1,o),n.setSegmentCount(w.parseInt(o.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new x;t=fn.numericCompaction(e,t+1,a),n.setTimestamp(rn.parseLong(a.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new x;t=fn.numericCompaction(e,t+1,l),n.setChecksum(w.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new x;t=fn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw C.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw C.getFormatInstance()}if(-1!==s){let r=t-s;n.isLastSegment()&&r--,n.setOptionalData(v.copyOfRange(e,s,s+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),s=0,o=!1;for(;t<e[0]&&!o;){let n=e[t++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[s]=n/30,r[s+1]=n%30,s+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[s++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[s]=n,s++}}return fn.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=X.ALPHA,s=X.ALPHA,o=0;for(;o<n;){let n=e[o],a="";switch(i){case X.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.LL:i=X.LOWER;break;case fn.ML:i=X.MIXED;break;case fn.PS:s=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case fn.AS:s=i,i=X.ALPHA_SHIFT;break;case fn.ML:i=X.MIXED;break;case fn.PS:s=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.MIXED:if(n<fn.PL)a=fn.MIXED_CHARS[n];else switch(n){case fn.PL:i=X.PUNCT;break;case 26:a=" ";break;case fn.LL:i=X.LOWER;break;case fn.AL:i=X.ALPHA;break;case fn.PS:s=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT:if(n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=X.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.ALPHA_SHIFT:if(i=s,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT_SHIFT:if(i=s,n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=X.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}}""!==a&&r.append(a),o++}}static byteCompaction(e,t,n,r,i){let s=new ln,o=0,a=0,l=!1;switch(e){case fn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[o++]=n,a=900*a+n,n=t[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(o%5===0&&o>0){for(let e=0;e<6;++e)s.write(Number(hn(a)>>hn(8*(5-e))));a=0,o=0}}r===t[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(e[o++]=n);for(let t=0;t<o;t++)s.write(e[t]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<fn.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+e;else switch(e){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(o%5===0&&o>0){for(let e=0;e<6;++e)s.write(Number(hn(a)>>hn(8*(5-e))));a=0,o=0}}}return i.append(I.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let o=e[t++];if(t===e[0]&&(i=!0),o<fn.TEXT_COMPACTION_MODE_LATCH)s[r]=o,r++;else switch(o){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%fn.MAX_NUMERIC_CODEWORDS===0||o===fn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(fn.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=hn(0);for(let i=0;i<t;i++)n+=fn.EXP900[t-i-1]*hn(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new C;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=cn()?dn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pn{constructor(){}static decode(e,t,n,r,i,s,o){let a,l=new Yt(e,t,n,r,i),c=null,u=null;for(let f=!0;;f=!1){if(null!=t&&(c=pn.getRowIndicatorColumn(e,l,t,!0,s,o)),null!=r&&(u=pn.getRowIndicatorColumn(e,l,r,!1,s,o)),a=pn.merge(c,u),null==a)throw k.getNotFoundInstance();let n=a.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}a.setBoundingBox(l);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,c),a.setDetectionResultColumn(h,u);let d=null!=c;for(let f=1;f<=h;f++){let t,n=d?f:h-f;if(void 0!==a.getDetectionResultColumn(n))continue;t=0===n||n===h?new Jt(l,0===n):new Qt(l),a.setDetectionResultColumn(n,t);let r=-1,i=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=pn.getStartColumn(a,n,c,d),r<0||r>l.getMaxX()){if(-1===i)continue;r=i}let u=pn.detectCodeword(e,l.getMinX(),l.getMaxX(),d,r,c,s,o);null!=u&&(t.setCodeword(c,u),i=r,s=Math.min(s,u.getWidth()),o=Math.max(o,u.getWidth()))}}return pn.createDecoderResult(a)}static merge(e,t){if(null==e&&null==t)return null;let n=pn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Yt.merge(pn.adjustBoundingBox(e),pn.adjustBoundingBox(t));return new $t(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=pn.getMax(t),r=0;for(let o of t)if(r+=n-o,o>0)break;let i=e.getCodewords();for(let o=0;r>0&&null==i[o];o++)r--;let s=0;for(let o=t.length-1;o>=0&&(s+=n-t[o],!(t[o]>0));o--);for(let o=i.length-1;s>0&&null==i[o];o--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let o=new Jt(t,r);for(let a=0;a<2;a++){let l=0===a?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=t.getMaxY()&&a>=t.getMinY();a+=l){let t=pn.detectCodeword(e,0,e.getWidth(),r,c,a,i,s);null!=t&&(o.setCodeword(a,t),c=r?t.getStartX():t.getEndX())}}return o}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-pn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>Ut.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=pn.createBarcodeMatrix(e);pn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let o=0;o<e.getBarcodeColumnCount();o++){let l=t[a][o+1].getValue(),c=a*e.getBarcodeColumnCount()+o;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(s.push(c),i.push(l))}let o=new Array(i.length);for(let a=0;a<o.length;a++)o[a]=i[a];return pn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,Ut.toIntArray(n),Ut.toIntArray(s),o)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),o=100;for(;o-- >0;){for(let e=0;e<s.length;e++)t[r[e]]=i[e][s[e]];try{return pn.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof f))throw a}if(0===s.length)throw f.getChecksumInstance();for(let e=0;e<s.length;e++){if(s[e]<i[e].length-1){s[e]++;break}if(s[e]=0,e===s.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Zt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(pn.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=s)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=s)return r?s.getStartX():s.getEndX();if(pn.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=s)return r?s.getEndX():s.getStartX();let o=0;for(;pn.isValidBarcodeColumn(e,t-i);){t-=i;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*o*(n.getEndX()-n.getStartX());o++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,o,a){i=pn.adjustCodewordStartColumn(e,t,n,r,i,s);let l,c=pn.getModuleBitCount(e,t,n,r,i,s);if(null==c)return null;let u=se.sum(c);if(r)l=i+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=i,i=l-u}if(!pn.checkCodewordSkew(u,o,a))return null;let h=tn.getDecodedValue(c),d=Ut.getCodeword(h);return-1===d?null:new en(i,l,pn.getCodewordBucketNumber(h),d)}static getModuleBitCount(e,t,n,r,i,s){let o=i,a=new Int32Array(8),l=0,c=r?1:-1,u=r;for(;(r?o<n:o>=t)&&l<a.length;)e.get(o,s)===u?(a[l]++,o+=c):(l++,u=!u);return l===a.length||o===(r?n:t)&&l===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let o=i,a=r?-1:1;for(let l=0;l<2;l++){for(;(r?o>=t:o<n)&&r===e.get(o,s);){if(Math.abs(i-o)>pn.CODEWORD_SKEW_SIZE)return i;o+=a}a=-a,r=!r}return o}static checkCodewordSkew(e,t,n){return t-pn.CODEWORD_SKEW_SIZE<=e&&e<=n+pn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw C.getFormatInstance();let r=1<<t+1,i=pn.correctErrors(e,n,r);pn.verifyCodewordCount(e,r);let s=fn.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+pn.MAX_ERRORS||n<0||n>pn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return pn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw C.getFormatInstance();let n=e[0];if(n>e.length)throw C.getFormatInstance();if(0===n){if(!(t<e.length))throw C.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return pn.getCodewordBucketNumber(pn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Kt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}pn.CODEWORD_SKEW_SIZE=2,pn.MAX_ERRORS=3,pn.MAX_EC_CODEWORDS=512,pn.errorCorrection=new qt;class gn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=gn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw k.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return gn.decode(e,t,!0)}catch(n){if(n instanceof C||n instanceof f)throw k.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,i=zt.detectMultiple(e,t,n);for(const s of i.getPoints()){const e=pn.decode(i.getBits(),s[4],s[5],s[6],s[7],gn.getMinCodewordWidth(s),gn.getMaxCodewordWidth(s)),t=new U(e.getText(),e.getRawBytes(),void 0,s,z.PDF_417);t.putMetadata(K.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(K.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?w.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends c{}mn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(E.TRY_HARDER),r=t(e)?null:e.get(E.POSSIBLE_FORMATS),i=new Array;if(!t(r)){const t=r.some(e=>e===z.UPC_A||e===z.UPC_E||e===z.EAN_13||e===z.EAN_8||e===z.CODABAR||e===z.CODE_39||e===z.CODE_93||e===z.CODE_128||e===z.ITF||e===z.RSS_14||e===z.RSS_EXPANDED);t&&!n&&i.push(new lt(e,this.verbose)),r.includes(z.QR_CODE)&&i.push(new jt),r.includes(z.DATA_MATRIX)&&i.push(new wt),r.includes(z.AZTEC)&&i.push(new ye),r.includes(z.PDF_417)&&i.push(new gn),t&&n&&i.push(new lt(e,this.verbose))}0===i.length&&(n||i.push(new lt(e,this.verbose)),i.push(new jt),i.push(new wt),i.push(new ye),i.push(new gn),n&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof mn)continue}throw new k("No MultiFormat Readers were able to detect the code.")}}class vn extends j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class wn extends j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new gn,e)}}class bn extends j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new jt,e)}}var _n;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(_n||(_n={}));var En=_n;class Cn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new J(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const e=n.multiply(new J(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new h("No error correction bytes");const n=e.length-t;if(n<=0)throw new h("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);g.arraycopy(e,0,i,0,n);let s=new J(this.field,i);s=s.multiplyByMonomial(t,1);const o=s.divide(r)[1].getCoefficients(),a=t-o.length;for(let l=0;l<a;l++)e[n+l]=0;g.arraycopy(o,0,e,n+a,o.length)}}class Sn{constructor(){}static applyMaskPenaltyRule1(e){return Sn.applyMaskPenaltyRule1Internal(e,!0)+Sn.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const e=n[s];for(let i=0;i<r-1;i++){const r=e[i];r===e[i+1]&&r===n[s+1][i]&&r===n[s+1][i+1]&&t++}}return Sn.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let e=0;e<r;e++){const o=n[s];e+6<r&&1===o[e]&&0===o[e+1]&&1===o[e+2]&&1===o[e+3]&&1===o[e+4]&&0===o[e+5]&&1===o[e+6]&&(Sn.isWhiteHorizontal(o,e-4,e)||Sn.isWhiteHorizontal(o,e+7,e+11))&&t++,s+6<i&&1===n[s][e]&&0===n[s+1][e]&&1===n[s+2][e]&&1===n[s+3][e]&&1===n[s+4][e]&&0===n[s+5][e]&&1===n[s+6][e]&&(Sn.isWhiteVertical(n,e,s-4,s)||Sn.isWhiteVertical(n,e,s+7,s+11))&&t++}return t*Sn.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++){const e=n[o];for(let n=0;n<r;n++)1===e[n]&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-s)/s)*Sn.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(1&i)+i%3;break;case 6:i=n*t,r=(1&i)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new h("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let o=0;o<r;o++){let e=0,r=-1;for(let a=0;a<i;a++){const i=t?s[o][a]:s[a][o];i===r?e++:(e>=5&&(n+=Sn.N1+(e-5)),e=1,r=i)}e>=5&&(n+=Sn.N1+(e-5))}return n}}Sn.N1=3,Sn.N2=3,Sn.N3=40,Sn.N4=10;class An{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)v.fill(t,e)}equals(e){if(!(e instanceof An))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new x;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class In{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new x;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<In.NUM_MASK_PATTERNS}}In.NUM_MASK_PATTERNS=8;class Tn extends c{}Tn.kind="WriterException";class xn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){xn.clearMatrix(i),xn.embedBasicPatterns(n,i),xn.embedTypeInfo(t,r,i),xn.maybeEmbedVersionInfo(n,i),xn.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){xn.embedPositionDetectionPatternsAndSeparators(t),xn.embedDarkDotAtLeftBottomCorner(t),xn.maybeEmbedPositionAdjustmentPatterns(e,t),xn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new b;xn.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const e=r.get(r.getSize()-1-i),t=xn.TYPE_INFO_COORDINATES[i],s=t[0],o=t[1];if(n.setBoolean(s,o,e),i<8){const t=n.getWidth()-i-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(i-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new b;xn.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const s=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+e,s),t.setBoolean(t.getHeight()-11+e,i,s)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,o=n.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);o>=0&&o<n.getHeight();){for(let i=0;i<2;++i){const a=s-i;if(!xn.isEmpty(n.get(a,o)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&Sn.getDataMaskBit(t,a,o)&&(l=!l),n.setBoolean(a,o,l)}o+=i}i=-i,o+=i,s-=2}if(r!==e.getSize())throw new Tn("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-w.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new h("0 polynomial");const n=xn.findMSBSet(t);for(e<<=n-1;xn.findMSBSet(e)>=n;)e^=t<<xn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!In.isValidMaskPattern(t))throw new Tn("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=xn.calculateBCHCode(r,xn.TYPE_INFO_POLY);n.appendBits(i,10);const s=new b;if(s.appendBits(xn.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new Tn("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=xn.calculateBCHCode(e.getVersionNumber(),xn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new Tn("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;xn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),xn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new Tn;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!xn.isEmpty(n.get(e+r,t)))throw new Tn;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!xn.isEmpty(n.get(e,t+r)))throw new Tn;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=xn.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=xn.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=xn.POSITION_DETECTION_PATTERN[0].length;xn.embedPositionDetectionPattern(0,0,e),xn.embedPositionDetectionPattern(e.getWidth()-t,0,e),xn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;xn.embedHorizontalSeparationPattern(0,n-1,e),xn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),xn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;xn.embedVerticalSeparationPattern(r,0,e),xn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),xn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=xn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const e=r[i];if(e>=0)for(let n=0;n!==s;n++){const i=r[n];i>=0&&xn.isEmpty(t.get(i,e))&&xn.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}xn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),xn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),xn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),xn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),xn.VERSION_INFO_POLY=7973,xn.TYPE_INFO_POLY=1335,xn.TYPE_INFO_MASK_PATTERN=21522;class Nn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kn{constructor(){}static calculateMaskPenalty(e){return Sn.applyMaskPenaltyRule1(e)+Sn.applyMaskPenaltyRule2(e)+Sn.applyMaskPenaltyRule3(e)+Sn.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=kn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(En.CHARACTER_SET);i&&(r=n.get(En.CHARACTER_SET).toString());const s=this.chooseMode(e,r),o=new b;if(s===Nt.BYTE&&(i||kn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=S.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,o)}this.appendModeInfo(s,o);const a=new b;let l;if(this.appendBytes(e,s,a,r),null!==n&&void 0!==n.get(En.QR_VERSION)){const e=Number.parseInt(n.get(En.QR_VERSION).toString(),10);l=At.getVersionForNumber(e);const r=this.calculateBitsNeeded(s,o,a,l);if(!this.willFit(r,l,t))throw new Tn("Data too big for requested version")}else l=this.recommendVersion(t,s,o,a);const c=new b;c.appendBitArray(o);const u=s===Nt.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(u,l,s,c),c.appendBitArray(a);const h=l.getECBlocksForLevel(t),d=l.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),d,h.getNumBlocks()),p=new In;p.setECLevel(t),p.setMode(s),p.setVersion(l);const g=l.getDimensionForVersion(),m=new An(g,g),y=this.chooseMaskPattern(f,t,l,m);return p.setMaskPattern(y),xn.buildMatrix(f,t,l,y,m),p.setMatrix(m),p}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,At.getVersionForNumber(1)),s=this.chooseVersion(i,e),o=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(o,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<kn.ALPHANUMERIC_TABLE.length?kn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(S.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Nt.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const t=e.charAt(i);if(kn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return Nt.BYTE;r=!0}}return r?Nt.ALPHANUMERIC:n?Nt.NUMERIC:Nt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=I.encode(e,S.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let o=0;o<In.NUM_MASK_PATTERNS;o++){xn.buildMatrix(e,t,n,o,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,s=o)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=At.getVersionForNumber(n);if(kn.willFit(e,r,t))return r}throw new Tn("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new Tn("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits(0===(1&s)?236:17,8);if(t.getSize()!==n)throw new Tn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new Tn("Block ID too large");const o=e%n,a=n-o,l=Math.floor(e/n),c=l+1,u=Math.floor(t/n),h=u+1,d=l-u,f=c-h;if(d!==f)throw new Tn("EC bytes mismatch");if(n!==a+o)throw new Tn("RS blocks mismatch");if(e!==(u+d)*a+(h+f)*o)throw new Tn("Total bytes mismatch");r<a?(i[0]=u,s[0]=d):(i[0]=h,s[0]=f)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Tn("Number of bits and data bytes does not match");let i=0,s=0,o=0;const a=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);kn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,c,l,u);const h=l[0],d=new Uint8Array(h);e.toBytes(8*i,d,0,h);const f=kn.generateECBytes(d,u[0]);a.push(new Nn(d,f)),s=Math.max(s,h),o=Math.max(o,f.length),i+=l[0]}if(n!==i)throw new Tn("Data bytes does not match offset");const l=new b;for(let c=0;c<s;++c)for(const e of a){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<o;++c)for(const e of a){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new Tn("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=255&e[s];new Cn(ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Tn(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case Nt.NUMERIC:kn.appendNumericBytes(e,n);break;case Nt.ALPHANUMERIC:kn.appendAlphanumericBytes(e,n);break;case Nt.BYTE:kn.append8BitBytes(e,n,r);break;case Nt.KANJI:kn.appendKanjiBytes(e,n);break;default:throw new Tn("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=kn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=kn.getDigit(e.charAt(r));if(r+2<n){const n=kn.getDigit(e.charAt(r+1)),s=kn.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+s,10),r+=3}else if(r+1<n){const n=kn.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=kn.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new Tn;if(r+1<n){const n=kn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new Tn;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=I.encode(e,n)}catch(i){throw new Tn(i)}for(let s=0,o=r.length;s!==o;s++){const e=r[s];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=I.encode(e,S.SJIS)}catch(i){throw new Tn(i)}const r=n.length;for(let s=0;s<r;s+=2){const e=(255&n[s])<<8&4294967295|255&n[s+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new Tn("Invalid byte sequence");const i=192*(r>>8)+(255&r);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(Nt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}kn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kn.DEFAULT_BYTE_MODE_ENCODING=S.UTF8.getName();class Rn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new h("Found empty contents");if(t<0||n<0)throw new h("Requested dimensions are too small: "+t+"x"+n);let i=_t.L,s=Rn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(En.ERROR_CORRECTION)&&(i=_t.fromString(r.get(En.ERROR_CORRECTION).toString())),void 0!==r.get(En.MARGIN)&&(s=Number.parseInt(r.get(En.MARGIN).toString(),10)));const o=kn.encode(e,i,r);return this.renderResult(o,t,n,s)}writeToDom(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const s=i.getWidth(),o=i.getHeight(),a=s+2*r,l=o+2*r,c=Math.max(t,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-s*h)/2),f=Math.floor((u-o*h)/2),p=this.createSVGElement(c,u);for(let g=0,m=f;g<o;g++,m+=h)for(let e=0,t=d;e<s;e++,t+=h)if(1===i.get(e,g)){const e=this.createSvgRectElement(t,m,h,h);p.appendChild(e)}return p}createSVGElement(e,t){const n=document.createElementNS(Rn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Rn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Rn.QUIET_ZONE_SIZE=4,Rn.SVG_NS="http://www.w3.org/2000/svg";class Dn{encode(e,t,n,r,i){if(0===e.length)throw new h("Found empty contents");if(t!==z.QR_CODE)throw new h("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new h("Requested dimensions are too small: ".concat(n,"x").concat(r));let s=_t.L,o=Dn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(En.ERROR_CORRECTION)&&(s=_t.fromString(i.get(En.ERROR_CORRECTION).toString())),void 0!==i.get(En.MARGIN)&&(o=Number.parseInt(i.get(En.MARGIN).toString(),10)));const a=kn.encode(e,s,i);return Dn.renderResult(a,n,r,o)}static renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const s=i.getWidth(),o=i.getHeight(),a=s+2*r,l=o+2*r,c=Math.max(t,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-s*h)/2),f=Math.floor((u-o*h)/2),p=new N(c,u);for(let g=0,m=f;g<o;g++,m+=h)for(let e=0,t=d;e<s;e++,t+=h)1===i.get(e,g)&&p.setRegion(t,m,h,h);return p}}Dn.QUIET_ZONE_SIZE=4;class Mn{encode(e,t,n,r,i){let s;if(t!==z.QR_CODE)throw new h("No encoder available for format "+t);return s=new Dn,s.encode(e,t,n,r,i)}}class On extends M{constructor(e,t,n,r,i,s,o,a){if(super(s,o),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+o>n)throw new h("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(s,o)}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.yuvData,i,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;g.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new On(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/On.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/On.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const t=s*e;for(let s=0;s<e;s++){const e=255&r[i+s*On.THUMBNAIL_SCALE_FACTOR];n[t+s]=4278190080|65793*e}i+=this.dataWidth*On.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/On.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/On.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const t=i+e/2;for(let r=i,s=i+e-1;r<t;r++,s--){const e=n[r];n[r]=n[s],n[s]=e}}}invert(){return new O(this)}}On.THUMBNAIL_SCALE_FACTOR=2;class Pn extends M{constructor(e,t,n,r,i,s,o){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=o,4===e.BYTES_PER_ELEMENT){const r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,s=n>>7&510,o=255&n;i[t]=(r+s+o)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===o&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++){const t=s*e;g.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Pn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new O(this)}}class Ln extends S{static forName(e){return this.getCharacterSetECIByName(e)}}class Fn{}Fn.ISO_8859_1=S.ISO8859_1;class Bn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class jn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Un{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Vn extends Un{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Vn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+w.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class zn extends Vn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new zn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hn(e,t,n){return new zn(e,t,n)}function Wn(e,t,n){return new Vn(e,t,n)}const Gn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qn=0,Yn=1,Xn=2,Kn=3,Qn=4,Zn=new Vn(null,0,0),Jn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function $n(e){for(let t of e)v.fill(t,-1);return e[qn][Qn]=0,e[Yn][Qn]=0,e[Yn][qn]=28,e[Kn][Qn]=0,e[Xn][Qn]=0,e[Xn][qn]=15,e}const er=$n(v.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=Jn[this.mode][e];r=Wn(r,65535&t,t>>16),n+=t>>16}let i=e===Xn?4:5;return r=Wn(r,t,i),new tr(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Xn?4:5;return n=Wn(n,er[this.mode][e],r),n=Wn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Qn||this.mode===Xn){let e=Jn[n][qn];t=Wn(t,65535&e,e>>16),r+=e>>16,n=qn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new tr(t,n,this.binaryShiftByteCount+1,r+i);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Hn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Jn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new b;for(const r of t)r.appendTo(n,e);return n}toString(){return T.format("%s bits=%d bytes=%d",Gn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=T.getCharCode(" "),n=T.getCharCode("."),r=T.getCharCode(",");e[qn][t]=1;const i=T.getCharCode("Z"),s=T.getCharCode("A");for(let d=s;d<=i;d++)e[qn][d]=d-s+2;e[Yn][t]=1;const o=T.getCharCode("z"),a=T.getCharCode("a");for(let d=a;d<=o;d++)e[Yn][d]=d-a+2;e[Xn][t]=1;const l=T.getCharCode("9"),c=T.getCharCode("0");for(let d=c;d<=l;d++)e[Xn][d]=d-c+2;e[Xn][r]=12,e[Xn][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let d=0;d<u.length;d++)e[Kn][T.getCharCode(u[d])]=d;const h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<h.length;d++)T.getCharCode(h[d])>0&&(e[Qn][T.getCharCode(h[d])]=d);return e}tr.INITIAL_STATE=new tr(Zn,qn,0,0);const rr=nr(v.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=T.getCharCode(" "),t=T.getCharCode("\n");let n=jn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,s=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case T.getCharCode("\r"):i=s===t?2:0;break;case T.getCharCode("."):i=s===e?3:0;break;case T.getCharCode(","):i=s===e?4:0;break;case T.getCharCode(":"):i=s===e?5:0;break;default:i=0}i>0?(n=ir.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return jn.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=rr[e.getMode()][r]>0,s=null;for(let o=0;o<=Qn;o++){let a=rr[o][r];if(a>0){if(null==s&&(s=e.endBinaryShift(t)),!i||o===e.getMode()||o===Xn){const e=s.latchAndAppend(o,a);n.push(e)}if(!i&&er[e.getMode()][o]>=0){const e=s.shiftAndAppend(o,a);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Qn,n)),e.getMode()!==Qn&&r.push(i.shiftAndAppend(Qn,n)),3===n||4===n){let e=i.latchAndAppend(Xn,16-n).latchAndAppend(Xn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class sr{constructor(){}static encodeBytes(e){return sr.encode(e,sr.DEFAULT_EC_PERCENT,sr.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,s,o,a,l=new ir(e).encode(),c=w.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(n!==sr.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?sr.MAX_NB_BITS_COMPACT:sr.MAX_NB_BITS))throw new h(T.format("Illegal value %s for layers",n));s=sr.totalBitsInLayer(i,r),o=sr.WORD_SIZE[i];let e=s-s%o;if(a=sr.stuffBits(l,o),a.getSize()+c>e)throw new h("Data to large for user specified layer");if(r&&a.getSize()>64*o)throw new h("Data to large for user specified layer")}else{o=0,a=null;for(let e=0;;e++){if(e>sr.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(r=e<=3,i=r?e+1:e,s=sr.totalBitsInLayer(i,r),u>s)continue;null!=a&&o===sr.WORD_SIZE[i]||(o=sr.WORD_SIZE[i],a=sr.stuffBits(l,o));let t=s-s%o;if(!(r&&a.getSize()>64*o)&&a.getSize()+c<=t)break}}let d,f=sr.generateCheckWords(a,s,o),p=a.getSize()/o,g=sr.generateModeMessage(r,i,p),m=(r?11:14)+4*i,y=new Int32Array(m);if(r){d=m;for(let e=0;e<y.length;e++)y[e]=e}else{d=m+1+2*w.truncDivision(w.truncDivision(m,2)-1,15);let e=w.truncDivision(m,2),t=w.truncDivision(d,2);for(let n=0;n<e;n++){let r=n+w.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let v=new N(d);for(let h=0,w=0;h<i;h++){let e=4*(i-h)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)f.get(w+n+r)&&v.set(y[2*h+r],y[2*h+t]),f.get(w+2*e+n+r)&&v.set(y[2*h+t],y[m-1-2*h-r]),f.get(w+4*e+n+r)&&v.set(y[m-1-2*h-r],y[m-1-2*h-t]),f.get(w+6*e+n+r)&&v.set(y[m-1-2*h-t],y[2*h+r])}w+=8*e}if(sr.drawModeMessage(v,r,d,g),r)sr.drawBullsEye(v,w.truncDivision(d,2),5);else{sr.drawBullsEye(v,w.truncDivision(d,2),7);for(let e=0,t=0;e<w.truncDivision(m,2)-1;e+=15,t+=16)for(let n=1&w.truncDivision(d,2);n<d;n+=2)v.set(w.truncDivision(d,2)-t,n),v.set(w.truncDivision(d,2)+t,n),v.set(n,w.truncDivision(d,2)-t),v.set(n,w.truncDivision(d,2)+t)}let b=new Bn;return b.setCompact(r),b.setSize(d),b.setLayers(i),b.setCodeWords(p),b.setMatrix(v),b}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new b;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=sr.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=sr.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=w.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let t=i-3+s;r.get(s)&&e.set(t,i-5),r.get(s+7)&&e.set(i+5,t),r.get(20-s)&&e.set(t,i+5),r.get(27-s)&&e.set(i-5,t)}else for(let s=0;s<10;s++){let t=i-5+s+w.truncDivision(s,5);r.get(s)&&e.set(t,i-7),r.get(s+10)&&e.set(i+7,t),r.get(29-s)&&e.set(t,i+7),r.get(39-s)&&e.set(i-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new Cn(sr.getGF(n)),s=w.truncDivision(t,n),o=sr.bitsToWords(e,n,s);i.encode(o,s-r);let a=t%n,l=new b;l.appendBits(0,a);for(const c of Array.from(o))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let r,i,s=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;s[r]=n}return s}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new h("Unsupported word size "+e)}}static stuffBits(e,t){let n=new b,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let o=0;for(let n=0;n<t;n++)(s+n>=r||e.get(s+n))&&(o|=1<<t-1-n);(o&i)===i?(n.appendBits(o&i,t),s--):0===(o&i)?(n.appendBits(1|o,t),s--):n.appendBits(o,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}sr.DEFAULT_EC_PERCENT=33,sr.DEFAULT_AZTEC_LAYERS=0,sr.MAX_NB_BITS=32,sr.MAX_NB_BITS_COMPACT=4,sr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class or{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=Fn.ISO_8859_1,o=sr.DEFAULT_EC_PERCENT,a=sr.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(En.CHARACTER_SET)&&(s=Ln.forName(i.get(En.CHARACTER_SET).toString())),i.has(En.ERROR_CORRECTION)&&(o=w.parseInt(i.get(En.ERROR_CORRECTION).toString())),i.has(En.AZTEC_LAYERS)&&(a=w.parseInt(i.get(En.AZTEC_LAYERS).toString()))),or.encodeLayers(e,t,n,r,s,o,a)}static encodeLayers(e,t,n,r,i,s,o){if(t!==z.AZTEC)throw new h("Can only encode AZTEC, but got "+t);let a=sr.encode(T.getBytes(e,i),s,o);return or.renderResult(a,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let i=r.getWidth(),s=r.getHeight(),o=Math.max(t,i),a=Math.max(n,s),l=Math.min(o/i,a/s),c=(o-i*l)/2,u=(a-s*l)/2,h=new N(o,a);for(let d=0,f=u;d<s;d++,f+=l)for(let e=0,t=c;e<i;e++,t+=l)r.get(e,d)&&h.setRegion(t,f,l,l);return h}}e.AbstractExpandedDecoder=Ge,e.ArgumentException=u,e.ArithmeticException=$,e.AztecCode=Bn,e.AztecCodeReader=ye,e.AztecCodeWriter=or,e.AztecDecoder=ie,e.AztecDetector=me,e.AztecDetectorResult=ce,e.AztecEncoder=sr,e.AztecHighLevelEncoder=ir,e.AztecPoint=ge,e.BarcodeFormat=z,e.Binarizer=p,e.BinaryBitmap=d,e.BitArray=b,e.BitMatrix=N,e.BitSource=gt,e.BrowserAztecCodeReader=ve,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=j,e.BrowserDatamatrixCodeReader=bt,e.BrowserMultiFormatReader=vn,e.BrowserPDF417Reader=wn,e.BrowserQRCodeReader=bn,e.BrowserQRCodeSvgWriter=Rn,e.CharacterSetECI=S,e.ChecksumException=f,e.Code128Reader=be,e.Code39Reader=_e,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=wt,e.DecodeHintType=E,e.DecoderResult=Q,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=xe,e.EncodeHintType=En,e.Exception=c,e.FormatException=C,e.GenericGF=ee,e.GenericGFPoly=J,e.GlobalHistogramBinarizer=R,e.GridSampler=he,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=P,e.HybridBinarizer=D,e.ITFReader=Ee,e.IllegalArgumentException=h,e.IllegalStateException=ne,e.InvertedLuminanceSource=O,e.LuminanceSource=M,e.MathUtils=se,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=Mn,e.NotFoundException=k,e.OneDReader=we,e.PDF417DecodedBitStreamParser=fn,e.PDF417DecoderErrorCorrection=qt,e.PDF417Reader=gn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=de,e.PlanarYUVLuminanceSource=On,e.QRCodeByteMatrix=An,e.QRCodeDataMask=It,e.QRCodeDecodedBitStreamParser=kt,e.QRCodeDecoderErrorCorrectionLevel=_t,e.QRCodeDecoderFormatInformation=Et,e.QRCodeEncoder=kn,e.QRCodeEncoderQRCode=In,e.QRCodeMaskUtil=Sn,e.QRCodeMatrixUtil=xn,e.QRCodeMode=Nt,e.QRCodeReader=jt,e.QRCodeVersion=At,e.QRCodeWriter=Dn,e.RGBLuminanceSource=Pn,e.RSS14Reader=at,e.RSSExpandedReader=st,e.ReaderException=mn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=Cn,e.ReedSolomonException=te,e.Result=U,e.ResultMetadataType=K,e.ResultPoint=ae,e.StringUtils=T,e.UnsupportedOperationException=A,e.VideoInputDevice=L,e.WhiteRectangleDetector=ue,e.WriterException=Tn,e.ZXingArrays=v,e.ZXingCharset=Ln,e.ZXingInteger=w,e.ZXingStandardCharsets=Fn,e.ZXingStringBuilder=x,e.ZXingStringEncoding=I,e.ZXingSystem=g,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},141:function(e,t,n){var r;"undefined"!=typeof self&&self,e.exports=(r=n(43),function(){"use strict";var e={155:function(e){e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};n.r(i),n.d(i,{useReactToPrint:function(){return p}});var s=n(155);function o(e){let{level:t="error",messages:n,suppressErrors:r=!1}=e;r||("error"===t?console.error(n):"warning"===t?console.warn(n):console.debug(n))}function a(e,t){if(t||!e){const e=document.getElementById("printWindow");e&&document.body.removeChild(e)}}function l(e){return e instanceof Error?e:new Error("Unknown Error")}function c(e,t){const{documentTitle:n,onAfterPrint:r,onPrintError:i,preserveAfterPrint:s,print:c,suppressErrors:u}=t;setTimeout(()=>{var t,h;if(e.contentWindow){function d(){null==r||r(),a(s)}if(e.contentWindow.focus(),c)c(e).then(d).catch(e=>{i?i("print",l(e)):o({messages:["An error was thrown by the specified `print` function"],suppressErrors:u})});else{if(e.contentWindow.print){const f=null!==(h=null===(t=e.contentDocument)||void 0===t?void 0:t.title)&&void 0!==h?h:"",p=e.ownerDocument.title;n&&(e.ownerDocument.title=n,e.contentDocument&&(e.contentDocument.title=n)),e.contentWindow.print(),n&&(e.ownerDocument.title=p,e.contentDocument&&(e.contentDocument.title=f))}else o({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:u});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>{var t,n;return(null!==(n=null!==(t=navigator.userAgent)&&void 0!==t?t:navigator.vendor)&&void 0!==n?n:"opera"in window&&window.opera).match(e)})?setTimeout(d,500):d()}}else o({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:u})},500)}function u(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let r=n.nextNode();for(;r;)t.push(r),r=n.nextNode();return t}function h(e,t,n){const r=u(e),i=u(t);if(r.length===i.length)for(let s=0;s<r.length;s++){const e=r[s],t=i[s],o=e.shadowRoot;if(null!==o){const e=t.attachShadow({mode:o.mode});e.innerHTML=o.innerHTML,h(o,e,n)}}else o({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:n})}const d='\n    @page {\n        /* Remove browser default header (title) and footer (url) */\n        margin: 0;\n    }\n    @media print {\n        body {\n            /* Tell browsers to print background colors */\n            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */\n            print-color-adjust: exact; /* Firefox/Safari */\n            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n        }\n    }\n';function f(e,t,n,r){var i,s,a,u,f;const{contentNode:p,clonedContentNode:g,clonedImgNodes:m,clonedVideoNodes:y,numResourcesToLoad:v,originalCanvasNodes:w}=n,{bodyClass:b,fonts:_,ignoreGlobalStyles:E,pageStyle:C,nonce:S,suppressErrors:A,copyShadowRoots:I}=r;e.onload=null;const T=null!==(i=e.contentDocument)&&void 0!==i?i:null===(s=e.contentWindow)||void 0===s?void 0:s.document;if(T){const n=T.body.appendChild(g);I&&h(p,n,!!A),_&&((null===(a=e.contentDocument)||void 0===a?void 0:a.fonts)&&(null===(u=e.contentWindow)||void 0===u?void 0:u.FontFace)?_.forEach(n=>{const r=new FontFace(n.family,n.source,{weight:n.weight,style:n.style});e.contentDocument.fonts.add(r),r.loaded.then(()=>{t(r)}).catch(e=>{t(r,["Failed loading the font:",r,"Load error:",l(e)])})}):(_.forEach(e=>{t(e)}),o({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:A})));const r=null!=C?C:d,i=T.createElement("style");S&&(i.setAttribute("nonce",S),T.head.setAttribute("nonce",S)),i.appendChild(T.createTextNode(r)),T.head.appendChild(i),b&&T.body.classList.add(...b.split(" "));const s=T.querySelectorAll("canvas");for(let e=0;e<w.length;++e){const t=w[e],n=s[e];if(void 0===n){o({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",t],suppressErrors:A});continue}const r=n.getContext("2d");r&&r.drawImage(t,0,0)}for(let e=0;e<m.length;e++){const n=m[e],r=n.getAttribute("src");if(r){const e=new Image;e.onload=()=>{t(n)},e.onerror=(e,r,i,s,o)=>{t(n,["Error loading <img>",n,"Error",o])},e.src=r}else t(n,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',n])}for(let e=0;e<y.length;e++){const n=y[e];n.preload="auto";const r=n.getAttribute("poster");if(r){const e=new Image;e.onload=()=>{t(n)},e.onerror=(e,i,s,o,a)=>{t(n,["Error loading video poster",r,"for video",n,"Error:",a])},e.src=r}else n.readyState>=2?t(n):n.src?(n.onloadeddata=()=>{t(n)},n.onerror=(e,r,i,s,o)=>{t(n,["Error loading video",n,"Error",o])},n.onstalled=()=>{t(n,["Loading video stalled, skipping",n])}):t(n,["Error loading video, `src` is empty",n])}const c="select",v=p.querySelectorAll(c),x=T.querySelectorAll(c);for(let e=0;e<v.length;e++)x[e].value=v[e].value;if(!E){const n=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let r=0,i=n.length;r<i;++r){const i=n[r];if("style"===i.tagName.toLowerCase()){const t=T.createElement(i.tagName),n=i.sheet;if(n){let s="";try{const e=n.cssRules.length;for(let t=0;t<e;++t)"string"==typeof n.cssRules[t].cssText&&(s+="".concat(n.cssRules[t].cssText,"\r\n"))}catch(e){o({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",i,"Original error: ".concat(l(e).message)],level:"warning"})}t.setAttribute("id","react-to-print-".concat(r)),S&&t.setAttribute("nonce",S),t.appendChild(T.createTextNode(s)),T.head.appendChild(t)}}else if(i.getAttribute("href"))if(i.hasAttribute("disabled"))o({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",i],level:"warning"}),t(i);else{const e=T.createElement(i.tagName);for(let t=0,n=i.attributes.length;t<n;++t){const n=i.attributes[t];n&&e.setAttribute(n.nodeName,null!==(f=n.nodeValue)&&void 0!==f?f:"")}e.onload=()=>{t(e)},e.onerror=(n,r,i,s,o)=>{t(e,["Failed to load",e,"Error:",o])},S&&e.setAttribute("nonce",S),T.head.appendChild(e)}else o({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",i],level:"warning"}),t(i)}}}0===v&&c(e,r)}function p(e){let{bodyClass:t,contentRef:n,copyShadowRoots:r,documentTitle:i,fonts:u,ignoreGlobalStyles:h,nonce:d,onAfterPrint:p,onBeforePrint:g,onPrintError:m,pageStyle:y,preserveAfterPrint:v,print:w,suppressErrors:b}=e;return(0,s.useCallback)(e=>{function s(){const s={bodyClass:t,contentRef:n,copyShadowRoots:r,documentTitle:i,fonts:u,ignoreGlobalStyles:h,nonce:d,onAfterPrint:p,onBeforePrint:g,onPrintError:m,pageStyle:y,preserveAfterPrint:v,print:w,suppressErrors:b},a=function(){const e=document.createElement("iframe");return e.width="".concat(document.documentElement.clientWidth,"px"),e.height="".concat(document.documentElement.clientHeight,"px"),e.style.position="absolute",e.style.top="-".concat(document.documentElement.clientHeight+100,"px"),e.style.left="-".concat(document.documentElement.clientWidth+100,"px"),e.id="printWindow",e.srcdoc="<!DOCTYPE html>",e}(),l=function(e,t){const{contentRef:n,fonts:r,ignoreGlobalStyles:i,suppressErrors:s}=t,a=function(e){let{contentRef:t,optionalContent:n,suppressErrors:r}=e;return n&&"function"==typeof n?(t&&o({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),n()):t?t.current:void o({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:r})}({contentRef:n,optionalContent:e,suppressErrors:s});if(!a)return;const l=a.cloneNode(!0),c=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),u=l.querySelectorAll("img"),h=l.querySelectorAll("video"),d=r?r.length:0;return{contentNode:a,clonedContentNode:l,clonedImgNodes:u,clonedVideoNodes:h,numResourcesToLoad:(i?0:c.length)+u.length+h.length+d,originalCanvasNodes:a.querySelectorAll("canvas")}}(e,s);if(!l)return void o({messages:["There is nothing to print"],suppressErrors:b});const _=function(e,t,n){const{suppressErrors:r}=e,i=[],s=[];return function(a,l){i.includes(a)?o({level:"debug",messages:["Tried to mark a resource that has already been handled",a],suppressErrors:r}):(l?(o({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...l],suppressErrors:r}),s.push(a)):i.push(a),i.length+s.length===t&&c(n,e))}}(s,l.numResourcesToLoad,a);!function(e,t,n,r){e.onload=()=>{f(e,t,n,r)},document.body.appendChild(e)}(a,_,l,s)}a(v,!0),g?g().then(()=>{s()}).catch(e=>{null==m||m("onBeforePrint",l(e))}):s()},[t,n,r,i,u,h,d,p,g,m,y,v,w,b])}return i}())},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,g(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function S(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function x(){}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return N((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+T(e,0):s,_(o)?(i="",null!=u&&(i=u.replace(I,"$&/")+"/"),N(o,t,i,"",function(e){return e})):null!=o&&(A(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+u,o=S(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var h,p=""===s?".":s+":";if(_(e))for(var g=0;g<e.length;g++)u+=N(s=e[g],t,i,a=p+T(s,g),o);else if("function"===typeof(g=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=g.call(e),g=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,a=p+T(s,g++),o);else if("object"===a){if("function"===typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(x,x):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function k(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!C.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return S(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)C.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return S(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),i=E.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(M,D)}catch(s){D(s)}finally{E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=E.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},440:e=>{"use strict";var t=function(){};e.exports=t},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,o,a],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(m=!1,_(e),!g)if(null!==r(c))g=!0,S||(S=!0,C());else{var t=r(u);null!==t&&D(E,t.startTime-e)}}var C,S=!1,A=-1,I=5,T=-1;function x(){return!!y||!(t.unstable_now()-T<I)}function N(){if(y=!1,S){var e=t.unstable_now();T=e;var n=!0;try{e:{g=!1,m&&(m=!1,w(A),A=-1),p=!0;var s=f;try{t:{for(_(e),d=r(c);null!==d&&!(d.expirationTime>e&&x());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,_(e),n=!0;break t}d===r(c)&&i(c),_(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&D(E,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?C():S=!1}}}if("function"===typeof b)C=function(){b(N)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,R=k.port2;k.port1.onmessage=N,C=function(){R.postMessage(null)}}else C=function(){v(N,0)};function D(e,n){A=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(w(A),A=-1):m=!0,D(E,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,S||(S=!0,C()))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".b378b1b1.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="stock-control-app:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/control-stock-limpieza/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkstock_control_app=self.webpackChunkstock_control_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391);function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function i(e,t){if(null==e)return{};var n,i,s=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=n(139),h=n.n(u),d=n(579);const f=["xxl","xl","lg","md","sm","xs"],p="xs",g=e.createContext({prefixes:{},breakpoints:f,minBreakpoint:p}),{Consumer:m,Provider:y}=g;function v(t,n){const{prefixes:r}=(0,e.useContext)(g);return t||r[n]||n}function w(){const{breakpoints:t}=(0,e.useContext)(g);return t}function b(){const{minBreakpoint:t}=(0,e.useContext)(g);return t}const _=["bsPrefix","fluid","as","className"],E=e.forwardRef((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:s="div",className:o}=e,a=i(e,_);const l=v(n,"container"),u="string"===typeof r?"-".concat(r):"-fluid";return(0,d.jsx)(s,c(c({ref:t},a),{},{className:h()(o,r?"".concat(l).concat(u):l)}))});E.displayName="Container";const C=E,S=["bsPrefix","size","vertical","className","role","as"],A=e.forwardRef((e,t)=>{let{bsPrefix:n,size:r,vertical:s=!1,className:o,role:a="group",as:l="div"}=e,u=i(e,S);const f=v(n,"btn-group");let p=f;return s&&(p="".concat(f,"-vertical")),(0,d.jsx)(l,c(c({},u),{},{ref:t,role:a,className:h()(o,p,r&&"".concat(f,"-").concat(r))}))});A.displayName="ButtonGroup";const I=A,T=["as","disabled"];function x(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:o,onClick:a,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const N=e.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,T);const[s,{tagName:o}]=x(Object.assign({tagName:n,disabled:r},i));return(0,d.jsx)(o,Object.assign({},i,s,{ref:t}))});N.displayName="Button";const k=N,R=["as","bsPrefix","variant","size","active","disabled","className"],D=e.forwardRef((e,t)=>{let{as:n,bsPrefix:r,variant:s="primary",size:o,active:a=!1,disabled:l=!1,className:u}=e,f=i(e,R);const p=v(r,"btn"),[g,{tagName:m}]=x(c({tagName:n,disabled:l},f)),y=m;return(0,d.jsx)(y,c(c(c({},g),f),{},{ref:t,disabled:l,className:h()(u,p,a&&"active",s&&"".concat(p,"-").concat(s),o&&"".concat(p,"-").concat(o),f.href&&l&&"disabled")}))});D.displayName="Button";const M=D;var O=n(173),P=n.n(O);const L=["as","className","type","tooltip"],F={type:P().string,tooltip:P().bool,as:P().elementType},B=e.forwardRef((e,t)=>{let{as:n="div",className:r,type:s="valid",tooltip:o=!1}=e,a=i(e,L);return(0,d.jsx)(n,c(c({},a),{},{ref:t,className:h()(r,"".concat(s,"-").concat(o?"tooltip":"feedback"))}))});B.displayName="Feedback",B.propTypes=F;const j=B,U=e.createContext({}),V=["id","bsPrefix","className","type","isValid","isInvalid","as"],z=e.forwardRef((t,n)=>{let{id:r,bsPrefix:s,className:o,type:a="checkbox",isValid:l=!1,isInvalid:u=!1,as:f="input"}=t,p=i(t,V);const{controlId:g}=(0,e.useContext)(U);return s=v(s,"form-check-input"),(0,d.jsx)(f,c(c({},p),{},{ref:n,type:a,id:r||g,className:h()(o,s,l&&"is-valid",u&&"is-invalid")}))});z.displayName="FormCheckInput";const H=z,W=["bsPrefix","className","htmlFor"],G=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,htmlFor:o}=t,a=i(t,W);const{controlId:l}=(0,e.useContext)(U);return r=v(r,"form-check-label"),(0,d.jsx)("label",c(c({},a),{},{ref:n,htmlFor:o||l,className:h()(s,r)}))});G.displayName="FormCheckLabel";const q=G;const Y=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],X=e.forwardRef((t,n)=>{let{id:r,bsPrefix:s,bsSwitchPrefix:o,inline:a=!1,reverse:l=!1,disabled:u=!1,isValid:f=!1,isInvalid:p=!1,feedbackTooltip:g=!1,feedback:m,feedbackType:y,className:w,style:b,title:_="",type:E="checkbox",label:C,children:S,as:A="input"}=t,I=i(t,Y);s=v(s,"form-check"),o=v(o,"form-switch");const{controlId:T}=(0,e.useContext)(U),x=(0,e.useMemo)(()=>({controlId:r||T}),[T,r]),N=!S&&null!=C&&!1!==C||function(t,n){return e.Children.toArray(t).some(t=>e.isValidElement(t)&&t.type===n)}(S,q),k=(0,d.jsx)(H,c(c({},I),{},{type:"switch"===E?"checkbox":E,ref:n,isValid:f,isInvalid:p,disabled:u,as:A}));return(0,d.jsx)(U.Provider,{value:x,children:(0,d.jsx)("div",{style:b,className:h()(w,N&&s,a&&"".concat(s,"-inline"),l&&"".concat(s,"-reverse"),"switch"===E&&o),children:S||(0,d.jsxs)(d.Fragment,{children:[k,N&&(0,d.jsx)(q,{title:_,children:C}),m&&(0,d.jsx)(j,{type:y,tooltip:g,children:m})]})})})});X.displayName="FormCheck";const K=Object.assign(X,{Input:H,Label:q});n(440);const Q=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],Z=e.forwardRef((t,n)=>{let{bsPrefix:r,type:s,size:o,htmlSize:a,id:l,className:u,isValid:f=!1,isInvalid:p=!1,plaintext:g,readOnly:m,as:y="input"}=t,w=i(t,Q);const{controlId:b}=(0,e.useContext)(U);return r=v(r,"form-control"),(0,d.jsx)(y,c(c({},w),{},{type:s,size:a,ref:n,readOnly:m,id:l||b,className:h()(u,g?"".concat(r,"-plaintext"):r,o&&"".concat(r,"-").concat(o),"color"===s&&"".concat(r,"-color"),f&&"is-valid",p&&"is-invalid")}))});Z.displayName="FormControl";const J=Object.assign(Z,{Feedback:j}),$=["className","bsPrefix","as"],ee=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,$);return r=v(r,"form-floating"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});ee.displayName="FormFloating";const te=ee,ne=["controlId","as"],re=e.forwardRef((t,n)=>{let{controlId:r,as:s="div"}=t,o=i(t,ne);const a=(0,e.useMemo)(()=>({controlId:r}),[r]);return(0,d.jsx)(U.Provider,{value:a,children:(0,d.jsx)(s,c(c({},o),{},{ref:n}))})});re.displayName="FormGroup";const ie=re,se=["as","bsPrefix","className"],oe=["className"];const ae=e.forwardRef((e,t)=>{const[n,{as:r="div",bsPrefix:s,spans:o}]=function(e){let{as:t,bsPrefix:n,className:r}=e,s=i(e,se);n=v(n,"col");const o=w(),a=b(),l=[],u=[];return o.forEach(e=>{const t=s[e];let r,i,o;delete s[e],"object"===typeof t&&null!=t?({span:r,offset:i,order:o}=t):r=t;const c=e!==a?"-".concat(e):"";r&&l.push(!0===r?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(r)),null!=o&&u.push("order".concat(c,"-").concat(o)),null!=i&&u.push("offset".concat(c,"-").concat(i))}),[c(c({},s),{},{className:h()(r,...l,...u)}),{as:t,bsPrefix:n,spans:l}]}(e),{className:a}=n,l=i(n,oe);return(0,d.jsx)(r,c(c({},l),{},{ref:t,className:h()(a,!o.length&&s)}))});ae.displayName="Col";const le=ae,ce=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],ue=e.forwardRef((t,n)=>{let{as:r="label",bsPrefix:s,column:o=!1,visuallyHidden:a=!1,className:l,htmlFor:u}=t,f=i(t,ce);const{controlId:p}=(0,e.useContext)(U);s=v(s,"form-label");let g="col-form-label";"string"===typeof o&&(g="".concat(g," ").concat(g,"-").concat(o));const m=h()(l,s,a&&"visually-hidden",o&&g);return u=u||p,o?(0,d.jsx)(le,c({ref:n,as:"label",className:m,htmlFor:u},f)):(0,d.jsx)(r,c({ref:n,className:m,htmlFor:u},f))});ue.displayName="FormLabel";const he=ue,de=["bsPrefix","className","id"],fe=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,id:o}=t,a=i(t,de);const{controlId:l}=(0,e.useContext)(U);return r=v(r,"form-range"),(0,d.jsx)("input",c(c({},a),{},{type:"range",ref:n,className:h()(s,r),id:o||l}))});fe.displayName="FormRange";const pe=fe,ge=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],me=e.forwardRef((t,n)=>{let{bsPrefix:r,size:s,htmlSize:o,className:a,isValid:l=!1,isInvalid:u=!1,id:f}=t,p=i(t,ge);const{controlId:g}=(0,e.useContext)(U);return r=v(r,"form-select"),(0,d.jsx)("select",c(c({},p),{},{size:o,ref:n,className:h()(a,r,s&&"".concat(r,"-").concat(s),l&&"is-valid",u&&"is-invalid"),id:f||g}))});me.displayName="FormSelect";const ye=me,ve=["bsPrefix","className","as","muted"],we=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s="small",muted:o}=e,a=i(e,ve);return n=v(n,"form-text"),(0,d.jsx)(s,c(c({},a),{},{ref:t,className:h()(r,n,o&&"text-muted")}))});we.displayName="FormText";const be=we,_e=e.forwardRef((e,t)=>(0,d.jsx)(K,c(c({},e),{},{ref:t,type:"switch"})));_e.displayName="Switch";const Ee=Object.assign(_e,{Input:K.Input,Label:K.Label}),Ce=["bsPrefix","className","children","controlId","label"],Se=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,children:s,controlId:o,label:a}=e,l=i(e,Ce);return n=v(n,"form-floating"),(0,d.jsxs)(ie,c(c({ref:t,className:h()(r,n),controlId:o},l),{},{children:[s,(0,d.jsx)("label",{htmlFor:o,children:a})]}))});Se.displayName="FloatingLabel";const Ae=Se,Ie=["className","validated","as"],Te={_ref:P().any,validated:P().bool,as:P().elementType},xe=e.forwardRef((e,t)=>{let{className:n,validated:r,as:s="form"}=e,o=i(e,Ie);return(0,d.jsx)(s,c(c({},o),{},{ref:t,className:h()(n,r&&"was-validated")}))});xe.displayName="Form",xe.propTypes=Te;const Ne=Object.assign(xe,{Group:ie,Control:J,Floating:te,Check:K,Switch:Ee,Label:he,Text:be,Range:pe,Select:ye,FloatingLabel:Ae}),ke=!("undefined"===typeof window||!window.document||!window.document.createElement);var Re=!1,De=!1;try{var Me={get passive(){return Re=!0},get once(){return De=Re=!0}};ke&&(window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,!0))}catch(Vk){}const Oe=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!De){var i=r.once,s=r.capture,o=n;!De&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Re?r:s)}e.addEventListener(t,n,r)};function Pe(e){return e&&e.ownerDocument||document}const Le=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Fe;function Be(e){if((!Fe&&0!==Fe||e)&&ke){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Fe=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Fe}const je=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)(()=>{n.current=t},[t]),n};function Ue(t){const n=je(t);return(0,e.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}const Ve=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const ze=function(t,n){return(0,e.useMemo)(()=>function(e,t){const n=Ve(e),r=Ve(t);return e=>{n&&n(e),r&&r(e)}}(t,n),[t,n])};function He(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)(()=>()=>n.current(),[])}function We(e,t){return function(e){var t=Pe(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Ge=/([A-Z])/g;var qe=/^ms-/;function Ye(e){return function(e){return e.replace(Ge,"-$1").toLowerCase()}(e).replace(qe,"-ms-")}var Xe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const Ke=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(Ye(t))||We(e).getPropertyValue(Ye(t));Object.keys(t).forEach(function(i){var s=t[i];s||0===s?!function(e){return!(!e||!Xe.test(e))}(i)?n+=Ye(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(Ye(i))}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};const Qe=function(e,t,n,r){return Oe(e,t,n,r),function(){Le(e,t,n,r)}};function Ze(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout(function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)},t+n),s=Qe(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function Je(e,t,n,r){null==n&&(n=function(e){var t=Ke(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Ze(e,n,r),s=Qe(e,"transitionend",t);return function(){i(),s()}}function $e(e){void 0===e&&(e=Pe());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(Vk){return e.body}}function et(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var tt=n(950);function nt(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)(()=>()=>n.current(),[])}const rt=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)(()=>{n.current=t},[t]),n};function it(t){const n=rt(t);return(0,e.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}function st(e){return"".concat("data-rr-ui-").concat(e)}const ot=st("modal-open");const at=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(Ke(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(ot,""),Ke(r,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(ot),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},lt=(0,e.createContext)(ke?window:void 0);lt.Provider;function ct(){return(0,e.useContext)(lt)}const ut=(e,t)=>ke?null==e?(t||Pe()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const ht=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const dt=function(t,n){return(0,e.useMemo)(()=>function(e,t){const n=ht(e),r=ht(t);return e=>{n&&n(e),r&&r(e)}}(t,n),[t,n])},ft="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,pt="undefined"!==typeof document||ft?e.useLayoutEffect:e.useEffect;function gt(t){if(!t||"function"===typeof t)return null;const{major:n}=function(){const t=e.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}();return n>=19?t.props.ref:t.ref}const mt=function(t){let{children:n,in:r,onExited:i,mountOnEnter:s,unmountOnExit:o}=t;const a=(0,e.useRef)(null),l=(0,e.useRef)(r),c=it(i);(0,e.useEffect)(()=>{r?l.current=!0:c(a.current)},[r,c]);const u=dt(a,gt(n)),h=(0,e.cloneElement)(n,{ref:u});return r?h:o||!l.current&&s?null:h},yt=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const vt=["component"];const wt=e.forwardRef((t,n)=>{let{component:r}=t;const i=function(t){let{onEnter:n,onEntering:r,onEntered:i,onExit:s,onExiting:o,onExited:a,addEndListener:l,children:c}=t,u=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,yt);const h=(0,e.useRef)(null),d=dt(h,gt(c)),f=e=>t=>{e&&h.current&&e(h.current,t)},p=(0,e.useCallback)(f(n),[n]),g=(0,e.useCallback)(f(r),[r]),m=(0,e.useCallback)(f(i),[i]),y=(0,e.useCallback)(f(s),[s]),v=(0,e.useCallback)(f(o),[o]),w=(0,e.useCallback)(f(a),[a]),b=(0,e.useCallback)(f(l),[l]);return Object.assign({},u,{nodeRef:h},n&&{onEnter:p},r&&{onEntering:g},i&&{onEntered:m},s&&{onExit:y},o&&{onExiting:v},a&&{onExited:w},l&&{addEndListener:b},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:d})):(0,e.cloneElement)(c,{ref:d})})}(function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,vt));return(0,d.jsx)(r,Object.assign({ref:n},i))}),bt=wt;function _t(t){let{children:n,in:r,onExited:i,onEntered:s,transition:o}=t;const[a,l]=(0,e.useState)(!r);r&&a&&l(!1);const c=function(t){let{in:n,onTransition:r}=t;const i=(0,e.useRef)(null),s=(0,e.useRef)(!0),o=it(r);return pt(()=>{if(!i.current)return;let e=!1;return o({in:n,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}},[n,o]),pt(()=>(s.current=!1,()=>{s.current=!0}),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(o(e)).then(()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==i||i(e.element)))},t=>{throw e.in||l(!0),t})}}),u=dt(c,gt(n));return a&&!r?null:(0,e.cloneElement)(n,{ref:u})}function Et(e,t,n){return e?(0,d.jsx)(bt,Object.assign({},n,{component:e})):t?(0,d.jsx)(_t,Object.assign({},n,{transition:t})):(0,d.jsx)(mt,Object.assign({},n))}const Ct=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let St;function At(t){const n=ct(),r=t||function(e){return St||(St=new at({ownerDocument:null==e?void 0:e.document})),St}(n),i=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,e.useCallback)(e=>{i.current.dialog=e},[]),setBackdropRef:(0,e.useCallback)(e=>{i.current.backdrop=e},[])})}const It=(0,e.forwardRef)((t,n)=>{let{show:r=!1,role:i="dialog",className:s,style:o,children:a,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:f,runTransition:p,backdropTransition:g,runBackdropTransition:m,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:w=!0,restoreFocusOptions:b,renderDialog:_,renderBackdrop:E=e=>(0,d.jsx)("div",Object.assign({},e)),manager:C,container:S,onShow:A,onHide:I=()=>{},onExit:T,onExited:x,onExiting:N,onEnter:k,onEntering:R,onEntered:D}=t,M=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,Ct);const O=ct(),P=function(t,n){const r=ct(),[i,s]=(0,e.useState)(()=>ut(t,null==r?void 0:r.document));if(!i){const e=ut(t);e&&s(e)}return(0,e.useEffect)(()=>{n&&i&&n(i)},[n,i]),(0,e.useEffect)(()=>{const e=ut(t);e!==i&&s(e)},[t,i]),i}(S),L=At(C),F=function(){const t=(0,e.useRef)(!0),n=(0,e.useRef)(()=>t.current);return(0,e.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),n.current}(),B=function(t){const n=(0,e.useRef)(null);return(0,e.useEffect)(()=>{n.current=t}),n.current}(r),[j,U]=(0,e.useState)(!r),V=(0,e.useRef)(null);(0,e.useImperativeHandle)(n,()=>L,[L]),ke&&!B&&r&&(V.current=$e(null==O?void 0:O.document)),r&&j&&U(!1);const z=it(()=>{if(L.add(),X.current=Qe(document,"keydown",q),Y.current=Qe(document,"focus",()=>setTimeout(W),!0),A&&A(),y){var e,t;const n=$e(null!=(e=null==(t=L.dialog)?void 0:t.ownerDocument)?e:null==O?void 0:O.document);L.dialog&&n&&!et(L.dialog,n)&&(V.current=n,L.dialog.focus())}}),H=it(()=>{var e;(L.remove(),null==X.current||X.current(),null==Y.current||Y.current(),w)&&(null==(e=V.current)||null==e.focus||e.focus(b),V.current=null)});(0,e.useEffect)(()=>{r&&P&&z()},[r,P,z]),(0,e.useEffect)(()=>{j&&H()},[j,H]),nt(()=>{H()});const W=it(()=>{if(!v||!F()||!L.isTopModal())return;const e=$e(null==O?void 0:O.document);L.dialog&&e&&!et(L.dialog,e)&&L.dialog.focus()}),G=it(e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&I())}),q=it(e=>{c&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&L.isTopModal()&&(null==h||h(e),e.defaultPrevented||I())}),Y=(0,e.useRef)(),X=(0,e.useRef)();if(!P)return null;const K=Object.assign({role:i,ref:L.setDialogRef,"aria-modal":"dialog"===i||void 0},M,{style:o,className:s,tabIndex:-1});let Q=_?_(K):(0,d.jsx)("div",Object.assign({},K,{children:e.cloneElement(a,{role:"document"})}));Q=Et(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:T,onExiting:N,onExited:function(){U(!0),null==x||x(...arguments)},onEnter:k,onEntering:R,onEntered:D,children:Q});let Z=null;return l&&(Z=E({ref:L.setBackdropRef,onClick:G}),Z=Et(g,m,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Z})),(0,d.jsx)(d.Fragment,{children:tt.createPortal((0,d.jsxs)(d.Fragment,{children:[Z,Q]}),P)})});It.displayName="Modal";const Tt=Object.assign(It,{Manager:at});var xt=Function.prototype.bind.call(Function.prototype.call,[].slice);function Nt(e,t){return xt(e.querySelectorAll(t))}function kt(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Rt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Dt=".sticky-top",Mt=".navbar-toggler";class Ot extends at{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,Ke(t,{[e]:"".concat(parseFloat(Ke(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],Ke(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Nt(t,Rt).forEach(t=>this.adjustAndStore(i,t,e.scrollBarWidth)),Nt(t,Dt).forEach(t=>this.adjustAndStore(s,t,-e.scrollBarWidth)),Nt(t,Mt).forEach(t=>this.adjustAndStore(s,t,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=kt(n.className,r):n.setAttribute("class",kt(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Nt(t,Rt).forEach(e=>this.restore(i,e)),Nt(t,Dt).forEach(e=>this.restore(s,e)),Nt(t,Mt).forEach(e=>this.restore(s,e))}}let Pt;function Lt(e){return Pt||(Pt=new Ot(e)),Pt}const Ft=Ot;function Bt(e,t){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bt(e,t)}const jt=!1,Ut=e.createContext(null);var Vt="unmounted",zt="exited",Ht="entering",Wt="entered",Gt="exiting",qt=function(t){var n,i;function s(e,n){var r;r=t.call(this,e,n)||this;var i,s=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?s?(i=zt,r.appearStatus=Ht):i=Wt:i=e.unmountOnExit||e.mountOnEnter?Vt:zt,r.state={status:i},r.nextCallback=null,r}i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,Bt(n,i),s.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Vt?{status:zt}:null};var o=s.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ht&&n!==Wt&&(t=Ht):n!==Ht&&n!==Wt||(t=Gt)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ht){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:tt.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===zt&&this.setState({status:Vt})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[tt.findDOMNode(this),r],s=i[0],o=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||jt?this.safeSetState({status:Wt},function(){t.props.onEntered(s)}):(this.props.onEnter(s,o),this.safeSetState({status:Ht},function(){t.props.onEntering(s,o),t.onTransitionEnd(l,function(){t.safeSetState({status:Wt},function(){t.props.onEntered(s,o)})})}))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:tt.findDOMNode(this);t&&!jt?(this.props.onExit(r),this.safeSetState({status:Gt},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:zt},function(){e.props.onExited(r)})})})):this.safeSetState({status:zt},function(){e.props.onExited(r)})},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:tt.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var t=this.state.status;if(t===Vt)return null;var n=this.props,i=n.children,s=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,r(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Ut.Provider,{value:null},"function"===typeof i?i(t,s):e.cloneElement(e.Children.only(i),s))},s}(e.Component);function Yt(){}qt.contextType=Ut,qt.propTypes={},qt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Yt,onEntering:Yt,onEntered:Yt,onExit:Yt,onExiting:Yt,onExited:Yt},qt.UNMOUNTED=Vt,qt.EXITED=zt,qt.ENTERING=Ht,qt.ENTERED=Wt,qt.EXITING=Gt;const Xt=qt;function Kt(e,t){const n=Ke(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Qt(e,t){const n=Kt(e,"transitionDuration"),r=Kt(e,"transitionDelay"),i=Je(e,n=>{n.target===e&&(i(),t(n))},n+r)}function Zt(e){e.offsetHeight}const Jt=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],$t=e.forwardRef((t,n)=>{let{onEnter:r,onEntering:s,onEntered:o,onExit:a,onExiting:l,onExited:u,addEndListener:h,children:f,childRef:p}=t,g=i(t,Jt);const m=(0,e.useRef)(null),y=ze(m,p),v=e=>{var t;y((t=e)&&"setState"in t?tt.findDOMNode(t):null!=t?t:null)},w=e=>t=>{e&&m.current&&e(m.current,t)},b=(0,e.useCallback)(w(r),[r]),_=(0,e.useCallback)(w(s),[s]),E=(0,e.useCallback)(w(o),[o]),C=(0,e.useCallback)(w(a),[a]),S=(0,e.useCallback)(w(l),[l]),A=(0,e.useCallback)(w(u),[u]),I=(0,e.useCallback)(w(h),[h]);return(0,d.jsx)(Xt,c(c({ref:n},g),{},{onEnter:b,onEntered:E,onEntering:_,onExit:C,onExited:A,onExiting:S,addEndListener:I,nodeRef:m,children:"function"===typeof f?(e,t)=>f(e,c(c({},t),{},{ref:v})):e.cloneElement(f,{ref:v})}))});$t.displayName="TransitionWrapper";const en=$t,tn=["className","children","transitionClasses","onEnter"],nn={[Ht]:"show",[Wt]:"show"},rn=e.forwardRef((t,n)=>{let{className:r,children:s,transitionClasses:o={},onEnter:a}=t;const l=c({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},i(t,tn)),u=(0,e.useCallback)((e,t)=>{Zt(e),null==a||a(e,t)},[a]);return(0,d.jsx)(en,c(c({ref:n,addEndListener:Qt},l),{},{onEnter:u,childRef:gt(s),children:(t,n)=>e.cloneElement(s,c(c({},n),{},{className:h()("fade",r,s.props.className,nn[t],o[t])}))}))});rn.displayName="Fade";const sn=rn,on=["className","bsPrefix","as"],an=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,on);return r=v(r,"modal-body"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});an.displayName="ModalBody";const ln=an,cn=e.createContext({onHide(){}}),un=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],hn=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,contentClassName:s,centered:o,size:a,fullscreen:l,children:u,scrollable:f}=e,p=i(e,un);n=v(n,"modal");const g="".concat(n,"-dialog"),m="string"===typeof l?"".concat(n,"-fullscreen-").concat(l):"".concat(n,"-fullscreen");return(0,d.jsx)("div",c(c({},p),{},{ref:t,className:h()(g,r,a&&"".concat(n,"-").concat(a),o&&"".concat(g,"-centered"),f&&"".concat(g,"-scrollable"),l&&m),children:(0,d.jsx)("div",{className:h()("".concat(n,"-content"),s),children:u})}))});hn.displayName="ModalDialog";const dn=hn,fn=["className","bsPrefix","as"],pn=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,fn);return r=v(r,"modal-footer"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});pn.displayName="ModalFooter";const gn=pn,mn=["className","variant","aria-label"],yn={"aria-label":P().string,onClick:P().func,variant:P().oneOf(["white"])},vn=e.forwardRef((e,t)=>{let{className:n,variant:r,"aria-label":s="Close"}=e,o=i(e,mn);return(0,d.jsx)("button",c({ref:t,type:"button",className:h()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":s},o))});vn.displayName="CloseButton",vn.propTypes=yn;const wn=vn,bn=["closeLabel","closeVariant","closeButton","onHide","children"],_n=e.forwardRef((t,n)=>{let{closeLabel:r="Close",closeVariant:s,closeButton:o=!1,onHide:a,children:l}=t,u=i(t,bn);const h=(0,e.useContext)(cn),f=Ue(()=>{null==h||h.onHide(),null==a||a()});return(0,d.jsxs)("div",c(c({ref:n},u),{},{children:[l,o&&(0,d.jsx)(wn,{"aria-label":r,variant:s,onClick:f})]}))});_n.displayName="AbstractModalHeader";const En=_n,Cn=["bsPrefix","className","closeLabel","closeButton"],Sn=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,closeLabel:s="Close",closeButton:o=!1}=e,a=i(e,Cn);return n=v(n,"modal-header"),(0,d.jsx)(En,c(c({ref:t},a),{},{className:h()(r,n),closeLabel:s,closeButton:o}))});Sn.displayName="ModalHeader";const An=Sn,In=t=>e.forwardRef((e,n)=>(0,d.jsx)("div",c(c({},e),{},{ref:n,className:h()(e.className,t)}))),Tn=["className","bsPrefix","as"],xn=In("h4"),Nn=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=xn}=e,o=i(e,Tn);return r=v(r,"modal-title"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});Nn.displayName="ModalTitle";const kn=Nn,Rn=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Dn(e){return(0,d.jsx)(sn,c(c({},e),{},{timeout:null}))}function Mn(e){return(0,d.jsx)(sn,c(c({},e),{},{timeout:null}))}const On=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,style:o,dialogClassName:a,contentClassName:l,children:u,dialogAs:f=dn,"data-bs-theme":p,"aria-labelledby":m,"aria-describedby":y,"aria-label":w,show:b=!1,animation:_=!0,backdrop:E=!0,keyboard:C=!0,onEscapeKeyDown:S,onShow:A,onHide:I,container:T,autoFocus:x=!0,enforceFocus:N=!0,restoreFocus:k=!0,restoreFocusOptions:R,onEntered:D,onExit:M,onExiting:O,onEnter:P,onEntering:L,onExited:F,backdropClassName:B,manager:j}=t,U=i(t,Rn);const[V,z]=(0,e.useState)({}),[H,W]=(0,e.useState)(!1),G=(0,e.useRef)(!1),q=(0,e.useRef)(!1),Y=(0,e.useRef)(null),[X,K]=(0,e.useState)(null),Q=ze(n,K),Z=Ue(I),J=function(){const{dir:t}=(0,e.useContext)(g);return"rtl"===t}();r=v(r,"modal");const $=(0,e.useMemo)(()=>({onHide:Z}),[Z]);function ee(){return j||Lt({isRTL:J})}function te(e){if(!ke)return;const t=ee().getScrollbarWidth()>0,n=e.scrollHeight>Pe(e).documentElement.clientHeight;z({paddingRight:t&&!n?Be():void 0,paddingLeft:!t&&n?Be():void 0})}const ne=Ue(()=>{X&&te(X.dialog)});He(()=>{Le(window,"resize",ne),null==Y.current||Y.current()});const re=()=>{G.current=!0},ie=e=>{G.current&&X&&e.target===X.dialog&&(q.current=!0),G.current=!1},se=()=>{W(!0),Y.current=Je(X.dialog,()=>{W(!1)})},oe=e=>{"static"!==E?q.current||e.target!==e.currentTarget?q.current=!1:null==I||I():(e=>{e.target===e.currentTarget&&se()})(e)},ae=(0,e.useCallback)(e=>(0,d.jsx)("div",c(c({},e),{},{className:h()("".concat(r,"-backdrop"),B,!_&&"show")})),[_,B,r]),le=c(c({},o),V);le.display="block";return(0,d.jsx)(cn.Provider,{value:$,children:(0,d.jsx)(Tt,{show:b,ref:Q,backdrop:E,container:T,keyboard:!0,autoFocus:x,enforceFocus:N,restoreFocus:k,restoreFocusOptions:R,onEscapeKeyDown:e=>{C?null==S||S(e):(e.preventDefault(),"static"===E&&se())},onShow:A,onHide:I,onEnter:(e,t)=>{e&&te(e),null==P||P(e,t)},onEntering:(e,t)=>{null==L||L(e,t),Oe(window,"resize",ne)},onEntered:D,onExit:e=>{null==Y.current||Y.current(),null==M||M(e)},onExiting:O,onExited:e=>{e&&(e.style.display=""),null==F||F(e),Le(window,"resize",ne)},manager:ee(),transition:_?Dn:void 0,backdropTransition:_?Mn:void 0,renderBackdrop:ae,renderDialog:e=>(0,d.jsx)("div",c(c({role:"dialog"},e),{},{style:le,className:h()(s,r,H&&"".concat(r,"-static"),!_&&"show"),onClick:E?oe:void 0,onMouseUp:ie,"data-bs-theme":p,"aria-label":w,"aria-labelledby":m,"aria-describedby":y,children:(0,d.jsx)(f,c(c({},U),{},{onMouseDown:re,className:a,contentClassName:l,children:u}))}))})})});On.displayName="Modal";const Pn=Object.assign(On,{Body:ln,Header:An,Title:kn,Footer:gn,Dialog:dn,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Ln=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Fn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ln(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Bn;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Bn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jn=function(e){return function(e){const t=Ln(e);return Fn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Un=function(e){try{return Fn.decodeString(e,!0)}catch(Vk){console.error("base64Decode failed: ",Vk)}return null};function Vn(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const zn=()=>{try{return Vn().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/control-stock-limpieza",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Vk){return}const t=e&&Un(e[1]);return t&&JSON.parse(t)})()}catch(Vk){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Vk))}},Hn=e=>{var t;return null===(t=zn())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Wn=()=>{var e;return null===(e=zn())||void 0===e?void 0:e.config},Gn=e=>{var t;return null===(t=zn())||void 0===t?void 0:t["_".concat(e)]};class qn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Yn(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Xn(e){return(await fetch(e,{credentials:"include"})).ok}const Kn={};let Qn=!1;function Zn(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Yn(window.location.host)||Kn[e]===t||Kn[e]||Qn)return;function n(e){return"__firebase__banner__".concat(e)}Kn[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Kn))Kn[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Qn=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Jn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function $n(){var e;const t=null===(e=zn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Vk){return!1}}function er(){return!$n()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tr(){try{return"object"===typeof indexedDB}catch(Vk){return!1}}class nr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}}class rr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ir,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new nr(n,s,t)}}const ir=/\{\$([^}]+)}/g;function sr(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(or(n)&&or(s)){if(!sr(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function or(e){return null!==e&&"object"===typeof e}function ar(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function lr(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function cr(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ur{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=hr),void 0===r.error&&(r.error=hr),void 0===r.complete&&(r.complete=hr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Vk){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Vk){"undefined"!==typeof console&&console.error&&console.error(Vk)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hr(){}function dr(e){return e&&e._delegate?e._delegate:e}class fr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pr="[DEFAULT]";class gr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new qn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Vk){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Vk){if(r)return null;throw Vk}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch(Vk){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Vk){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===pr?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr;return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class mr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const yr=[];var vr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(vr||(vr={}));const wr={debug:vr.DEBUG,verbose:vr.VERBOSE,info:vr.INFO,warn:vr.WARN,error:vr.ERROR,silent:vr.SILENT},br=vr.INFO,_r={[vr.DEBUG]:"log",[vr.VERBOSE]:"log",[vr.INFO]:"info",[vr.WARN]:"warn",[vr.ERROR]:"error"},Er=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=_r[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Cr{constructor(e){this.name=e,this._logLevel=br,this._logHandler=Er,this._userLogHandler=null,yr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?wr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vr.DEBUG,...t),this._logHandler(this,vr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vr.VERBOSE,...t),this._logHandler(this,vr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vr.INFO,...t),this._logHandler(this,vr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vr.WARN,...t),this._logHandler(this,vr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vr.ERROR,...t),this._logHandler(this,vr.ERROR,...t)}}let Sr,Ar;const Ir=new WeakMap,Tr=new WeakMap,xr=new WeakMap,Nr=new WeakMap,kr=new WeakMap;let Rr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Tr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Dr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ar||(Ar=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Pr(this),n),Or(Ir.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Or(e.apply(Pr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Pr(this),t,...r);return xr.set(s,t.sort?t.sort():[t]),Or(s)}}function Mr(e){return"function"===typeof e?Dr(e):(e instanceof IDBTransaction&&function(e){if(Tr.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Tr.set(e,t)}(e),t=e,(Sr||(Sr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Rr):e);var t}function Or(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Or(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Ir.set(t,e)}).catch(()=>{}),kr.set(t,e),t}(e);if(Nr.has(e))return Nr.get(e);const t=Mr(e);return t!==e&&(Nr.set(e,t),kr.set(t,e)),t}const Pr=e=>kr.get(e);const Lr=["get","getKey","getAll","getAllKeys","count"],Fr=["put","add","delete","clear"],Br=new Map;function jr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Br.get(t))return Br.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Fr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Lr.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Br.set(t,s),s}!function(e){Rr=e(Rr)}(e=>c(c({},e),{},{get:(t,n,r)=>jr(t,n)||e.get(t,n,r),has:(t,n)=>!!jr(t,n)||e.has(t,n)}));class Ur{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Vr="@firebase/app",zr="0.14.2",Hr=new Cr("@firebase/app"),Wr="@firebase/app-compat",Gr="@firebase/analytics-compat",qr="@firebase/analytics",Yr="@firebase/app-check-compat",Xr="@firebase/app-check",Kr="@firebase/auth",Qr="@firebase/auth-compat",Zr="@firebase/database",Jr="@firebase/data-connect",$r="@firebase/database-compat",ei="@firebase/functions",ti="@firebase/functions-compat",ni="@firebase/installations",ri="@firebase/installations-compat",ii="@firebase/messaging",si="@firebase/messaging-compat",oi="@firebase/performance",ai="@firebase/performance-compat",li="@firebase/remote-config",ci="@firebase/remote-config-compat",ui="@firebase/storage",hi="@firebase/storage-compat",di="@firebase/firestore",fi="@firebase/ai",pi="@firebase/firestore-compat",gi="firebase",mi="[DEFAULT]",yi={[Vr]:"fire-core",[Wr]:"fire-core-compat",[qr]:"fire-analytics",[Gr]:"fire-analytics-compat",[Xr]:"fire-app-check",[Yr]:"fire-app-check-compat",[Kr]:"fire-auth",[Qr]:"fire-auth-compat",[Zr]:"fire-rtdb",[Jr]:"fire-data-connect",[$r]:"fire-rtdb-compat",[ei]:"fire-fn",[ti]:"fire-fn-compat",[ni]:"fire-iid",[ri]:"fire-iid-compat",[ii]:"fire-fcm",[si]:"fire-fcm-compat",[oi]:"fire-perf",[ai]:"fire-perf-compat",[li]:"fire-rc",[ci]:"fire-rc-compat",[ui]:"fire-gcs",[hi]:"fire-gcs-compat",[di]:"fire-fst",[pi]:"fire-fst-compat",[fi]:"fire-vertex","fire-js":"fire-js",[gi]:"fire-js-all"},vi=new Map,wi=new Map,bi=new Map;function _i(e,t){try{e.container.addComponent(t)}catch(Vk){Hr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Vk)}}function Ei(e){const t=e.name;if(bi.has(t))return Hr.debug("There were multiple attempts to register component ".concat(t,".")),!1;bi.set(t,e);for(const n of vi.values())_i(n,e);for(const n of wi.values())_i(n,e);return!0}function Ci(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Si(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Ai=new rr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ii{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}const Ti="12.2.0";function xi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:mi,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Ai.create("bad-app-name",{appName:String(i)});if(n||(n=Wn()),!n)throw Ai.create("no-options");const s=vi.get(i);if(s){if(sr(n,s.options)&&sr(r,s.config))return s;throw Ai.create("duplicate-app",{appName:i})}const o=new mr(i);for(const l of bi.values())o.addComponent(l);const a=new Ii(n,r,o);return vi.set(i,a),a}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi;const t=vi.get(e);if(!t&&e===mi&&Wn())return xi();if(!t)throw Ai.create("no-app",{appName:e});return t}function ki(e,t,n){var r;let i=null!==(r=yi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Hr.warn(e.join(" "))}Ei(new fr("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Ri="firebase-heartbeat-store";let Di=null;function Mi(){return Di||(Di=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Or(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Or(o.result),e.oldVersion,e.newVersion,Or(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ri)}catch(Vk){console.warn(Vk)}}}).catch(e=>{throw Ai.create("idb-open",{originalErrorMessage:e.message})})),Di}async function Oi(e,t){try{const n=(await Mi()).transaction(Ri,"readwrite"),r=n.objectStore(Ri);await r.put(t,Pi(e)),await n.done}catch(Vk){if(Vk instanceof nr)Hr.warn(Vk.message);else{const t=Ai.create("idb-set",{originalErrorMessage:null===Vk||void 0===Vk?void 0:Vk.message});Hr.warn(t.message)}}}function Pi(e){return"".concat(e.name,"!").concat(e.options.appId)}class Li{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bi(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fi();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Vk){Hr.warn(Vk)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Fi(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ji(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ji(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=jn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Vk){return Hr.warn(Vk),""}}}function Fi(){return(new Date).toISOString().substring(0,10)}class Bi{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!tr()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Mi()).transaction(Ri),n=await t.objectStore(Ri).get(Pi(e));return await t.done,n}catch(Vk){if(Vk instanceof nr)Hr.warn(Vk.message);else{const t=Ai.create("idb-get",{originalErrorMessage:null===Vk||void 0===Vk?void 0:Vk.message});Hr.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Oi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Oi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ji(e){return jn(JSON.stringify({version:2,heartbeats:e})).length}var Ui;Ui="",Ei(new fr("platform-logger",e=>new Ur(e),"PRIVATE")),Ei(new fr("heartbeat",e=>new Li(e),"PRIVATE")),ki(Vr,zr,Ui),ki(Vr,zr,"esm2020"),ki("fire-js","");var Vi,zi,Hi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Wi={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,zi=Wi.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Vi=Wi.Integer=r}).apply("undefined"!==typeof Hi?Hi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Gi,qi,Yi,Xi,Ki,Qi,Zi,Ji,$i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},es={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $i&&$i];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function C(e){i.setTimeout(()=>{throw e},0)}function S(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var A=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new I,e=>e.reset());class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,x=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=A.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},k=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(R)}};var R=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){C(n)}var t=A;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function D(){this.s=this.s,this.C=this.C}function M(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},M.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function P(e,t){if(M.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}h(P,M);var L={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),B=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++B,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=H(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),G={};function q(e,t,n,r,i){if(r&&r.once)return X(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):Y(e,t,n,!1,r,i)}function Y(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=$(e);if(l||(e[W]=l=new V(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Z(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function X(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)X(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):Y(e,t,n,!0,r,i)}function K(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Z(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$(t))?(z(n,e),0==n.h&&(n.src=null,t[W]=null)):U(e)}}}function Z(e){return e in G?G[e]:G[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function $(e){return(e=e[W])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new M(t,e);else if(t instanceof M)t.target=t.target||e;else{var i=t;_(t=new M(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){K(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){M.call(this,"d")}function we(){M.call(this,"c")}h(ve,M),h(we,M);var be={},_e=null;function Ee(){return _e=_e||new ne}function Ce(e){M.call(this,be.La,e)}function Se(e){const t=Ee();re(t,new Ce(t))}function Ae(e,t){M.call(this,be.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Ee();re(t,new Ae(t,e))}function Te(e,t){M.call(this,be.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",h(Ce,M),be.STAT_EVENT="statevent",h(Ae,M),be.Ma="timingevent",h(Te,M),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Re,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Me={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Re=new Oe;var Fe={},Be={};function je(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),He(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),At(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=q(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Be:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Be:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(c(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||ln(e.j,e)}function Ye(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Xe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||$e(n.h,e)))if(!e.K&&$e(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Qt(n)}rn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ge(a),He(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=d||7==t||Se(),Ge(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=qt(this.g);e="";var s=r.length,o=4==Gt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ye(this),qe(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ie(12),Ye(this),qe(this);break e}ke(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Be){4==d&&(this.s=4,Ie(14),n=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ie(15),ke(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}ke(this.i,this.l,e,null),Xe(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ie(11))}}else ke(this.i,this.l,a,"[Invalid Chunked Response]"),Ye(this),qe(this)}else ke(this.i,this.l,a,null),Xe(this,a);4==d&&Ye(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ye(this),qe(this)}}}catch(d){}},Pe.prototype.cancel=function(){this.J=!0,Ye(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Ie(17)),Ye(this),this.s=2,qe(this)):We(this,this.S-e)};var Ke=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ze(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function $e(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ct(this,t),At(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ct(e,t){Et(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return Et(e),t=It(e,t),e.g.has(t)}function At(e,t,n){Ct(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function xt(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(Vk){throw t.push(r+"type="+encodeURIComponent("_badmap")),Vk}}function kt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Mt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Et(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,St(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(kt,pe),kt.prototype.g=function(){return new Rt(this.l,this.j)},kt.prototype.i=(gt={},function(){return gt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Mt(this):Ot(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Mt(this))},e.Qa=function(e){this.g&&(this.response=e,Mt(this))},e.ga=function(){this.g&&Mt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var Bt=/^https?$/i,jt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Ht(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Bt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Gt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Vk){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Yt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yt("baseRetryDelayMs",5e3,e),this.cb=Yt("retryDelaySeedMs",1e4,e),this.Wa=Yt("forwardChannelMaxRetries",2,e),this.wa=Yt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Zt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}hn(e)}function Qt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Zt(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Ze(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||k(),x||(T(),x=!0),N.add(t,e),e.B=0}}function $t(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Nt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||k(),x||(T(),x=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!$e(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Te(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),hn(e),Zt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new kt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Xt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?ge(this.o):ge(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Xt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Pt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?$t(this,e):0==this.i.length||Ze(this.h)||$t(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Qt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),rn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ke(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)},h(yn,ve),h(vn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new yn(e))},wn.prototype.sa=function(e){re(this.g,new vn)},wn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Ji=es.createWebChannelTransport=function(){return new gn},Zi=es.getStatEventTarget=function(){return Ee()},Qi=es.Event=be,Ki=es.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Xi=es.ErrorCode=De,Me.COMPLETE="complete",Yi=es.EventType=Me,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,qi=es.WebChannel=me,es.FetchXmlHttpFactory=kt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Gi=es.XhrIo=Ft}).apply("undefined"!==typeof $i?$i:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ts="@firebase/firestore",ns="4.9.1";class rs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rs.UNAUTHENTICATED=new rs(null),rs.GOOGLE_CREDENTIALS=new rs("google-credentials-uid"),rs.FIRST_PARTY=new rs("first-party-uid"),rs.MOCK_USER=new rs("mock-user");let is="12.2.0";const ss=new Cr("@firebase/firestore");function os(){return ss.logLevel}function as(e){if(ss.logLevel<=vr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(us);ss.debug("Firestore (".concat(is,"): ").concat(e),...i)}}function ls(e){if(ss.logLevel<=vr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(us);ss.error("Firestore (".concat(is,"): ").concat(e),...i)}}function cs(e){if(ss.logLevel<=vr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(us);ss.warn("Firestore (".concat(is,"): ").concat(e),...i)}}function us(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function hs(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ds(e,r,n)}function ds(e,t,n){let r="FIRESTORE (".concat(is,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw ls(r),new Error(r)}function fs(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||ds(t,i,r)}function ps(e,t){return e}const gs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ms extends nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ys{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ws{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rs.UNAUTHENTICATED))}shutdown(){}}class bs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _s{constructor(e){this.t=e,this.currentUser=rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fs(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ys,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{as("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(as("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ys)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(as("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(fs("string"==typeof t.accessToken,31837,{l:t}),new vs(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fs(null===e||"string"==typeof e,2055,{h:e}),new rs(e)}}class Es{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=rs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Cs{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Es(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ss{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class As{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){fs(void 0===this.o,3512);const n=e=>{null!=e.error&&as("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,as("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{as("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):as("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ss(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(fs("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ss(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Is(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ts{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Is(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function xs(e,t){return e<t?-1:e>t?1:0}function Ns(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Ds(n)===Ds(i)?xs(n,i):Ds(n)?1:-1}return xs(e.length,t.length)}const ks=55296,Rs=57343;function Ds(e){const t=e.charCodeAt(0);return t>=ks&&t<=Rs}function Ms(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Os="__name__";class Ps{constructor(e,t,n){void 0===t?t=0:t>e.length&&hs(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&hs(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ps.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Ps.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return xs(e.length,t.length)}static compareSegments(e,t){const n=Ps.isNumericId(e),r=Ps.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ps.extractNumericId(e).compare(Ps.extractNumericId(t)):Ns(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vi.fromString(e.substring(4,e.length-2))}}class Ls extends Ps{construct(e,t,n){return new Ls(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ms(gs.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Ls(e)}static emptyPath(){return new Ls([])}}const Fs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bs extends Ps{construct(e,t,n){return new Bs(e,t,n)}static isValidIdentifier(e){return Fs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Os}static keyField(){return new Bs([Os])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ms(gs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ms(gs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ms(gs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ms(gs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bs(t)}static emptyPath(){return new Bs([])}}class js{constructor(e){this.path=e}static fromPath(e){return new js(Ls.fromString(e))}static fromName(e){return new js(Ls.fromString(e).popFirst(5))}static empty(){return new js(Ls.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ls.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ls.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new js(new Ls(e.slice()))}}function Us(e,t,n){if(!n)throw new ms(gs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Vs(e){if(!js.isDocumentKey(e))throw new ms(gs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zs(e){if(js.isDocumentKey(e))throw new ms(gs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Hs(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ws(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":hs(12329,{type:typeof e})}function Gs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ms(gs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ws(e);throw new ms(gs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function qs(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ys(e,t){if(!Hs(e))throw new ms(gs.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new ms(gs.INVALID_ARGUMENT,n);return!0}const Xs=-62135596800,Ks=1e6;class Qs{static now(){return Qs.fromMillis(Date.now())}static fromDate(e){return Qs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ks);return new Qs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ms(gs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ms(gs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xs)throw new ms(gs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ms(gs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ks}_compareTo(e){return this.seconds===e.seconds?xs(this.nanoseconds,e.nanoseconds):xs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qs._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ys(e,Qs._jsonSchema))return new Qs(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xs;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qs._jsonSchemaVersion="firestore/timestamp/1.0",Qs._jsonSchema={type:qs("string",Qs._jsonSchemaVersion),seconds:qs("number"),nanoseconds:qs("number")};class Zs{static fromTimestamp(e){return new Zs(e)}static min(){return new Zs(new Qs(0,0))}static max(){return new Zs(new Qs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Js=-1;class $s{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}$s.UNKNOWN_ID=-1;function eo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zs.fromTimestamp(1e9===r?new Qs(n+1,0):new Qs(n,r));return new no(i,js.empty(),t)}function to(e){return new no(e.readTime,e.key,Js)}class no{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new no(Zs.min(),js.empty(),Js)}static max(){return new no(Zs.max(),js.empty(),Js)}}function ro(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=js.comparator(e.documentKey,t.documentKey),0!==n?n:xs(e.largestBatchId,t.largestBatchId))}const io="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class so{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function oo(e){if(e.code!==gs.FAILED_PRECONDITION||e.message!==io)throw e;as("LocalStore","Unexpectedly lost primary lease")}class ao{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hs(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ao((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ao?t:ao.resolve(t)}catch(e){return ao.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ao.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ao.reject(t)}static resolve(e){return new ao((t,n)=>{t(e)})}static reject(e){return new ao((t,n)=>{n(e)})}static waitFor(e){return new ao((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ao.resolve(!1);for(const n of e)t=t.next(e=>e?ao.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ao((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ao((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function lo(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(e){return"IndexedDbTransactionError"===e.name}class uo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uo.ce=-1;const ho=-1;function fo(e){return null==e}function po(e){return 0===e&&1/e==-1/0}function go(e){return"number"==typeof e&&Number.isInteger(e)&&!po(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const mo="\x01";function yo(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=wo(t)),t=vo(e.get(n),t);return wo(t)}function vo(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case mo:n+="\x01\x11";break;default:n+=t}}return n}function wo(e){return e+mo+"\x01"}const bo="remoteDocuments",_o="owner",Eo="mutationQueues",Co="mutations";const So="documentMutations",Ao="remoteDocumentsV14",Io="remoteDocumentGlobal",To="targets",xo="targetDocuments",No="targetGlobal",ko="collectionParents",Ro="clientMetadata",Do="bundles",Mo="namedQueries",Oo="indexConfiguration",Po="indexState",Lo="indexEntries",Fo="documentOverlays",Bo="globals",jo=[Eo,Co,So,bo,To,_o,No,xo,Ro,Io,ko,Do,Mo],Uo=[Eo,Co,So,Ao,To,_o,No,xo,Ro,Io,ko,Do,Mo,Fo],Vo=Uo,zo=[...Vo,Oo,Po,Lo];function Ho(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Wo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Go(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class qo{constructor(e,t){this.comparator=e,this.root=t||Xo.EMPTY}insert(e,t){return new qo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xo.BLACK,null,null))}remove(e){return new qo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yo(this.root,e,this.comparator,!0)}}class Yo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Xo.RED,this.left=null!=r?r:Xo.EMPTY,this.right=null!=i?i:Xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Xo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hs(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hs(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw hs(27949);return e+(this.isRed()?0:1)}}Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1,Xo.EMPTY=new class{constructor(){this.size=0}get key(){throw hs(57766)}get value(){throw hs(16141)}get color(){throw hs(16727)}get left(){throw hs(29726)}get right(){throw hs(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Xo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ko{constructor(e){this.comparator=e,this.data=new qo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qo(this.data.getIterator())}getIteratorFrom(e){return new Qo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ko))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ko(this.comparator);return t.data=e,t}}class Qo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zo{constructor(e){this.fields=e,e.sort(Bs.comparator)}static empty(){return new Zo([])}unionWith(e){let t=new Ko(Bs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Jo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $o{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Jo("Invalid base64 string: "+e):e}}(e);return new $o(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $o(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$o.EMPTY_BYTE_STRING=new $o("");const ea=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(e){if(fs(!!e,39018),"string"==typeof e){let t=0;const n=ea.exec(e);if(fs(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:na(e.seconds),nanos:na(e.nanos)}}function na(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ra(e){return"string"==typeof e?$o.fromBase64String(e):$o.fromUint8Array(e)}const ia="server_timestamp",sa="__type__",oa="__previous_value__",aa="__local_write_time__";function la(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[sa])||void 0===t?void 0:t.stringValue)===ia}function ca(e){const t=e.mapValue.fields[oa];return la(t)?ca(t):t}function ua(e){const t=ta(e.mapValue.fields[aa].timestampValue);return new Qs(t.seconds,t.nanos)}class ha{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const da="(default)";class fa{constructor(e,t){this.projectId=e,this.database=t||da}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===da}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}const pa="__type__",ga="__max__",ma={mapValue:{fields:{__type__:{stringValue:ga}}}},ya="__vector__",va="value";function wa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?la(e)?4:La(e)?9007199254740991:Oa(e)?10:11:hs(28295,{value:e})}function ba(e,t){if(e===t)return!0;const n=wa(e);if(n!==wa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ua(e).isEqual(ua(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ta(e.timestampValue),r=ta(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ra(e.bytesValue).isEqual(ra(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return na(e.geoPointValue.latitude)===na(t.geoPointValue.latitude)&&na(e.geoPointValue.longitude)===na(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return na(e.integerValue)===na(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=na(e.doubleValue),r=na(t.doubleValue);return n===r?po(n)===po(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ms(e.arrayValue.values||[],t.arrayValue.values||[],ba);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ho(n)!==Ho(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ba(n[i],r[i])))return!1;return!0}(e,t);default:return hs(52216,{left:e})}}function _a(e,t){return void 0!==(e.values||[]).find(e=>ba(e,t))}function Ea(e,t){if(e===t)return 0;const n=wa(e),r=wa(t);if(n!==r)return xs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=na(e.integerValue||e.doubleValue),r=na(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ca(e.timestampValue,t.timestampValue);case 4:return Ca(ua(e),ua(t));case 5:return Ns(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ra(e),r=ra(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=xs(n[i],r[i]);if(0!==e)return e}return xs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=xs(na(e.latitude),na(t.latitude));return 0!==n?n:xs(na(e.longitude),na(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Sa(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[va])||void 0===n?void 0:n.arrayValue,c=null===(r=a[va])||void 0===r?void 0:r.arrayValue,u=xs((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Sa(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ma.mapValue&&t===ma.mapValue)return 0;if(e===ma.mapValue)return 1;if(t===ma.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ns(r[o],s[o]);if(0!==e)return e;const t=Ea(n[r[o]],i[s[o]]);if(0!==t)return t}return xs(r.length,s.length)}(e.mapValue,t.mapValue);default:throw hs(23264,{he:n})}}function Ca(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xs(e,t);const n=ta(e),r=ta(t),i=xs(n.seconds,r.seconds);return 0!==i?i:xs(n.nanos,r.nanos)}function Sa(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ea(n[i],r[i]);if(e)return e}return xs(n.length,r.length)}function Aa(e){return Ia(e)}function Ia(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ta(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ra(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return js.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ia(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ia(e.fields[i]));return n+"}"}(e.mapValue):hs(61005,{value:e})}function Ta(e){switch(wa(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ca(e);return t?16+Ta(t):16;case 5:return 2*e.stringValue.length;case 6:return ra(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Ta(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Wo(e.fields,(e,n)=>{t+=e.length+Ta(n)}),t}(e.mapValue);default:throw hs(13486,{value:e})}}function xa(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Na(e){return!!e&&"integerValue"in e}function ka(e){return!!e&&"arrayValue"in e}function Ra(e){return!!e&&"nullValue"in e}function Da(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ma(e){return!!e&&"mapValue"in e}function Oa(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[pa])||void 0===t?void 0:t.stringValue)===ya}function Pa(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Wo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Pa(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Pa(e.arrayValue.values[n]);return t}return c({},e)}function La(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ga}class Fa{constructor(e){this.value=e}static empty(){return new Fa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ma(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(t)}setAll(e){let t=Bs.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Pa(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ma(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Wo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Fa(Pa(this.value))}}function Ba(e){const t=[];return Wo(e.fields,(e,n)=>{const r=new Bs([e]);if(Ma(n)){const e=Ba(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Zo(t)}class ja{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ja(e,0,Zs.min(),Zs.min(),Zs.min(),Fa.empty(),0)}static newFoundDocument(e,t,n,r){return new ja(e,1,t,Zs.min(),n,r,0)}static newNoDocument(e,t){return new ja(e,2,t,Zs.min(),Zs.min(),Fa.empty(),0)}static newUnknownDocument(e,t){return new ja(e,3,t,Zs.min(),Zs.min(),Fa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ja&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ja(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ua{constructor(e,t){this.position=e,this.inclusive=t}}function Va(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?js.comparator(js.fromName(o.referenceValue),n.key):Ea(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function za(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ba(e.position[n],t.position[n]))return!1;return!0}class Ha{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Wa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ga{}class qa extends Ga{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new el(e,t,n):"array-contains"===t?new il(e,n):"in"===t?new sl(e,n):"not-in"===t?new ol(e,n):"array-contains-any"===t?new al(e,n):new qa(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new tl(e,n):new nl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ea(t,this.value)):null!==t&&wa(this.value)===wa(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hs(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ya extends Ga{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ya(e,t)}matches(e){return Xa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xa(e){return"and"===e.op}function Ka(e){return Qa(e)&&Xa(e)}function Qa(e){for(const t of e.filters)if(t instanceof Ya)return!1;return!0}function Za(e){if(e instanceof qa)return e.field.canonicalString()+e.op.toString()+Aa(e.value);if(Ka(e))return e.filters.map(e=>Za(e)).join(",");{const t=e.filters.map(e=>Za(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ja(e,t){return e instanceof qa?function(e,t){return t instanceof qa&&e.op===t.op&&e.field.isEqual(t.field)&&ba(e.value,t.value)}(e,t):e instanceof Ya?function(e,t){return t instanceof Ya&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ja(n,t.filters[r]),!0)}(e,t):void hs(19439)}function $a(e){return e instanceof qa?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Aa(e.value))}(e):e instanceof Ya?function(e){return e.op.toString()+" {"+e.getFilters().map($a).join(" ,")+"}"}(e):"Filter"}class el extends qa{constructor(e,t,n){super(e,t,n),this.key=js.fromName(n.referenceValue)}matches(e){const t=js.comparator(e.key,this.key);return this.matchesComparison(t)}}class tl extends qa{constructor(e,t){super(e,"in",t),this.keys=rl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nl extends qa{constructor(e,t){super(e,"not-in",t),this.keys=rl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>js.fromName(e.referenceValue))}class il extends qa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ka(t)&&_a(t.arrayValue,this.value)}}class sl extends qa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_a(this.value.arrayValue,t)}}class ol extends qa{constructor(e,t){super(e,"not-in",t)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!_a(this.value.arrayValue,t)}}class al extends qa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ka(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>_a(this.value.arrayValue,e))}}class ll{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function cl(e){return new ll(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ul(e){const t=ps(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Za(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Aa(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Aa(e)).join(",")),t.Te=e}return t.Te}function hl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Wa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ja(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!za(e.startAt,t.startAt)&&za(e.endAt,t.endAt)}function dl(e){return js.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class fl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pl(e,t,n,r,i,s,o,a){return new fl(e,t,n,r,i,s,o,a)}function gl(e){return new fl(e)}function ml(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yl(e){return null!==e.collectionGroup}function vl(e){const t=ps(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ko(Bs.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ha(r,n))}),e.has(Bs.keyField().canonicalString())||t.Ie.push(new Ha(Bs.keyField(),n))}return t.Ie}function wl(e){const t=ps(e);return t.Ee||(t.Ee=bl(t,vl(e))),t.Ee}function bl(e,t){if("F"===e.limitType)return cl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ha(e.field,t)});const n=e.endAt?new Ua(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ua(e.startAt.position,e.startAt.inclusive):null;return cl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function _l(e,t){const n=e.filters.concat([t]);return new fl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function El(e,t,n){return new fl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Cl(e,t){return hl(wl(e),wl(t))&&e.limitType===t.limitType}function Sl(e){return"".concat(ul(wl(e)),"|lt:").concat(e.limitType)}function Al(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>$a(e)).join(", "),"]")),fo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Aa(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Aa(e)).join(",")),"Target(".concat(t,")")}(wl(e)),"; limitType=").concat(e.limitType,")")}function Il(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):js.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of vl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Va(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vl(e),t))&&!(e.endAt&&!function(e,t,n){const r=Va(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vl(e),t))}(e,t)}function Tl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xl(e){return(t,n)=>{let r=!1;for(const i of vl(e)){const e=Nl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Nl(e,t,n){const r=e.field.isKeyField()?js.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ea(r,i):hs(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return hs(19790,{direction:e.dir})}}class kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Go(this.inner)}size(){return this.innerSize}}const Rl=new qo(js.comparator);function Dl(){return Rl}const Ml=new qo(js.comparator);function Ol(){let e=Ml;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Pl(e){let t=Ml;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ll(){return Bl()}function Fl(){return Bl()}function Bl(){return new kl(e=>e.toString(),(e,t)=>e.isEqual(t))}const jl=new qo(js.comparator),Ul=new Ko(js.comparator);function Vl(){let e=Ul;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const zl=new Ko(xs);function Hl(){return zl}function Wl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:po(t)?"-0":t}}function Gl(e){return{integerValue:""+e}}function ql(e,t){return go(t)?Gl(t):Wl(e,t)}class Yl{constructor(){this._=void 0}}function Xl(e,t,n){return e instanceof Zl?function(e,t){const n={fields:{[sa]:{stringValue:ia},[aa]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&la(t)&&(t=ca(t)),t&&(n.fields[oa]=t),{mapValue:n}}(n,t):e instanceof Jl?$l(e,t):e instanceof ec?tc(e,t):function(e,t){const n=Ql(e,t),r=rc(n)+rc(e.Ae);return Na(n)&&Na(e.Ae)?Gl(r):Wl(e.serializer,r)}(e,t)}function Kl(e,t,n){return e instanceof Jl?$l(e,t):e instanceof ec?tc(e,t):n}function Ql(e,t){return e instanceof nc?function(e){return Na(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Zl extends Yl{}class Jl extends Yl{constructor(e){super(),this.elements=e}}function $l(e,t){const n=ic(t);for(const r of e.elements)n.some(e=>ba(e,r))||n.push(r);return{arrayValue:{values:n}}}class ec extends Yl{constructor(e){super(),this.elements=e}}function tc(e,t){let n=ic(t);for(const r of e.elements)n=n.filter(e=>!ba(e,r));return{arrayValue:{values:n}}}class nc extends Yl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rc(e){return na(e.integerValue||e.doubleValue)}function ic(e){return ka(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class sc{constructor(e,t){this.field=e,this.transform=t}}class oc{constructor(e,t){this.version=e,this.transformResults=t}}class ac{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ac}static exists(e){return new ac(void 0,e)}static updateTime(e){return new ac(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class cc{}function uc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new bc(e.key,ac.none()):new gc(e.key,e.data,ac.none());{const n=e.data,r=Fa.empty();let i=new Ko(Bs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new mc(e.key,r,new Zo(i.toArray()),ac.none())}}function hc(e,t,n){e instanceof gc?function(e,t,n){const r=e.value.clone(),i=vc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof mc?function(e,t,n){if(!lc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=vc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dc(e,t,n,r){return e instanceof gc?function(e,t,n,r){if(!lc(e.precondition,t))return n;const i=e.value.clone(),s=wc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof mc?function(e,t,n,r){if(!lc(e.precondition,t))return n;const i=wc(e.fieldTransforms,r,t),s=t.data;return s.setAll(yc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return lc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function fc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ql(r.transform,e||null);null!=i&&(null===n&&(n=Fa.empty()),n.set(r.field,i))}return n||null}function pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ms(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Jl&&t instanceof Jl||e instanceof ec&&t instanceof ec?Ms(e.elements,t.elements,ba):e instanceof nc&&t instanceof nc?ba(e.Ae,t.Ae):e instanceof Zl&&t instanceof Zl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gc extends cc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mc extends cc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function vc(e,t,n){const r=new Map;fs(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Kl(o,a,n[i]))}return r}function wc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Xl(e,s,t))}return r}class bc extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _c extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ec{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&hc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Fl();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=uc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Zs.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vl())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(e,t)=>pc(e,t))&&Ms(this.baseMutations,e.baseMutations,(e,t)=>pc(e,t))}}class Cc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){fs(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=jl;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Cc(e,t,n,r)}}class Sc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ac{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ic,Tc;function xc(e){switch(e){case gs.OK:return hs(64938);case gs.CANCELLED:case gs.UNKNOWN:case gs.DEADLINE_EXCEEDED:case gs.RESOURCE_EXHAUSTED:case gs.INTERNAL:case gs.UNAVAILABLE:case gs.UNAUTHENTICATED:return!1;case gs.INVALID_ARGUMENT:case gs.NOT_FOUND:case gs.ALREADY_EXISTS:case gs.PERMISSION_DENIED:case gs.FAILED_PRECONDITION:case gs.ABORTED:case gs.OUT_OF_RANGE:case gs.UNIMPLEMENTED:case gs.DATA_LOSS:return!0;default:return hs(15467,{code:e})}}function Nc(e){if(void 0===e)return ls("GRPC error has no .code"),gs.UNKNOWN;switch(e){case Ic.OK:return gs.OK;case Ic.CANCELLED:return gs.CANCELLED;case Ic.UNKNOWN:return gs.UNKNOWN;case Ic.DEADLINE_EXCEEDED:return gs.DEADLINE_EXCEEDED;case Ic.RESOURCE_EXHAUSTED:return gs.RESOURCE_EXHAUSTED;case Ic.INTERNAL:return gs.INTERNAL;case Ic.UNAVAILABLE:return gs.UNAVAILABLE;case Ic.UNAUTHENTICATED:return gs.UNAUTHENTICATED;case Ic.INVALID_ARGUMENT:return gs.INVALID_ARGUMENT;case Ic.NOT_FOUND:return gs.NOT_FOUND;case Ic.ALREADY_EXISTS:return gs.ALREADY_EXISTS;case Ic.PERMISSION_DENIED:return gs.PERMISSION_DENIED;case Ic.FAILED_PRECONDITION:return gs.FAILED_PRECONDITION;case Ic.ABORTED:return gs.ABORTED;case Ic.OUT_OF_RANGE:return gs.OUT_OF_RANGE;case Ic.UNIMPLEMENTED:return gs.UNIMPLEMENTED;case Ic.DATA_LOSS:return gs.DATA_LOSS;default:return hs(39323,{code:e})}}(Tc=Ic||(Ic={}))[Tc.OK=0]="OK",Tc[Tc.CANCELLED=1]="CANCELLED",Tc[Tc.UNKNOWN=2]="UNKNOWN",Tc[Tc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tc[Tc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tc[Tc.NOT_FOUND=5]="NOT_FOUND",Tc[Tc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tc[Tc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tc[Tc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tc[Tc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tc[Tc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tc[Tc.ABORTED=10]="ABORTED",Tc[Tc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tc[Tc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tc[Tc.INTERNAL=13]="INTERNAL",Tc[Tc.UNAVAILABLE=14]="UNAVAILABLE",Tc[Tc.DATA_LOSS=15]="DATA_LOSS";let kc=null;function Rc(){return new TextEncoder}const Dc=new Vi([4294967295,4294967295],0);function Mc(e){const t=Rc().encode(e),n=new zi;return n.update(t),new Uint8Array(n.digest())}function Oc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Vi([n,r],0),new Vi([i,s],0)]}class Pc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lc("Invalid padding: ".concat(t));if(n<0)throw new Lc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Lc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Lc("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Vi.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Vi.fromNumber(n)));return 1===r.compare(Dc)&&(r=new Vi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Mc(e),[n,r]=Oc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Pc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Mc(e),[n,r]=Oc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Fc(Zs.min(),r,new qo(xs),Dl(),Vl())}}class Bc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Bc(n,t,Vl(),Vl(),Vl())}}class jc{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Uc{constructor(e,t){this.targetId=e,this.Ce=t}}class Vc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$o.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class zc{constructor(){this.ve=0,this.Fe=Gc(),this.Me=$o.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vl(),t=Vl(),n=Vl();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:hs(38017,{changeType:i})}}),new Bc(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Gc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fs(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Hc{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dl(),this.Je=Wc(),this.He=Wc(),this.Ye=new qo(xs)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:hs(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(dl(s))if(0===n){const e=new js(s.path);this.et(t,e,ja.newNoDocument(e,Zs.min()))}else fs(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=kc)||void 0===i||i.lt(function(e,t,n,r,i,s,o,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=ra(n).toUint8Array()}catch(e){if(e instanceof Jo)return cs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Pc(s,r,i)}catch(e){return cs(e instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&dl(i.target)){const t=new js(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ja.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Vl();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Fc(e,t,this.Ye,this.je,n);return this.je=Dl(),this.Je=Wc(),this.He=Wc(),this.Ye=new qo(xs),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new zc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ko(xs),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ko(xs),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||as("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wc(){return new qo(js.comparator)}function Gc(){return new qo(js.comparator)}const qc={asc:"ASCENDING",desc:"DESCENDING"},Yc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xc={and:"AND",or:"OR"};class Kc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qc(e,t){return e.useProto3Json||fo(t)?t:{value:t}}function Zc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $c(e,t){return Zc(e,t.toTimestamp())}function eu(e){return fs(!!e,49232),Zs.fromTimestamp(function(e){const t=ta(e);return new Qs(t.seconds,t.nanos)}(e))}function tu(e,t){return nu(e,t).canonicalString()}function nu(e,t){const n=function(e){return new Ls(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ru(e){const t=Ls.fromString(e);return fs(Cu(t),10190,{key:t.toString()}),t}function iu(e,t){return tu(e.databaseId,t.path)}function su(e,t){const n=ru(t);if(n.get(1)!==e.databaseId.projectId)throw new ms(gs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ms(gs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new js(cu(n))}function ou(e,t){return tu(e.databaseId,t)}function au(e){const t=ru(e);return 4===t.length?Ls.emptyPath():cu(t)}function lu(e){return new Ls(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cu(e){return fs(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function uu(e,t,n){return{name:iu(e,t),fields:n.value.mapValue.fields}}function hu(e,t){let n;if(t instanceof gc)n={update:uu(e,t.key,t.value)};else if(t instanceof bc)n={delete:iu(e,t.key)};else if(t instanceof mc)n={update:uu(e,t.key,t.data),updateMask:Eu(t.fieldMask)};else{if(!(t instanceof _c))return hs(16599,{Vt:t.type});n={verify:iu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Zl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ec)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw hs(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:$c(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:hs(27497)}(e,t.precondition)),n}function du(e,t){return{documents:[ou(e,t.path)]}}function fu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ou(e,i);const s=function(e){if(0!==e.length)return _u(Ya.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:wu(e.field),direction:mu(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Qc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function pu(e){let t=au(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fs(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=gu(e);return t instanceof Ya&&Ka(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Ha(bu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,fo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ua(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ua(n,t)}(n.endAt)),pl(t,i,o,s,a,"F",l,c)}function gu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bu(e.unaryFilter.field);return qa.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=bu(e.unaryFilter.field);return qa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bu(e.unaryFilter.field);return qa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bu(e.unaryFilter.field);return qa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hs(61313);default:return hs(60726)}}(e):void 0!==e.fieldFilter?function(e){return qa.create(bu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hs(58110);default:return hs(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ya.create(e.compositeFilter.filters.map(e=>gu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return hs(1026)}}(e.compositeFilter.op))}(e):hs(30097,{filter:e})}function mu(e){return qc[e]}function yu(e){return Yc[e]}function vu(e){return Xc[e]}function wu(e){return{fieldPath:e.canonicalString()}}function bu(e){return Bs.fromServerFormat(e.fieldPath)}function _u(e){return e instanceof qa?function(e){if("=="===e.op){if(Da(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NAN"}};if(Ra(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Da(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NOT_NAN"}};if(Ra(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wu(e.field),op:yu(e.op),value:e.value}}}(e):e instanceof Ya?function(e){const t=e.getFilters().map(e=>_u(e));return 1===t.length?t[0]:{compositeFilter:{op:vu(e.op),filters:t}}}(e):hs(54877,{filter:e})}function Eu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Cu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Su{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zs.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zs.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$o.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Su(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Su(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Su(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Su(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Au{constructor(e){this.yt=e}}function Iu(e){const t=pu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?El(t,t.limit,"L"):t}class Tu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(na(e.integerValue));else if("doubleValue"in e){const n=na(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),po(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=ta(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ra(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?La(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Oa(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):hs(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=va,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(na(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),js.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Tu.Kt=new Tu;class xu{constructor(){this.Cn=new Nu}addToCollectionParentIndex(e,t){return this.Cn.add(t),ao.resolve()}getCollectionParents(e,t){return ao.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ao.resolve()}deleteFieldIndex(e,t){return ao.resolve()}deleteAllFieldIndexes(e){return ao.resolve()}createTargetIndexes(e,t){return ao.resolve()}getDocumentsMatchingTarget(e,t){return ao.resolve(null)}getIndexType(e,t){return ao.resolve(0)}getFieldIndexes(e,t){return ao.resolve([])}getNextCollectionGroupToUpdate(e){return ao.resolve(null)}getMinOffset(e,t){return ao.resolve(no.min())}getMinOffsetFromCollectionGroup(e,t){return ao.resolve(no.min())}updateCollectionGroup(e,t,n){return ao.resolve()}updateIndexEntries(e,t){return ao.resolve()}}class Nu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ko(Ls.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ko(Ls.comparator)).toArray()}}new Uint8Array(0);const ku={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ru=41943040;class Du{static withCacheSize(e){return new Du(e,Du.DEFAULT_COLLECTION_PERCENTILE,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Du.DEFAULT_COLLECTION_PERCENTILE=10,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Du.DEFAULT=new Du(Ru,Du.DEFAULT_COLLECTION_PERCENTILE,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Du.DISABLED=new Du(-1,0,0);class Mu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mu(0)}static cr(){return new Mu(-1)}}const Ou="LruGarbageCollector",Pu=1048576;function Lu(e,t){let[n,r]=e,[i,s]=t;const o=xs(n,i);return 0===o?xs(r,s):o}class Fu{constructor(e){this.Ir=e,this.buffer=new Ko(Lu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Lu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){as(Ou,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){co(e)?as(Ou,"Ignoring IndexedDB error during garbage collection: ",e):await oo(e)}await this.Vr(3e5)})}}class ju{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ao.resolve(uo.ce);const n=new Fu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(as("LruGarbageCollector","Garbage collection skipped; disabled"),ao.resolve(ku)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(as("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ku):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(as("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),os()<=vr.DEBUG&&as("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ao.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Uu(e,t){return new ju(e,t)}class Vu{constructor(){this.changes=new kl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ja.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ao.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Hu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&dc(n.mutation,e,Zo.empty(),Qs.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Vl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vl();const r=Ll();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ol();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ll();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Vl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Dl();const s=Bl(),o=Bl();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof mc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),dc(o.mutation,t,o.mutation.getFieldMask(),Qs.now())):s.set(t.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new zu(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Bl();let r=new qo((e,t)=>e-t),i=Vl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Zo.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Vl()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Fl();l.forEach(e=>{if(!i.has(e)){const r=uc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ao.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return js.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ao.resolve(Ll());let o=Js,a=i;return s.next(t=>ao.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ao.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Vl())).next(e=>({batchId:o,changes:Pl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new js(t)).next(e=>{let t=Ol();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ol();return this.indexManager.getCollectionParents(e,i).next(o=>ao.forEach(o,o=>{const a=function(e,t){return new fl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ja.newInvalidDocument(r)))});let n=Ol();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&dc(s.mutation,r,Zo.empty(),Qs.now()),Il(t,r)&&(n=n.insert(e,r))}),n})}}class Wu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ao.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:eu(e.createTime)}}(t)),ao.resolve()}getNamedQuery(e,t){return ao.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Iu(e.bundledQuery),readTime:eu(e.readTime)}}(t)),ao.resolve()}}class Gu{constructor(){this.overlays=new qo(js.comparator),this.qr=new Map}getOverlay(e,t){return ao.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ll();return ao.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ao.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ao.resolve()}getOverlaysForCollection(e,t,n){const r=Ll(),i=t.length+1,s=new js(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ao.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new qo((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ll(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ll(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return ao.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Sc(t,n));let i=this.qr.get(t);void 0===i&&(i=Vl(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class qu{constructor(){this.sessionToken=$o.EMPTY_BYTE_STRING}getSessionToken(e){return ao.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ao.resolve()}}class Yu{constructor(){this.Qr=new Ko(Xu.$r),this.Ur=new Ko(Xu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Xu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Xu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new js(new Ls([])),n=new Xu(t,e),r=new Xu(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new js(new Ls([])),n=new Xu(t,e),r=new Xu(t,e+1);let i=Vl();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Xu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Xu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return js.comparator(e.key,t.key)||xs(e.Yr,t.Yr)}static Kr(e,t){return xs(e.Yr,t.Yr)||js.comparator(e.key,t.key)}}class Ku{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ko(Xu.$r)}checkEmpty(e){return ao.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ec(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Xu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ao.resolve(s)}lookupMutationBatch(e,t){return ao.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return ao.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ao.resolve(0===this.mutationQueue.length?ho:this.tr-1)}getAllMutationBatches(e){return ao.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xu(t,0),r=new Xu(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),ao.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ko(xs);return t.forEach(e=>{const t=new Xu(e,0),r=new Xu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ao.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;js.isDocumentKey(i)||(i=i.child(""));const s=new Xu(new js(i),0);let o=new Ko(xs);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),ao.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){fs(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ao.forEach(t.mutations,r=>{const i=new Xu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Xu(t,0),r=this.Zr.firstAfterOrEqual(n);return ao.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ao.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qu{constructor(e){this.ri=e,this.docs=new qo(js.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ao.resolve(n?n.document.mutableCopy():ja.newInvalidDocument(t))}getEntries(e,t){let n=Dl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ja.newInvalidDocument(e))}),ao.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Dl();const s=t.path,o=new js(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ro(to(o),n)<=0||(r.has(o.key)||Il(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ao.resolve(i)}getAllFromCollectionGroup(e,t,n,r){hs(9500)}ii(e,t){return ao.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Zu(this)}getSize(e){return ao.resolve(this.size)}}class Zu extends Vu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ao.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Ju{constructor(e){this.persistence=e,this.si=new kl(e=>ul(e),hl),this.lastRemoteSnapshotVersion=Zs.min(),this.highestTargetId=0,this.oi=0,this._i=new Yu,this.targetCount=0,this.ai=Mu.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ao.resolve()}getLastRemoteSnapshotVersion(e){return ao.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ao.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ao.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ao.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ao.resolve()}updateTargetData(e,t){return this.Pr(t),ao.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ao.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),ao.waitFor(i).next(()=>r)}getTargetCount(e){return ao.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ao.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ao.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ao.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ao.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ao.resolve(n)}containsKey(e,t){return ao.resolve(this._i.containsKey(t))}}class $u{constructor(e,t){this.ui={},this.overlays={},this.ci=new uo(0),this.li=!1,this.li=!0,this.hi=new qu,this.referenceDelegate=e(this),this.Pi=new Ju(this),this.indexManager=new xu,this.remoteDocumentCache=function(e){return new Qu(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Au(t),this.Ii=new Wu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Ku(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){as("MemoryPersistence","Starting transaction:",e);const r=new eh(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ao.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class eh extends so{constructor(e){super(),this.currentSequenceNumber=e}}class th{constructor(e){this.persistence=e,this.Ri=new Yu,this.Vi=null}static mi(e){return new th(e)}get fi(){if(this.Vi)return this.Vi;throw hs(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ao.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ao.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ao.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ao.forEach(this.fi,n=>{const r=js.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Zs.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ao.or([()=>ao.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class nh{constructor(e,t){this.persistence=e,this.pi=new kl(e=>yo(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Uu(this,t)}static mi(e,t){return new nh(e,t)}Ei(){}di(e){return ao.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return ao.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?ao.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Zs.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ao.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ao.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ao.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ao.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ta(e.data.value)),t}br(e,t,n){return ao.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return ao.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class rh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Vl(),r=Vl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new rh(e,t.fromCache,n,r)}}class ih{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sh{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=er()?8:lo(Jn())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new ih;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(os()<=vr.DEBUG&&as("QueryEngine","SDK will not create cache indexes for query:",Al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ao.resolve()):(os()<=vr.DEBUG&&as("QueryEngine","Query:",Al(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(os()<=vr.DEBUG&&as("QueryEngine","The SDK decides to create cache indexes for query:",Al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wl(t))):ao.resolve())}ys(e,t){if(ml(t))return ao.resolve(null);let n=wl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=El(t,null,"F"),n=wl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Vl(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,El(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return ml(t)||r.isEqual(Zs.min())?ao.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?ao.resolve(null):(os()<=vr.DEBUG&&as("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Al(t)),this.vs(e,s,t,eo(r,Js)).next(e=>e))})}Ds(e,t){let n=new Ko(xl(e));return t.forEach((t,r)=>{Il(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return os()<=vr.DEBUG&&as("QueryEngine","Using full collection scan to execute query:",Al(t)),this.ps.getDocumentsMatchingQuery(e,t,no.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const oh="LocalStore";class ah{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new qo(xs),this.xs=new kl(e=>ul(e),hl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function lh(e,t,n,r){return new ah(e,t,n,r)}async function ch(e,t){const n=ps(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Vl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function uh(e){const t=ps(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function hh(e,t,n){let r=Vl(),i=Vl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Dl();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Zs.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):as(oh,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function dh(e,t){const n=ps(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=ho),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function fh(e,t){const n=ps(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,ao.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Su(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function ph(e,t,n){const r=ps(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!co(e))throw e;as(oh,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function gh(e,t,n){const r=ps(e);let i=Zs.min(),s=Vl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=ps(e),i=r.xs.get(n);return void 0!==i?ao.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,wl(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Zs.min(),n?s:Vl())).next(e=>(mh(r,Tl(t),e),{documents:e,Qs:s})))}function mh(e,t,n){let r=e.Os.get(t)||Zs.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class yh{constructor(){this.activeTargetIds=Hl()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vh{constructor(){this.Mo=new yh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wh{Oo(e){}shutdown(){}}const bh="ConnectivityMonitor";class _h{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){as(bh,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){as(bh,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eh=null;function Ch(){return null===Eh?Eh=268435456+Math.round(2147483648*Math.random()):Eh++,"0x"+Eh.toString(16)}const Sh="RestConnection",Ah={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ih{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===da?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Ch(),o=this.zo(e,t.toUriEncodedString());as(Sh,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=Yn(l);return this.Jo(e,o,a,n,c).then(t=>(as(Sh,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw cs(Sh,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+is,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Ah[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Th{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const xh="WebChannelConnection";class Nh extends Ih{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Ch();return new Promise((i,o)=>{const a=new Gi;a.setWithCredentials(!0),a.listenOnce(Yi.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Xi.NO_ERROR:const n=a.getResponseJson();as(xh,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Xi.TIMEOUT:as(xh,"RPC '".concat(e,"' ").concat(s," timed out")),o(new ms(gs.DEADLINE_EXCEEDED,"Request time out"));break;case Xi.HTTP_ERROR:const r=a.getStatus();if(as(xh,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(gs).indexOf(t)>=0?t:gs.UNKNOWN}(n.status);o(new ms(e,n.message))}else o(new ms(gs.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ms(gs.UNAVAILABLE,"Connection failed."));break;default:hs(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{as(xh,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);as(xh,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Ch(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ji(),o=Zi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");as(xh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new Th({Yo:t=>{d?as(xh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(as(xh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),as(xh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,qi.EventType.OPEN,()=>{d||(as(xh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,qi.EventType.CLOSE,()=>{d||(d=!0,as(xh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,qi.EventType.ERROR,t=>{d||(d=!0,cs(xh,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new ms(gs.UNAVAILABLE,"The operation could not be completed")))}),p(u,qi.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];fs(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){as(xh,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Ic[e];if(void 0!==t)return Nc(t)}(t),i=o.message;void 0===n&&(n=gs.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.a_(new ms(n,i)),u.close()}else as(xh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,Qi.STAT_EVENT,t=>{t.stat===Ki.PROXY?as(xh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ki.NOPROXY&&as(xh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function kh(){return"undefined"!=typeof document?document:null}function Rh(e){return new Kc(e,!0)}class Dh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&as("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Mh="PersistentStream";class Oh{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dh(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===gs.RESOURCE_EXHAUSTED?(ls(t.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===gs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ms(gs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return as(Mh,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(as(Mh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ph extends Oh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:hs(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(fs(void 0===t||"string"==typeof t,58123),$o.fromBase64String(t||"")):(fs(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),$o.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?gs.UNKNOWN:Nc(e.code);return new ms(t,e.message||"")}(o);n=new Vc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=su(e,r.document.name),s=eu(r.document.updateTime),o=r.document.createTime?eu(r.document.createTime):Zs.min(),a=new Fa({mapValue:{fields:r.document.fields}}),l=ja.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new jc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=su(e,r.document),s=r.readTime?eu(r.readTime):Zs.min(),o=ja.newNoDocument(i,s),a=r.removedTargetIds||[];n=new jc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=su(e,r.document),s=r.removedTargetIds||[];n=new jc([],s,i,null)}else{if(!("filter"in t))return hs(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ac(r,i),o=e.targetId;n=new Uc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zs.min():t.readTime?eu(t.readTime):Zs.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=lu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=dl(r)?{documents:du(e,r)}:{query:fu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jc(e,t.resumeToken);const r=Qc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zs.min())>0){n.readTime=Zc(e,t.snapshotVersion.toTimestamp());const r=Qc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hs(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=lu(this.serializer),t.removeTarget=e,this.q_(t)}}class Lh extends Oh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return fs(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fs(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){fs(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(fs(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?eu(e.updateTime):eu(t);return n.isEqual(Zs.min())&&(n=eu(t)),new oc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=eu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=lu(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>hu(this.serializer,e))};this.q_(t)}}class Fh{}class Bh extends Fh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ms(gs.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,nu(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===gs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ms(gs.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,nu(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===gs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ms(gs.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(ls(t),this.aa=!1):as("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Uh="RemoteStore";class Vh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Qh(this)&&(as(Uh,"Restarting streams for network reachability change."),await async function(e){const t=ps(e);t.Ea.add(4),await Hh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await zh(t)}(this))})}),this.Ra=new jh(n,r)}}async function zh(e){if(Qh(e))for(const t of e.da)await t(!0)}async function Hh(e){for(const t of e.da)await t(!1)}function Wh(e,t){const n=ps(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Kh(n)?Xh(n):gd(n).O_()&&qh(n,t))}function Gh(e,t){const n=ps(e),r=gd(n);n.Ia.delete(t),r.O_()&&Yh(n,t),0===n.Ia.size&&(r.O_()?r.L_():Qh(n)&&n.Ra.set("Unknown"))}function qh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zs.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}gd(e).Y_(t)}function Yh(e,t){e.Va.Ue(t),gd(e).Z_(t)}function Xh(e){e.Va=new Hc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),gd(e).start(),e.Ra.ua()}function Kh(e){return Qh(e)&&!gd(e).x_()&&e.Ia.size>0}function Qh(e){return 0===ps(e).Ea.size}function Zh(e){e.Va=void 0}async function Jh(e){e.Ra.set("Online")}async function $h(e){e.Ia.forEach((t,n)=>{qh(e,t)})}async function ed(e,t){Zh(e),Kh(e)?(e.Ra.ha(t),Xh(e)):e.Ra.set("Unknown")}async function td(e,t,n){if(e.Ra.set("Online"),t instanceof Vc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){as(Uh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await nd(e,n)}else if(t instanceof jc?e.Va.Ze(t):t instanceof Uc?e.Va.st(t):e.Va.tt(t),!n.isEqual(Zs.min()))try{const t=await uh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken($o.EMPTY_BYTE_STRING,r.snapshotVersion)),Yh(e,t);const i=new Su(r.target,t,n,r.sequenceNumber);qh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){as(Uh,"Failed to raise snapshot:",t),await nd(e,t)}}async function nd(e,t,n){if(!co(t))throw t;e.Ea.add(1),await Hh(e),e.Ra.set("Offline"),n||(n=()=>uh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{as(Uh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await zh(e)})}function rd(e,t){return t().catch(n=>nd(e,n,t))}async function id(e){const t=ps(e),n=md(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ho;for(;sd(t);)try{const e=await dh(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,od(t,e)}catch(e){await nd(t,e)}ad(t)&&ld(t)}function sd(e){return Qh(e)&&e.Ta.length<10}function od(e,t){e.Ta.push(t);const n=md(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ad(e){return Qh(e)&&!md(e).x_()&&e.Ta.length>0}function ld(e){md(e).start()}async function cd(e){md(e).ra()}async function ud(e){const t=md(e);for(const n of e.Ta)t.ea(n.mutations)}async function hd(e,t,n){const r=e.Ta.shift(),i=Cc.from(r,t,n);await rd(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await id(e)}async function dd(e,t){t&&md(e).X_&&await async function(e,t){if(function(e){return xc(e)&&e!==gs.ABORTED}(t.code)){const n=e.Ta.shift();md(e).B_(),await rd(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await id(e)}}(e,t),ad(e)&&ld(e)}async function fd(e,t){const n=ps(e);n.asyncQueue.verifyOperationInProgress(),as(Uh,"RemoteStore received new credentials");const r=Qh(n);n.Ea.add(3),await Hh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await zh(n)}async function pd(e,t){const n=ps(e);t?(n.Ea.delete(2),await zh(n)):t||(n.Ea.add(2),await Hh(n),n.Ra.set("Unknown"))}function gd(e){return e.ma||(e.ma=function(e,t,n){const r=ps(e);return r.sa(),new Ph(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Jh.bind(null,e),t_:$h.bind(null,e),r_:ed.bind(null,e),H_:td.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Kh(e)?Xh(e):e.Ra.set("Unknown")):(await e.ma.stop(),Zh(e))})),e.ma}function md(e){return e.fa||(e.fa=function(e,t,n){const r=ps(e);return r.sa(),new Lh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:cd.bind(null,e),r_:dd.bind(null,e),ta:ud.bind(null,e),na:hd.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await id(e)):(await e.fa.stop(),e.Ta.length>0&&(as(Uh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class yd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new yd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ms(gs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vd(e,t){if(ls("AsyncQueue","".concat(t,": ").concat(e)),co(e))return new ms(gs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class wd{static emptySet(e){return new wd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||js.comparator(t.key,n.key):(e,t)=>js.comparator(e.key,t.key),this.keyedMap=Ol(),this.sortedSet=new qo(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new wd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bd{constructor(){this.ga=new qo(js.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):hs(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class _d{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new _d(e,t,wd.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ed{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Cd{constructor(){this.queries=Sd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=ps(e),r=n.queries;n.queries=Sd(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new ms(gs.ABORTED,"Firestore shutting down"))}}function Sd(){return new kl(e=>Sl(e),Cl)}async function Ad(e,t){const n=ps(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Ed,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=vd(e,"Initialization of query '".concat(Al(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Nd(n)}async function Id(e,t){const n=ps(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Td(e,t){const n=ps(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Nd(n)}function xd(e,t,n){const r=ps(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function Nd(e){e.Ca.forEach(e=>{e.next()})}var kd,Rd;(Rd=kd||(kd={})).Ma="default",Rd.Cache="cache";class Dd{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new _d(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=_d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kd.Cache}}class Md{constructor(e){this.key=e}}class Od{constructor(e){this.key=e}}class Pd{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vl(),this.mutatedKeys=Vl(),this.eu=xl(e),this.tu=new wd(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new bd,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Il(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hs(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new _d(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Od(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Md(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Vl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _d.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Ld="SyncEngine";class Fd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Bd{constructor(e){this.key=e,this.hu=!1}}class jd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new kl(e=>Sl(e),Cl),this.Iu=new Map,this.Eu=new Set,this.du=new qo(js.comparator),this.Au=new Map,this.Ru=new Yu,this.Vu={},this.mu=new Map,this.fu=Mu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Ud(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=lf(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await zd(r,t,n,!0),i}async function Vd(e,t){const n=lf(e);await zd(n,t,!0,!1)}async function zd(e,t,n,r){const i=await fh(e.localStore,wl(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Hd(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Wh(e.remoteStore,i),a}async function Hd(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await gh(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return tf(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await gh(e.localStore,t,!0),o=new Pd(t,s.Qs),a=o.ru(s.documents),l=Bc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);tf(e,n,c.au);const u=new Fd(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Wd(e,t,n){const r=ps(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Cl(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ph(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gh(r.remoteStore,i.targetId),$d(r,i.targetId)}).catch(oo)):($d(r,i.targetId),await ph(r.localStore,i.targetId,!0))}async function Gd(e,t){const n=ps(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gh(n.remoteStore,r.targetId))}async function qd(e,t){const n=ps(e);try{const e=await function(e,t){const n=ps(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken($o.EMPTY_BYTE_STRING,Zs.min()).withLastLimboFreeSnapshotVersion(Zs.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=Dl(),l=Vl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(hh(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(Zs.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return ao.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(fs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?fs(r.hu,14607):e.removedDocuments.size>0&&(fs(r.hu,42227),r.hu=!1))}),await sf(n,e,t)}catch(e){await oo(e)}}function Yd(e,t,n){const r=ps(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=ps(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Nd(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Xd(e,t,n){const r=ps(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new qo(js.comparator);e=e.insert(s,ja.newNoDocument(s,Zs.min()));const n=Vl().add(s),i=new Fc(Zs.min(),new Map,new qo(xs),e,n);await qd(r,i),r.du=r.du.remove(s),r.Au.delete(t),rf(r)}else await ph(r.localStore,t,!1).then(()=>$d(r,t,n)).catch(oo)}async function Kd(e,t){const n=ps(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ps(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ao.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);fs(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Vl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Jd(n,r,null),Zd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sf(n,e)}catch(e){await oo(e)}}async function Qd(e,t,n){const r=ps(e);try{const e=await function(e,t){const n=ps(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(fs(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Jd(r,t,n),Zd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await sf(r,e)}catch(n){await oo(n)}}function Zd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Jd(e,t,n){const r=ps(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function $d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||ef(e,t)})}function ef(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Gh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),rf(e))}function tf(e,t,n){for(const r of n)r instanceof Md?(e.Ru.addReference(r.key,t),nf(e,r)):r instanceof Od?(as(Ld,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||ef(e,r.key)):hs(19791,{wu:r})}function nf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(as(Ld,"New document in limbo: "+n),e.Eu.add(r),rf(e))}function rf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new js(Ls.fromString(t)),r=e.fu.next();e.Au.set(r,new Bd(n)),e.du=e.du.insert(n,r),Wh(e.remoteStore,new Su(wl(gl(n.path)),r,"TargetPurposeLimboResolution",uo.ce))}}async function sf(e,t,n){const r=ps(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=rh.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=ps(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ao.forEach(t,t=>ao.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ao.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!co(e))throw e;as(oh,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function of(e,t){const n=ps(e);if(!n.currentUser.isEqual(t)){as(Ld,"User change. New user:",t.toKey());const e=await ch(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ms(gs.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await sf(n,e.Ls)}}function af(e,t){const n=ps(e),r=n.Au.get(t);if(r&&r.hu)return Vl().add(r.key);{let e=Vl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function lf(e){const t=ps(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xd.bind(null,t),t.Pu.H_=Td.bind(null,t.eventManager),t.Pu.yu=xd.bind(null,t.eventManager),t}function cf(e){const t=ps(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Kd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qd.bind(null,t),t}class uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lh(this.persistence,new sh,e.initialUser,this.serializer)}Cu(e){return new $u(th.mi,this.serializer)}Du(e){return new vh}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uf.provider={build:()=>new uf};class hf extends uf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){fs(this.persistence.referenceDelegate instanceof nh,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Bu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Du.withCacheSize(this.cacheSizeBytes):Du.DEFAULT;return new $u(e=>nh.mi(e,t),this.serializer)}}class df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Yd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=of.bind(null,this.syncEngine),await pd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Cd}createDatastore(e){const t=Rh(e.databaseInfo.databaseId),n=function(e){return new Nh(e)}(e.databaseInfo);return function(e,t,n,r){return new Bh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Vh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Yd(this.syncEngine,e,0),_h.v()?new _h:new wh)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new jd(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ps(e);as(Uh,"RemoteStore shutting down."),t.Ea.add(5),await Hh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}df.provider={build:()=>new df};class ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const pf="FirestoreClient";class gf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=rs.UNAUTHENTICATED,this.clientId=Ts.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{as(pf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(as(pf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vd(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function mf(e,t){e.asyncQueue.verifyOperationInProgress(),as(pf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ch(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function yf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vf(e);as(pf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>fd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>fd(t.remoteStore,n)),e._onlineComponents=t}async function vf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){as(pf,"Using user provided OfflineComponentProvider");try{await mf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===gs.FAILED_PRECONDITION||e.code===gs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;cs("Error using user provided cache. Falling back to memory cache: "+n),await mf(e,new uf)}}else as(pf,"Using default OfflineComponentProvider"),await mf(e,new hf(void 0));return e._offlineComponents}async function wf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(as(pf,"Using user provided OnlineComponentProvider"),await yf(e,e._uninitializedComponentsProvider._online)):(as(pf,"Using default OnlineComponentProvider"),await yf(e,new df))),e._onlineComponents}function bf(e){return wf(e).then(e=>e.syncEngine)}async function _f(e){const t=await wf(e),n=t.eventManager;return n.onListen=Ud.bind(null,t.syncEngine),n.onUnlisten=Wd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Vd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Gd.bind(null,t.syncEngine),n}function Ef(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ys;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ff({next:a=>{s.Nu(),t.enqueueAndForget(()=>Id(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new ms(gs.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new ms(gs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Dd(gl(n.path),s,{includeMetadataChanges:!0,qa:!0});return Ad(e,o)}(await _f(e),e.asyncQueue,t,n,r)),r.promise}function Cf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ys;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ff({next:n=>{s.Nu(),t.enqueueAndForget(()=>Id(e,o)),n.fromCache&&"server"===r.source?i.reject(new ms(gs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Dd(n,s,{includeMetadataChanges:!0,qa:!0});return Ad(e,o)}(await _f(e),e.asyncQueue,t,n,r)),r.promise}function Sf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Af=new Map,If="firestore.googleapis.com",Tf=!0;class xf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ms(gs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=If,this.ssl=Tf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Tf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ru;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Pu)throw new ms(gs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ms(gs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ms(gs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ms(gs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ms(gs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ms(gs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ms(gs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ws;switch(e.type){case"firstParty":return new Cs(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ms(gs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Af.get(e);t&&(as("ComponentProvider","Removing Datastore"),Af.delete(e),t.terminate())}(this),Promise.resolve()}}function kf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Gs(e,Nf);const i=Yn(t),s=e._getSettings(),o=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(Xn("https://".concat(a)),Zn("Firestore",!0)),s.host!==If&&s.host!==a&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!sr(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=rs.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[jn(JSON.stringify({alg:"none",type:"JWT"})),jn(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ms(gs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new rs(i)}e._authCredentials=new bs(new vs(t,n))}}class Rf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Rf(this.firestore,e,this._query)}}class Df{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Df(this.firestore,e,this._key)}toJSON(){return{type:Df._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ys(t,Df._jsonSchema))return new Df(e,n||null,new js(Ls.fromString(t.referencePath)))}}Df._jsonSchemaVersion="firestore/documentReference/1.0",Df._jsonSchema={type:qs("string",Df._jsonSchemaVersion),referencePath:qs("string")};class Mf extends Rf{constructor(e,t,n){super(e,t,gl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Df(this.firestore,null,new js(e))}withConverter(e){return new Mf(this.firestore,e,this._path)}}function Of(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=dr(e),Us("collection","path",t),e instanceof Nf){const n=Ls.fromString(t,...r);return zs(n),new Mf(e,null,n)}{if(!(e instanceof Df||e instanceof Mf))throw new ms(gs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ls.fromString(t,...r));return zs(n),new Mf(e.firestore,null,n)}}function Pf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=dr(e),1===arguments.length&&(t=Ts.newId()),Us("doc","path",t),e instanceof Nf){const n=Ls.fromString(t,...r);return Vs(n),new Df(e,null,new js(n))}{if(!(e instanceof Df||e instanceof Mf))throw new ms(gs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ls.fromString(t,...r));return Vs(n),new Df(e.firestore,e instanceof Mf?e.converter:null,new js(n))}}const Lf="AsyncQueue";class Ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dh(this,"async_queue_retry"),this._c=()=>{const e=kh();e&&as(Lf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=kh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ys;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(Vk){if(!co(Vk))throw Vk;as(Lf,"Operation failed with retryable error: "+Vk)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,ls("INTERNAL UNHANDLED ERROR: ",Bf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=yd.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&hs(47125,{Pc:Bf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Bf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function jf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Uf extends Nf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ff,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ff(e),this._firestoreClient=void 0,await e}}}function Vf(e){if(e._terminated)throw new ms(gs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||zf(e),e._firestoreClient}function zf(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ha(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Sf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new gf(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Hf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hf($o.fromBase64String(e))}catch(e){throw new ms(gs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Hf($o.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ys(e,Hf._jsonSchema))return Hf.fromBase64String(e.bytes)}}Hf._jsonSchemaVersion="firestore/bytes/1.0",Hf._jsonSchema={type:qs("string",Hf._jsonSchemaVersion),bytes:qs("string")};class Wf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ms(gs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gf{constructor(e){this._methodName=e}}class qf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ms(gs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ms(gs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xs(this._lat,e._lat)||xs(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qf._jsonSchemaVersion}}static fromJSON(e){if(Ys(e,qf._jsonSchema))return new qf(e.latitude,e.longitude)}}qf._jsonSchemaVersion="firestore/geoPoint/1.0",qf._jsonSchema={type:qs("string",qf._jsonSchemaVersion),latitude:qs("number"),longitude:qs("number")};class Yf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Yf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ys(e,Yf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Yf(e.vectorValues);throw new ms(gs.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yf._jsonSchemaVersion="firestore/vectorValue/1.0",Yf._jsonSchema={type:qs("string",Yf._jsonSchemaVersion),vectorValues:qs("object")};const Xf=/^__.*__$/;class Kf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new mc(e,this.data,this.fieldMask,t,this.fieldTransforms):new gc(e,this.data,t,this.fieldTransforms)}}class Qf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hs(40011,{Ac:e})}}class Jf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jf(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Zf(this.Ac)&&Xf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $f{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rh(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Jf({Ac:e,methodName:t,Dc:n,path:Bs.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ep(e){const t=e._freezeSettings(),n=Rh(e._databaseId);return new $f(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);up("Data must be an object, but it was:",o,r);const a=lp(r,o);let l,c;if(s.merge)l=new Zo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=hp(t,r,n);if(!o.contains(i))throw new ms(gs.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));gp(e,i)||e.push(i)}l=new Zo(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Kf(new Fa(a),l,c)}class np extends Gf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof np}}class rp extends Gf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new nc(e.serializer,ql(e.serializer,this.Fc));return new sc(e.path,t)}isEqual(e){return e instanceof rp&&this.Fc===e.Fc}}function ip(e,t,n,r){const i=e.Cc(1,t,n);up("Data must be an object, but it was:",i,r);const s=[],o=Fa.empty();Wo(r,(e,r)=>{const a=fp(t,e,n);r=dr(r);const l=i.yc(a);if(r instanceof np)s.push(a);else{const e=ap(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Zo(s);return new Qf(o,a,i.fieldTransforms)}function sp(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[hp(t,r,n)],l=[i];if(s.length%2!=0)throw new ms(gs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(hp(t,s[d])),l.push(s[d+1]);const c=[],u=Fa.empty();for(let d=a.length-1;d>=0;--d)if(!gp(c,a[d])){const e=a[d];let t=l[d];t=dr(t);const n=o.yc(e);if(t instanceof np)c.push(e);else{const r=ap(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Zo(c);return new Qf(u,h,o.fieldTransforms)}function op(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ap(n,e.Cc(r?4:3,t))}function ap(e,t){if(cp(e=dr(e)))return up("Unsupported field value:",t,e),lp(e,t);if(e instanceof Gf)return function(e,t){if(!Zf(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ap(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=dr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ql(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Qs.fromDate(e);return{timestampValue:Zc(t.serializer,n)}}if(e instanceof Qs){const n=new Qs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Zc(t.serializer,n)}}if(e instanceof qf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hf)return{bytesValue:Jc(t.serializer,e._byteString)};if(e instanceof Df){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:tu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Yf)return function(e,t){return{mapValue:{fields:{[pa]:{stringValue:ya},[va]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Wl(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Ws(e)))}(e,t)}function lp(e,t){const n={};return Go(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wo(e,(e,r)=>{const i=ap(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function cp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qs||e instanceof qf||e instanceof Hf||e instanceof Df||e instanceof Gf||e instanceof Yf)}function up(e,t,n){if(!cp(n)||!Hs(n)){const r=Ws(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function hp(e,t,n){if((t=dr(t))instanceof Wf)return t._internalPath;if("string"==typeof t)return fp(e,t);throw pp("Field path arguments must be of type string or ",e,!1,void 0,n)}const dp=new RegExp("[~\\*/\\[\\]]");function fp(e,t,n){if(t.search(dp)>=0)throw pp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Wf(...t.split("."))._internalPath}catch(r){throw pp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function pp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new ms(gs.INVALID_ARGUMENT,a+e+l)}function gp(e,t){return e.some(e=>e.isEqual(t))}class mp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Df(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yp extends mp{data(){return super.data()}}function vp(e,t){return"string"==typeof t?fp(e,t):t instanceof Wf?t._internalPath:t._delegate._internalPath}function wp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ms(gs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bp{}class _p extends bp{}function Ep(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof bp&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Sp).length,n=e.filter(e=>e instanceof Cp).length;if(t>1||t>0&&n>0)throw new ms(gs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Cp extends _p{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Cp(e,t,n)}_apply(e){const t=this._parse(e);return Np(e._query,t),new Rf(e.firestore,e.converter,_l(e._query,t))}_parse(e){const t=ep(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ms(gs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){xp(o,s);const t=[];for(const n of o)t.push(Tp(r,e,n));a={arrayValue:{values:t}}}else a=Tp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||xp(o,s),a=op(n,t,o,"in"===s||"not-in"===s);return qa.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Sp extends bp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ya.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Np(n,i),n=_l(n,i)}(e._query,t),new Rf(e.firestore,e.converter,_l(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ap extends _p{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ap(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ms(gs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ms(gs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ha(t,n)}(e._query,this._field,this._direction);return new Rf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new fl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ip(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=vp("orderBy",e);return Ap._create(n,t)}function Tp(e,t,n){if("string"==typeof(n=dr(n))){if(""===n)throw new ms(gs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(t)&&-1!==n.indexOf("/"))throw new ms(gs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ls.fromString(n));if(!js.isDocumentKey(r))throw new ms(gs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return xa(e,new js(r))}if(n instanceof Df)return xa(e,n._key);throw new ms(gs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ws(n),"."))}function xp(e,t){if(!Array.isArray(e)||0===e.length)throw new ms(gs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Np(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ms(gs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ms(gs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class kp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return na(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw hs(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Wo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[va].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>na(e.doubleValue));return new Yf(n)}convertGeoPoint(e){return new qf(na(e.latitude),na(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ca(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ua(e));default:return null}}convertTimestamp(e){const t=ta(e);return new Qs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ls.fromString(e);fs(Cu(n),9688,{name:e});const r=new fa(n.get(1),n.get(3)),i=new js(n.popFirst(5));return r.isEqual(t)||ls("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Rp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mp extends mp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ms(gs.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Mp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mp._jsonSchema={type:qs("string",Mp._jsonSchemaVersion),bundleSource:qs("string","DocumentSnapshot"),bundleName:qs("string"),bundle:qs("string")};class Op extends Mp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Pp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Op(this._firestore,this._userDataWriter,n.key,n,new Dp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ms(gs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Op(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Dp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Op(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Dp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Lp(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ms(gs.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ts.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Lp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hs(61501,{type:e})}}function Fp(e){e=Gs(e,Df);const t=Gs(e.firestore,Uf);return Ef(Vf(t),e._key).then(n=>Gp(t,e,n))}Pp._jsonSchemaVersion="firestore/querySnapshot/1.0",Pp._jsonSchema={type:qs("string",Pp._jsonSchemaVersion),bundleSource:qs("string","QuerySnapshot"),bundleName:qs("string"),bundle:qs("string")};class Bp extends kp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Df(this.firestore,null,t)}}function jp(e,t,n){e=Gs(e,Df);const r=Gs(e.firestore,Uf),i=Rp(e.converter,t,n);return Wp(r,[tp(ep(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ac.none())])}function Up(e,t,n){e=Gs(e,Df);const r=Gs(e.firestore,Uf),i=ep(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=dr(t))||t instanceof Wf?sp(i,"updateDoc",e._key,t,n,a):ip(i,"updateDoc",e._key,t),Wp(r,[s.toMutation(e._key,ac.exists(!0))])}function Vp(e){return Wp(Gs(e.firestore,Uf),[new bc(e._key,ac.none())])}function zp(e,t){const n=Gs(e.firestore,Uf),r=Pf(e),i=Rp(e.converter,t);return Wp(n,[tp(ep(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ac.exists(!1))]).then(()=>r)}function Hp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=dr(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||jf(n[s])||(i=n[s++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(jf(n[s])){var a,l,c;const e=n[s];n[s]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,h,d;if(e instanceof Df)h=Gs(e.firestore,Uf),d=gl(e._key.path),u={next:t=>{n[s]&&n[s](Gp(h,e,t))},error:n[s+1],complete:n[s+2]};else{const t=Gs(e,Rf);h=Gs(t.firestore,Uf),d=t._query;const r=new Bp(h);u={next:e=>{n[s]&&n[s](new Pp(h,r,t,e))},error:n[s+1],complete:n[s+2]},wp(e._query)}return function(e,t,n,r){const i=new ff(r),s=new Dd(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Ad(await _f(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Id(await _f(e),s))}}(Vf(h),d,o,u)}function Wp(e,t){return function(e,t){const n=new ys;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=cf(e);try{const e=await function(e,t){const n=ps(e),r=Qs.now(),i=t.reduce((e,t)=>e.add(t.key),Vl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Dl(),l=Vl();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=fc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new mc(e.key,t,Ba(t.value.mapValue),ac.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Pl(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new qo(xs)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await sf(r,e.changes),await id(r.remoteStore)}catch(e){const t=vd(e,"Failed to persist write");n.reject(t)}}(await bf(e),t,n)),n.promise}(Vf(e),t)}function Gp(e,t,n){const r=n.docs.get(t._key),i=new Bp(e);return new Mp(e,i,t._key,r,new Dp(n.hasPendingWrites,n.fromCache),t.converter)}function qp(e){return new rp("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){is=e}(Ti),Ei(new fr("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Uf(new _s(e.getProvider("auth-internal")),new As(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ms(gs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ki(ts,ns,e),ki(ts,ns,"esm2020")}();ki("firebase","12.2.1","app");const Yp=["providerId"],Xp=["uid","auth","stsTokenManager"],Kp=["providerId","signInMethod"];function Qp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zp=Qp,Jp=new rr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$p=new Cr("@firebase/auth");function eg(e){if($p.logLevel<=vr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$p.error("Auth (".concat(Ti,"): ").concat(e),...n)}}function tg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw og(e,...n)}function ng(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return og(e,...n)}function rg(e,t,n){const r=c(c({},Zp()),{},{[t]:n});return new rr("auth","Firebase",r).create(t,{appName:e.name})}function ig(e){return rg(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sg(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&tg(e,"argument-error"),rg(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function og(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Jp.create(e,...n)}function ag(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw og(t,...r)}}function lg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw eg(t),new Error(t)}function cg(e,t){e||lg(t)}function ug(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function hg(){return"http:"===dg()||"https:"===dg()}function dg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function fg(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(hg()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class pg{constructor(e,t){this.shortDelay=e,this.longDelay=t,cg(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return fg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gg(e,t){cg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class mg{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void lg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void lg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void lg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vg=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wg=new pg(3e4,6e4);function bg(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function _g(e,t,n,r){return Eg(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ar(c({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Yn(e.emulatorConfig.host)&&(l.credentials="include"),mg.fetch()(await Sg(e,e.config.apiHost,n,o),l)})}async function Eg(e,t,n){e._canInitEmulator=!1;const r=c(c({},yg),t);try{const t=new Ig(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Tg(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Tg(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Tg(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Tg(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw rg(e,a,o);tg(e,a)}}catch(Vk){if(Vk instanceof nr)throw Vk;tg(e,"network-request-failed",{message:String(Vk)})}}async function Cg(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await _g(e,t,n,r,i);return"mfaPendingCredential"in s&&tg(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Sg(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?gg(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(vg.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Ag(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ig{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ng(this.auth,"network-request-failed")),wg.get())})}}function Tg(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ng(e,t,r);return i.customData._tokenResponse=n,i}function xg(e){return void 0!==e&&void 0!==e.enterprise}class Ng{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ag(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kg(e,t){return _g(e,"GET","/v2/recaptchaConfig",bg(e,t))}async function Rg(e,t){return _g(e,"POST","/v1/accounts:lookup",t)}function Dg(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Vk){}}function Mg(e){return 1e3*Number(e)}function Og(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return eg("JWT malformed, contained fewer than 3 sections"),null;try{const e=Un(n);return e?JSON.parse(e):(eg("Failed to decode base64 JWT payload"),null)}catch(Vk){return eg("Caught error parsing JWT payload as JSON",null===Vk||void 0===Vk?void 0:Vk.toString()),null}}function Pg(e){const t=Og(e);return ag(t,"internal-error"),ag("undefined"!==typeof t.exp,"internal-error"),ag("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Lg(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Vk){throw Vk instanceof nr&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Vk)&&e.auth.currentUser===e&&await e.auth.signOut(),Vk}}class Fg{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Vk){return void((null===Vk||void 0===Vk?void 0:Vk.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Bg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dg(this.lastLoginAt),this.creationTime=Dg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function jg(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Lg(e,Rg(n,{idToken:r}));ag(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?Ug(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Bg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Ug(e){return e.map(e=>{let{providerId:t}=e,n=i(e,Yp);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Vg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ag(e.idToken,"internal-error"),ag("undefined"!==typeof e.idToken,"internal-error"),ag("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ag(0!==e.length,"internal-error");const t=Pg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ag(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Eg(e,{},async()=>{const n=ar({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Sg(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&Yn(e.emulatorConfig.host)&&(a.credentials="include"),mg.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Vg;return n&&(ag("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ag("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ag("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vg,this.toJSON())}_performRefresh(){return lg("not implemented")}}function zg(e,t){ag("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Hg{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,Xp);this.providerId="firebase",this.proactiveRefresh=new Fg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Bg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Lg(this,this.stsTokenManager.getToken(this.auth,e));return ag(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=dr(e),r=await n.getIdToken(t),i=Og(r);ag(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dg(Mg(i.auth_time)),issuedAtTime:Dg(Mg(i.iat)),expirationTime:Dg(Mg(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=dr(e);await jg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ag(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hg(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ag(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await jg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(ig(this.auth));const e=await this.getIdToken();return await Lg(this,async function(e,t){return _g(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,g=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:_,providerData:E,stsTokenManager:C}=t;ag(w&&C,e,"internal-error");const S=Vg.fromJSON(this.name,C);ag("string"===typeof w,e,"internal-error"),zg(h,e.name),zg(d,e.name),ag("boolean"===typeof b,e,"internal-error"),ag("boolean"===typeof _,e,"internal-error"),zg(f,e.name),zg(p,e.name),zg(g,e.name),zg(m,e.name),zg(y,e.name),zg(v,e.name);const A=new Hg({uid:w,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:S,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(A.providerData=E.map(e=>c({},e))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Vg;r.updateFromServerResponse(t);const i=new Hg({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await jg(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ag(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Ug(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new Vg;o.updateFromIdToken(n);const a=new Hg({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Bg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const Wg=new Map;function Gg(e){cg(e instanceof Function,"Expected a class definition");let t=Wg.get(e);return t?(cg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Wg.set(e,t),t)}class qg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qg.type="NONE";const Yg=qg;function Xg(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Kg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Xg(this.userKey,r.apiKey,i),this.fullPersistenceKey=Xg("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Rg(this.auth,{idToken:e}).catch(()=>{});return t?Hg._fromGetAccountInfoResponse(this.auth,t,e):null}return Hg._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Kg(Gg(Yg),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Gg(Yg);const s=Xg(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Rg(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Hg._fromGetAccountInfoResponse(e,r,t)}else n=Hg._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new Kg(i,e,n)):new Kg(i,e,n)}}function Qg(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(em(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zg(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nm(t))return"Blackberry";if(rm(t))return"Webos";if(Jg(t))return"Safari";if((t.includes("chrome/")||$g(t))&&!t.includes("edge/"))return"Chrome";if(tm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Zg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/firefox\//i.test(e)}function Jg(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/crios\//i.test(e)}function em(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/iemobile/i.test(e)}function tm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/android/i.test(e)}function nm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/blackberry/i.test(e)}function rm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/webos/i.test(e)}function im(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sm(){return function(){const e=Jn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function om(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return im(e)||tm(e)||rm(e)||nm(e)||/windows phone/i.test(e)||em(e)}function am(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qg(Jn());break;case"Worker":t="".concat(Qg(Jn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ti,"/").concat(r)}class lm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Vk){r(Vk)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Vk){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Vk||void 0===Vk?void 0:Vk.message})}}}class cm{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class um{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dm(this),this.idTokenSubscription=new dm(this),this.beforeStateQueue=new lm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gg(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Kg.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Vk){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Rg(this,{idToken:e}),n=await Hg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Si(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(Vk){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Vk))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ag(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Vk){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jg(e)}catch(Vk){if((null===Vk||void 0===Vk?void 0:Vk.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(ig(this));const t=e?dr(e):null;return t&&ag(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ag(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(ig(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(ig(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gg(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return _g(e,"GET","/v2/passwordPolicy",bg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new cm(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return _g(e,"POST","/v2/accounts:revokeToken",bg(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gg(e)||this._popupRedirectResolver;ag(t,this,"argument-error"),this.redirectPersistenceManager=await Kg.create(this,[Gg(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ag(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ag(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=am(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if($p.logLevel<=vr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$p.warn("Auth (".concat(Ti,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function hm(e){return dr(e)}class dm{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ur(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ag(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pm(e){return fm.loadJS(e)}function gm(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class mm{constructor(){this.enterprise=new ym}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ym{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vm="NO_RECAPTCHA";class wm{constructor(e){this.type="recaptcha-enterprise",this.auth=hm(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;xg(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(vm)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new mm).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{kg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ng(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&xg(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=fm.recaptchaEnterpriseScript;0!==t.length&&(t+=i),pm(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function bm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new wm(e);let o;if(i)o=vm;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function _m(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await bm(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await bm(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await bm(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await bm(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await bm(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Em(e){const t=hm(e),n=await kg(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ng(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new wm(t).verify()}}function Cm(e,t,n){const r=hm(e);ag(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Sm(t),{host:o,port:a}=function(e){const t=Sm(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Am(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Am(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return ag(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void ag(sr(c,r.config.emulator)&&sr(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Yn(o)?(Xn("".concat(s,"//").concat(o).concat(l)),Zn("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Sm(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Am(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Im{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lg("not implemented")}_getIdTokenResponse(e){return lg("not implemented")}_linkToIdToken(e,t){return lg("not implemented")}_getReauthenticationResolver(e){return lg("not implemented")}}async function Tm(e,t){return _g(e,"POST","/v1/accounts:signUp",t)}async function xm(e,t){return Cg(e,"POST","/v1/accounts:signInWithPassword",bg(e,t))}class Nm extends Im{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Nm(e,t,"password")}static _fromEmailAndCode(e,t){return new Nm(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return _m(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",xm,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Cg(e,"POST","/v1/accounts:signInWithEmailLink",bg(e,t))}(e,{email:this._email,oobCode:this._password});default:tg(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return _m(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tm,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Cg(e,"POST","/v1/accounts:signInWithEmailLink",bg(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:tg(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function km(e,t){return Cg(e,"POST","/v1/accounts:signInWithIdp",bg(e,t))}class Rm extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Rm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tg("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,Kp);if(!n||!r)return null;const o=new Rm(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return km(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,km(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,km(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ar(t)}return e}}async function Dm(e,t){return _g(e,"POST","/v1/accounts:sendVerificationCode",bg(e,t))}const Mm={USER_NOT_FOUND:"user-not-found"};class Om extends Im{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Om({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Om({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Cg(e,"POST","/v1/accounts:signInWithPhoneNumber",bg(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Cg(e,"POST","/v1/accounts:signInWithPhoneNumber",bg(e,t));if(n.temporaryProof)throw Tg(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Cg(e,"POST","/v1/accounts:signInWithPhoneNumber",bg(e,c(c({},t),{},{operation:"REAUTH"})),Mm)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Om({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Pm{constructor(e){var t,n,r,i,s,o;const a=lr(cr(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ag(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=lr(cr(e)).link,n=t?lr(cr(t)).deep_link_id:null,r=lr(cr(e)).deep_link_id;return(r?lr(cr(r)).link:null)||r||n||t||e}(e);try{return new Pm(t)}catch(n){return null}}}class Lm{constructor(){this.providerId=Lm.PROVIDER_ID}static credential(e,t){return Nm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Pm.parseLink(t);return ag(n,"argument-error"),Nm._fromEmailAndCode(e,n.code,n.tenantId)}}Lm.PROVIDER_ID="password",Lm.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Lm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bm extends Fm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class jm extends Bm{constructor(){super("facebook.com")}static credential(e){return Rm._fromParams({providerId:jm.PROVIDER_ID,signInMethod:jm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jm.credentialFromTaggedObject(e)}static credentialFromError(e){return jm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return jm.credential(t.oauthAccessToken)}catch(n){return null}}}jm.FACEBOOK_SIGN_IN_METHOD="facebook.com",jm.PROVIDER_ID="facebook.com";class Um extends Bm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Rm._fromParams({providerId:Um.PROVIDER_ID,signInMethod:Um.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Um.credentialFromTaggedObject(e)}static credentialFromError(e){return Um.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Um.credential(n,r)}catch(i){return null}}}Um.GOOGLE_SIGN_IN_METHOD="google.com",Um.PROVIDER_ID="google.com";class Vm extends Bm{constructor(){super("github.com")}static credential(e){return Rm._fromParams({providerId:Vm.PROVIDER_ID,signInMethod:Vm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vm.credentialFromTaggedObject(e)}static credentialFromError(e){return Vm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Vm.credential(t.oauthAccessToken)}catch(n){return null}}}Vm.GITHUB_SIGN_IN_METHOD="github.com",Vm.PROVIDER_ID="github.com";class zm extends Bm{constructor(){super("twitter.com")}static credential(e,t){return Rm._fromParams({providerId:zm.PROVIDER_ID,signInMethod:zm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zm.credentialFromTaggedObject(e)}static credentialFromError(e){return zm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return zm.credential(n,r)}catch(i){return null}}}zm.TWITTER_SIGN_IN_METHOD="twitter.com",zm.PROVIDER_ID="twitter.com";class Hm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Hg._fromIdTokenResponse(e,n,r),s=Wm(n);return new Hm({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Wm(n);return new Hm({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Wm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Gm extends nr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Gm.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Gm(e,t,n,r)}}function qm(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Gm._fromErrorAndOperation(e,n,t,r);throw n})}async function Ym(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Lg(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Hm._forOperation(e,"link",r)}async function Xm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Si(r.app))return Promise.reject(ig(r));const i="reauthenticate";try{const s=await Lg(e,qm(r,i,t,e),n);ag(s.idToken,r,"internal-error");const o=Og(s.idToken);ag(o,r,"internal-error");const{sub:a}=o;return ag(e.uid===a,r,"user-mismatch"),Hm._forOperation(e,i,s)}catch(Vk){throw(null===Vk||void 0===Vk?void 0:Vk.code)==="auth/".concat("user-not-found")&&tg(r,"user-mismatch"),Vk}}async function Km(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Si(e.app))return Promise.reject(ig(e));const r="signIn",i=await qm(e,r,t),s=await Hm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Qm(e,t){return _g(e,"POST","/v2/accounts/mfaEnrollment:start",bg(e,t))}new WeakMap;const Zm="__sak";class Jm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class $m extends Jm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=om(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);sm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$m.type="LOCAL";const ey=$m;function ty(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function ny(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class ry{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=ny(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return ty(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=ny(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=ny(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=ty(n);const i=setInterval(()=>{const e=ty(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ry.type="COOKIE";class iy extends Jm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iy.type="SESSION";const sy=iy;class oy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new oy(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}oy.receivers=[];class ly{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=ay("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function cy(){return window}function uy(){return"undefined"!==typeof cy().WorkerGlobalScope&&"function"===typeof cy().importScripts}const hy="firebaseLocalStorageDb",dy="firebaseLocalStorage",fy="fbase_key";class py{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gy(e,t){return e.transaction([dy],t?"readwrite":"readonly").objectStore(dy)}function my(){const e=indexedDB.open(hy,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(dy,{keyPath:fy})}catch(Vk){n(Vk)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(dy)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(hy);return new py(e).toPromise()}(),t(await my()))})})}async function yy(e,t,n){const r=gy(e,!0).put({[fy]:t,value:n});return new py(r).toPromise()}function vy(e,t){const n=gy(e,!0).delete(t);return new py(n).toPromise()}class wy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await my()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Vk){if(t++>3)throw Vk;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oy._getInstance(uy()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new ly(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await my();return await yy(e,Zm,"1"),await vy(e,Zm),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yy(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=gy(e,!1).get(t),r=await new py(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=gy(e,!1).getAll();return new py(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}wy.type="LOCAL";const by=wy;function _y(e,t){return _g(e,"POST","/v2/accounts/mfaSignIn:start",bg(e,t))}gm("rcb"),new pg(3e4,6e4);const Ey="recaptcha";async function Cy(e,t,n){if(!e._getRecaptchaConfig())try{await Em(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){ag("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=_m(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===vm){ag((null===n||void 0===n?void 0:n.type)===Ey,e,"argument-error");return Qm(e,await Sy(e,t,n))}return Qm(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;ag("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;ag(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=_m(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===vm){ag((null===n||void 0===n?void 0:n.type)===Ey,e,"argument-error");return _y(e,await Sy(e,t,n))}return _y(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=_m(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===vm){ag((null===n||void 0===n?void 0:n.type)===Ey,e,"argument-error");return Dm(e,await Sy(e,t,n))}return Dm(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Sy(e,t,n){ag(n.type===Ey,e,"argument-error");const r=await n.verify();ag("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ay{constructor(e){this.providerId=Ay.PROVIDER_ID,this.auth=hm(e)}verifyPhoneNumber(e,t){return Cy(this.auth,e,dr(t))}static credential(e,t){return Om._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ay.credentialFromTaggedObject(t)}static credentialFromError(e){return Ay.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Om._fromTokenResponse(n,r):null}}function Iy(e,t){return t?Gg(t):(ag(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ay.PROVIDER_ID="phone",Ay.PHONE_SIGN_IN_METHOD="phone";class Ty extends Im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return km(e,this._buildIdpRequest())}_linkToIdToken(e,t){return km(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return km(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xy(e){return Km(e.auth,new Ty(e),e.bypassAuthState)}function Ny(e){const{auth:t,user:n}=e;return ag(n,t,"internal-error"),Xm(n,new Ty(e),e.bypassAuthState)}async function ky(e){const{auth:t,user:n}=e;return ag(n,t,"internal-error"),Ym(n,new Ty(e),e.bypassAuthState)}class Ry{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Vk){this.reject(Vk)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Vk){this.reject(Vk)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xy;case"linkViaPopup":case"linkViaRedirect":return ky;case"reauthViaPopup":case"reauthViaRedirect":return Ny;default:tg(this.auth,"internal-error")}}resolve(e){cg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dy=new pg(2e3,1e4);class My extends Ry{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,My.currentPopupAction&&My.currentPopupAction.cancel(),My.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ag(e,this.auth,"internal-error"),e}async onExecution(){cg(1===this.filter.length,"Popup operations only handle one event");const e=ay();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ng(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ng(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,My.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ng(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Dy.get())};e()}}My.currentPopupAction=null;const Oy=new Map;class Py extends Ry{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Oy.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=By(t),r=Fy(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Vk){e=()=>Promise.reject(Vk)}Oy.set(this.auth._key(),e)}return this.bypassAuthState||Oy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ly(e,t){Oy.set(e._key(),t)}function Fy(e){return Gg(e._redirectPersistence)}function By(e){return Xg("pendingRedirect",e.config.apiKey,e.name)}async function jy(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Si(e.app))return Promise.reject(ig(e));const r=hm(e),i=Iy(r,t),s=new Py(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Uy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zy(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zy(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ng(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vy(e))}saveEventToCache(e){this.cachedEventUids.add(Vy(e)),this.lastProcessedEventTime=Date.now()}}function Vy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function zy(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Hy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wy=/^https?/;async function Gy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return _g(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(qy(r))return}catch(n){}tg(e,"unauthorized-domain")}function qy(e){const t=ug(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Wy.test(n))return!1;if(Hy.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yy=new pg(3e4,6e4);function Xy(){const e=cy().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ky(e){return new Promise((t,n)=>{var r,i;function s(){Xy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xy(),n(ng(e,"network-request-failed"))},timeout:Yy.get()})}if(null!==(r=cy().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=cy().gapi)||void 0===i||!i.load){const t=gm("iframefcb");return cy()[t]=()=>{gapi.load?s():n(ng(e,"network-request-failed"))},pm("".concat(fm.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Qy=null,e})}let Qy=null;const Zy=new pg(5e3,15e3),Jy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$y=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ev(e){const t=e.config;ag(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?gg(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ti},i=$y.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ar(r).slice(1))}async function tv(e){const t=await function(e){return Qy=Qy||Ky(e),Qy}(e),n=cy().gapi;return ag(n,e,"internal-error"),t.open({where:document.body,url:ev(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jy,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ng(e,"network-request-failed"),s=cy().setTimeout(()=>{r(i)},Zy.get());function o(){cy().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const nv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Vk){}}}function iv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=c(c({},nv),{},{width:r.toString(),height:i.toString(),top:s,left:o}),u=Jn().toLowerCase();n&&(a=$g(u)?"_blank":n),Zg(u)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return im(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new rv(null);const d=window.open(t||"",a,h);ag(d,e,"popup-blocked");try{d.focus()}catch(Vk){}return new rv(d)}const sv="__/auth/handler",ov="emulator/auth/handler",av=encodeURIComponent("fac");async function lv(e,t,n,r,i,s){ag(e.config.authDomain,e,"auth-domain-config-required"),ag(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ti,eventId:i};if(t instanceof Fm){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Bm){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(av,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(sv);return gg(t,ov)}(e),"?").concat(ar(a).slice(1)).concat(c)}const cv="webStorageSupport";const uv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sy,this._completeRedirectFn=jy,this._overrideRedirectResult=Ly}async _openPopup(e,t,n,r){var i;cg(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return iv(e,await lv(e,t,n,ug(),r),ay())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){cy().location.href=e}(await lv(e,t,n,ug(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(cg(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await tv(e),n=new Uy(e);return t.register("authEvent",t=>{ag(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cv,{type:cv},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[cv];void 0!==i&&t(!!i),tg(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Gy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return om()||Jg()||im()}};var hv="@firebase/auth",dv="1.11.0";class fv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ag(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const pv=Gn("authIdTokenMaxAge")||300;let gv=null;var mv,yv;mv={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ng("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},fm=mv,yv="Browser",Ei(new fr("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ag(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:yv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:am(yv)},c=new um(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gg);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ei(new fr("auth-internal",e=>(e=>new fv(e))(hm(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ki(hv,dv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(yv)),ki(hv,dv,"esm2020");const vv=xi({apiKey:"AIzaSyBG5ThopzP4nAM3oD4pPtH852I5yQKNXFg",authDomain:"control-de-stock-44861.firebaseapp.com",projectId:"control-de-stock-44861",storageBucket:"control-de-stock-44861.firebasestorage.app",messagingSenderId:"336955632479",appId:"1:336955632479:web:47a9f32d72ffd0ef9524ea",measurementId:"G-F1V3R4Z3W4"}),wv=function(e,t){const n="object"==typeof e?e:Ni(),r="string"==typeof e?e:t||da,i=Ci(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=Hn(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&kf(i,...e)}return i}(vv),bv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ni();const t=Ci(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ci(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(sr(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;tg(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:uv,persistence:[by,ey,sy]}),r=Gn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>pv)return;const r=null===t||void 0===t?void 0:t.token;gv!==r&&(gv=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){dr(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){dr(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Hn("auth");return s&&Cm(n,"http://".concat(s)),n}(vv),_v=new Um;_v.setCustomParameters({prompt:"select_account"});const Ev=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const r=Pf(wv,"users",e);await jp(r,c(c({},n),{},{createdAt:new Date}),{merge:!0}),console.log("Documento b\xe1sico creado para el nuevo empleado: ".concat(e));const i=Pf(wv,"employeeToAdminMap",e);await jp(i,{adminId:t}),console.log("Mapeo de empleado a administrador establecido: ".concat(e," -> ").concat(t)),await(async(e,t)=>{try{const n=Pf(wv,"users",e),r=await Fp(n);if(r.exists()){const n=r.data(),i={};if(void 0!==n.role&&(i.role=n.role),void 0!==n.permissions&&(i.permissions=n.permissions),void 0!==n.accessLevel&&(i.accessLevel=n.accessLevel),Object.keys(i).length>0){const n=Pf(wv,"users",t);await jp(n,i,{merge:!0}),console.log("Permisos replicados de ".concat(e," a ").concat(t))}else console.log("No se encontraron campos de rol/permiso para replicar del usuario ".concat(e,"."))}else console.log("El usuario de origen ".concat(e," no existe."))}catch(n){throw console.error("Error al replicar permisos de usuario:",n),n}})(t,e),console.log("Permisos replicados del administrador ".concat(t," al nuevo empleado ").concat(e))}catch(r){throw console.error("Error al crear empleado y replicar permisos:",r),r}},Cv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Sv=e.createContext(null);function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(null,arguments)}n(740);function Iv(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Tv(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function xv(t,n){return Object.keys(n).reduce(function(i,s){var o,a=i,l=a[Iv(s)],c=a[s],u=r(a,[Iv(s),s].map(Tv)),h=n[s],d=function(t,n,r){var i=(0,e.useRef)(void 0!==t),s=(0,e.useState)(n),o=s[0],a=s[1],l=void 0!==t,c=i.current;return i.current=l,!l&&c&&o!==n&&a(n),[l?t:o,(0,e.useCallback)(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),a(e)},[r])]}(c,l,t[h]),f=d[0],p=d[1];return Av({},u,((o={})[s]=f,o[h]=p,o))},t)}function Nv(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function kv(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function Rv(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Nv.__suppressDeprecationWarning=!0,kv.__suppressDeprecationWarning=!0,Rv.__suppressDeprecationWarning=!0;const Dv=["bsPrefix","className","as"],Mv=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s}=e,o=i(e,Dv);n=v(n,"navbar-brand");const a=s||(o.href?"a":"span");return(0,d.jsx)(a,c(c({},o),{},{ref:t,className:h()(r,n)}))});Mv.displayName="NavbarBrand";const Ov=Mv;const Pv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>null!=e).reduce((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}},null)},Lv=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","in","timeout","mountOnEnter","unmountOnExit","appear","getDimensionValue"],Fv={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Bv(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=Fv[e];return n+parseInt(Ke(t,r[0]),10)+parseInt(Ke(t,r[1]),10)}const jv={[zt]:"collapse",[Gt]:"collapsing",[Ht]:"collapsing",[Wt]:"collapse show"},Uv=e.forwardRef((t,n)=>{let{onEnter:r,onEntering:s,onEntered:o,onExit:a,onExiting:l,className:u,children:f,dimension:p="height",in:g=!1,timeout:m=300,mountOnEnter:y=!1,unmountOnExit:v=!1,appear:w=!1,getDimensionValue:b=Bv}=t,_=i(t,Lv);const E="function"===typeof p?p():p,C=(0,e.useMemo)(()=>Pv(e=>{e.style[E]="0"},r),[E,r]),S=(0,e.useMemo)(()=>Pv(e=>{const t="scroll".concat(E[0].toUpperCase()).concat(E.slice(1));e.style[E]="".concat(e[t],"px")},s),[E,s]),A=(0,e.useMemo)(()=>Pv(e=>{e.style[E]=null},o),[E,o]),I=(0,e.useMemo)(()=>Pv(e=>{e.style[E]="".concat(b(E,e),"px"),Zt(e)},a),[a,b,E]),T=(0,e.useMemo)(()=>Pv(e=>{e.style[E]=null},l),[E,l]);return(0,d.jsx)(en,c(c({ref:n,addEndListener:Qt},_),{},{"aria-expanded":_.role?g:null,onEnter:C,onEntering:S,onEntered:A,onExit:I,onExiting:T,childRef:gt(f),in:g,timeout:m,mountOnEnter:y,unmountOnExit:v,appear:w,children:(t,n)=>e.cloneElement(f,c(c({},n),{},{className:h()(u,f.props.className,jv[t],"width"===E&&"collapse-horizontal")}))}))});Uv.displayName="Collapse";const Vv=Uv,zv=e.createContext(null);zv.displayName="NavbarContext";const Hv=zv,Wv=["children","bsPrefix"],Gv=e.forwardRef((t,n)=>{let{children:r,bsPrefix:s}=t,o=i(t,Wv);s=v(s,"navbar-collapse");const a=(0,e.useContext)(Hv);return(0,d.jsx)(Vv,c(c({in:!(!a||!a.expanded)},o),{},{children:(0,d.jsx)("div",{ref:n,className:s,children:r})}))});Gv.displayName="NavbarCollapse";const qv=Gv,Yv=["bsPrefix","className","children","label","as","onClick"],Xv=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,children:o,label:a="Toggle navigation",as:l="button",onClick:u}=t,f=i(t,Yv);r=v(r,"navbar-toggler");const{onToggle:p,expanded:g}=(0,e.useContext)(Hv)||{},m=Ue(e=>{u&&u(e),p&&p()});return"button"===l&&(f.type="button"),(0,d.jsx)(l,c(c({},f),{},{ref:n,onClick:m,"aria-label":a,className:h()(s,r,!g&&"collapsed"),children:o||(0,d.jsx)("span",{className:"".concat(r,"-icon")})}))});Xv.displayName="NavbarToggle";const Kv=Xv,Qv="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Zv="undefined"!==typeof document||Qv?e.useLayoutEffect:e.useEffect,Jv=new WeakMap,$v=(e,t)=>{if(!e||!t)return;const n=Jv.get(t)||new Map;Jv.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function ew(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const r=$v(t,n),[i,s]=(0,e.useState)(()=>!!r&&r.matches);return Zv(()=>{let e=$v(t,n);if(!e)return s(!1);let r=Jv.get(n);const i=()=>{s(e.matches)};return e.refCount++,e.addListener(i),i(),()=>{e.removeListener(i),e.refCount--,e.refCount<=0&&(null==r||r.delete(e.media)),e=void 0}},[t]),i}const tw=function(t){const n=Object.keys(t);function r(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(e){const r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(e);let i=t[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(n,s,o){let a;"object"===typeof n?(a=n,o=s,s=!0):(s=s||!0,a={[n]:s});let l=(0,e.useMemo)(()=>Object.entries(a).reduce((e,n)=>{let[s,o]=n;return"up"!==o&&!0!==o||(e=r(e,function(e){let n=t[e];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(s))),"down"!==o&&!0!==o||(e=r(e,i(s))),e},""),[JSON.stringify(a)]);return ew(l,o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),nw=tw,rw=["className","bsPrefix","as"],iw=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,rw);return r=v(r,"offcanvas-body"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});iw.displayName="OffcanvasBody";const sw=iw,ow=["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"],aw={[Ht]:"show",[Wt]:"show"},lw=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,children:o,in:a=!1,mountOnEnter:l=!1,unmountOnExit:u=!1,appear:f=!1}=t,p=i(t,ow);return r=v(r,"offcanvas"),(0,d.jsx)(en,c(c({ref:n,addEndListener:Qt,in:a,mountOnEnter:l,unmountOnExit:u,appear:f},p),{},{childRef:gt(o),children:(t,n)=>e.cloneElement(o,c(c({},n),{},{className:h()(s,o.props.className,(t===Ht||t===Gt)&&"".concat(r,"-toggling"),aw[t])}))}))});lw.displayName="OffcanvasToggling";const cw=lw,uw=["bsPrefix","className","closeLabel","closeButton"],hw=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,closeLabel:s="Close",closeButton:o=!1}=e,a=i(e,uw);return n=v(n,"offcanvas-header"),(0,d.jsx)(En,c(c({ref:t},a),{},{className:h()(r,n),closeLabel:s,closeButton:o}))});hw.displayName="OffcanvasHeader";const dw=hw,fw=["className","bsPrefix","as"],pw=In("h5"),gw=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=pw}=e,o=i(e,fw);return r=v(r,"offcanvas-title"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});gw.displayName="OffcanvasTitle";const mw=gw,yw=["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"];function vw(e){return(0,d.jsx)(cw,c({},e))}function ww(e){return(0,d.jsx)(sn,c({},e))}const bw=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,children:o,"aria-labelledby":a,placement:l="start",responsive:u,show:f=!1,backdrop:p=!0,keyboard:g=!0,scroll:m=!1,onEscapeKeyDown:y,onShow:w,onHide:b,container:_,autoFocus:E=!0,enforceFocus:C=!0,restoreFocus:S=!0,restoreFocusOptions:A,onEntered:I,onExit:T,onExiting:x,onEnter:N,onEntering:k,onExited:R,backdropClassName:D,manager:M,renderStaticNode:O=!1}=t,P=i(t,yw);const L=(0,e.useRef)();r=v(r,"offcanvas");const[F,B]=(0,e.useState)(!1),j=Ue(b),U=nw(u||"xs","up");(0,e.useEffect)(()=>{B(u?f&&!U:f)},[f,u,U]);const V=(0,e.useMemo)(()=>({onHide:j}),[j]);const z=(0,e.useCallback)(e=>(0,d.jsx)("div",c(c({},e),{},{className:h()("".concat(r,"-backdrop"),D)})),[D,r]),H=e=>(0,d.jsx)("div",c(c(c({},e),P),{},{className:h()(s,u?"".concat(r,"-").concat(u):r,"".concat(r,"-").concat(l)),"aria-labelledby":a,children:o}));return(0,d.jsxs)(d.Fragment,{children:[!F&&(u||O)&&H({}),(0,d.jsx)(cn.Provider,{value:V,children:(0,d.jsx)(Tt,{show:F,ref:n,backdrop:p,container:_,keyboard:g,autoFocus:E,enforceFocus:C&&!m,restoreFocus:S,restoreFocusOptions:A,onEscapeKeyDown:y,onShow:w,onHide:j,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==N||N(e,...n)},onEntering:k,onEntered:I,onExit:T,onExiting:x,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==R||R(...n)},manager:M||(m?(L.current||(L.current=new Ft({handleContainerOverflow:!1})),L.current):Lt()),transition:vw,backdropTransition:ww,renderBackdrop:z,renderDialog:H})})]})});bw.displayName="Offcanvas";const _w=Object.assign(bw,{Body:sw,Header:dw,Title:mw}),Ew=["onHide"],Cw=e.forwardRef((t,n)=>{let{onHide:r}=t,s=i(t,Ew);const o=(0,e.useContext)(Hv),a=Ue(()=>{null==o||null==o.onToggle||o.onToggle(),null==r||r()});return(0,d.jsx)(_w,c(c({ref:n,show:!(null==o||!o.expanded)},s),{},{renderStaticNode:!0,onHide:a}))});Cw.displayName="NavbarOffcanvas";const Sw=Cw,Aw=["className","bsPrefix","as"],Iw=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="span"}=e,o=i(e,Aw);return r=v(r,"navbar-text"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});Iw.displayName="NavbarText";const Tw=Iw,xw=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],Nw=e.forwardRef((t,n)=>{const r=xv(t,{expanded:"onToggle"}),{bsPrefix:s,expand:o=!0,variant:a="light",bg:l,fixed:u,sticky:f,className:p,as:g="nav",expanded:m,onToggle:y,onSelect:w,collapseOnSelect:b=!1}=r,_=i(r,xw),E=v(s,"navbar"),C=(0,e.useCallback)(function(){null==w||w(...arguments),b&&m&&(null==y||y(!1))},[w,b,m,y]);void 0===_.role&&"nav"!==g&&(_.role="navigation");let S="".concat(E,"-expand");"string"===typeof o&&(S="".concat(S,"-").concat(o));const A=(0,e.useMemo)(()=>({onToggle:()=>null==y?void 0:y(!m),bsPrefix:E,expanded:!!m,expand:o}),[E,m,o,y]);return(0,d.jsx)(Hv.Provider,{value:A,children:(0,d.jsx)(Sv.Provider,{value:C,children:(0,d.jsx)(g,c(c({ref:n},_),{},{className:h()(p,E,o&&S,a&&"".concat(E,"-").concat(a),l&&"bg-".concat(l),f&&"sticky-".concat(f),u&&"fixed-".concat(u))}))})})});Nw.displayName="Navbar";const kw=Object.assign(Nw,{Brand:Ov,Collapse:qv,Offcanvas:Sw,Text:Tw,Toggle:Kv});const Rw=e.createContext(null);Rw.displayName="NavContext";const Dw=Rw,Mw=e.createContext(null),Ow=["as","active","eventKey"];function Pw(t){let{key:n,onClick:r,active:i,id:s,role:o,disabled:a}=t;const l=(0,e.useContext)(Sv),c=(0,e.useContext)(Dw),u=(0,e.useContext)(Mw);let h=i;const d={role:o};if(c){o||"tablist"!==c.role||(d.role="tab");const e=c.getControllerId(null!=n?n:null),t=c.getControlledId(null!=n?n:null);d[st("event-key")]=n,d.id=e||s,h=null==i&&null!=n?c.activeKey===n:i,!h&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(d["aria-controls"]=t)}return"tab"===d.role&&(d["aria-selected"]=h,h||(d.tabIndex=-1),a&&(d.tabIndex=-1,d["aria-disabled"]=!0)),d.onClick=it(e=>{a||(null==r||r(e),null!=n&&l&&!e.isPropagationStopped()&&l(n,e))}),[d,{isActive:h}]}const Lw=e.forwardRef((e,t)=>{let{as:n=k,active:r,eventKey:i}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Ow);const[o,a]=Pw(Object.assign({key:Cv(i,s.href),active:r},s));return o[st("active")]=a.isActive,(0,d.jsx)(n,Object.assign({},s,o,{ref:t}))});Lw.displayName="NavItem";const Fw=Lw,Bw=["as","onSelect","activeKey","role","onKeyDown"];const jw=()=>{},Uw=st("event-key"),Vw=e.forwardRef((t,n)=>{let{as:r="div",onSelect:i,activeKey:s,role:o,onKeyDown:a}=t,l=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,Bw);const c=function(){const[,t]=(0,e.useReducer)(e=>e+1,0);return t}(),u=(0,e.useRef)(!1),h=(0,e.useContext)(Sv),f=(0,e.useContext)(Mw);let p,g;f&&(o=o||"tablist",s=f.activeKey,p=f.getControlledId,g=f.getControllerId);const m=(0,e.useRef)(null),y=e=>{const t=m.current;if(!t)return null;const n=Nt(t,"[".concat(Uw,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let s=i+e;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},v=(e,t)=>{null!=e&&(null==i||i(e,t),null==h||h(e,t))};(0,e.useEffect)(()=>{if(m.current&&u.current){const e=m.current.querySelector("[".concat(Uw,"][aria-selected=true]"));null==e||e.focus()}u.current=!1});const w=dt(n,m);return(0,d.jsx)(Sv.Provider,{value:v,children:(0,d.jsx)(Dw.Provider,{value:{role:o,activeKey:Cv(s),getControlledId:p||jw,getControllerId:g||jw},children:(0,d.jsx)(r,Object.assign({},l,{onKeyDown:e=>{if(null==a||a(e),!f)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=y(-1);break;case"ArrowRight":case"ArrowDown":t=y(1);break;default:return}t&&(e.preventDefault(),v(t.dataset[function(e){return"".concat("rrUi").concat(e)}("EventKey")]||null,e),u.current=!0,c())},ref:w,role:o}))})})});Vw.displayName="Nav";const zw=Object.assign(Vw,{Item:Fw}),Hw=e.createContext(null);Hw.displayName="CardHeaderContext";const Ww=Hw,Gw=["className","bsPrefix","as"],qw=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,Gw);return r=v(r,"nav-item"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});qw.displayName="NavItem";const Yw=qw;new WeakMap;const Xw=["onKeyDown"];const Kw=e.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Xw);const[i]=x(Object.assign({tagName:"a"},r)),s=it(e=>{i.onKeyDown(e),null==n||n(e)});return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,d.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,d.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var o});Kw.displayName="Anchor";const Qw=Kw,Zw=["bsPrefix","className","as","active","eventKey","disabled"],Jw=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s=Qw,active:o,eventKey:a,disabled:l=!1}=e,u=i(e,Zw);n=v(n,"nav-link");const[f,p]=Pw(c({key:Cv(a,u.href),active:o,disabled:l},u));return(0,d.jsx)(s,c(c(c({},u),f),{},{ref:t,disabled:l,className:h()(r,n,l&&"disabled",p.isActive&&"active")}))});Jw.displayName="NavLink";const $w=Jw,eb=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],tb=e.forwardRef((t,n)=>{const r=xv(t,{activeKey:"onSelect"}),{as:s="div",bsPrefix:o,variant:a,fill:l=!1,justify:u=!1,navbar:f,navbarScroll:p,className:g,activeKey:m}=r,y=i(r,eb),w=v(o,"nav");let b,_,E=!1;const C=(0,e.useContext)(Hv),S=(0,e.useContext)(Ww);return C?(b=C.bsPrefix,E=null==f||f):S&&({cardHeaderBsPrefix:_}=S),(0,d.jsx)(zw,c({as:s,ref:n,activeKey:m,className:h()(g,{[w]:!E,["".concat(b,"-nav")]:E,["".concat(b,"-nav-scroll")]:E&&p,["".concat(_,"-").concat(a)]:!!_,["".concat(w,"-").concat(a)]:!!a,["".concat(w,"-fill")]:l,["".concat(w,"-justified")]:u})},y))});tb.displayName="Nav";const nb=Object.assign(tb,{Item:Yw,Link:$w}),rb=e=>{let{searchTerm:t,onSearchChange:n,userEmail:r,onLogout:i,onNavigate:s}=e;return(0,d.jsx)(kw,{bg:"dark",variant:"dark",expand:"lg",sticky:"top",children:(0,d.jsxs)(C,{children:[(0,d.jsx)(kw.Brand,{href:"#",onClick:()=>s("main"),children:"Control de Stock"}),(0,d.jsx)(kw.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,d.jsxs)(kw.Collapse,{id:"basic-navbar-nav",children:[(0,d.jsxs)(nb,{className:"me-auto",children:[(0,d.jsx)(nb.Link,{onClick:()=>s("main"),children:"Inventario"}),(0,d.jsx)(nb.Link,{onClick:()=>s("reports"),children:"Reportes"}),(0,d.jsx)(nb.Link,{onClick:()=>s("sales"),children:"Ventas"})," "]}),(0,d.jsx)(Ne,{className:"d-flex mx-auto",style:{width:"50%"},children:(0,d.jsx)(Ne.Control,{type:"search",placeholder:"Buscar producto...",className:"me-2","aria-label":"Search",value:t,onChange:e=>n(e.target.value)})}),(0,d.jsxs)(nb,{children:[r&&(0,d.jsxs)(kw.Text,{className:"me-3",children:["Sesi\xf3n iniciada como: ",r]}),(0,d.jsx)(M,{variant:"outline-light",onClick:i,children:"Cerrar Sesi\xf3n"})]})]})]})})},ib=["className","bsPrefix","as"],sb=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,ib);return r=v(r,"card-body"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});sb.displayName="CardBody";const ob=sb,ab=["className","bsPrefix","as"],lb=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,ab);return r=v(r,"card-footer"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});lb.displayName="CardFooter";const cb=lb,ub=["bsPrefix","className","as"],hb=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,as:o="div"}=t,a=i(t,ub);const l=v(r,"card-header"),u=(0,e.useMemo)(()=>({cardHeaderBsPrefix:l}),[l]);return(0,d.jsx)(Ww.Provider,{value:u,children:(0,d.jsx)(o,c(c({ref:n},a),{},{className:h()(s,l)}))})});hb.displayName="CardHeader";const db=hb,fb=["bsPrefix","className","variant","as"],pb=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,variant:s,as:o="img"}=e,a=i(e,fb);const l=v(n,"card-img");return(0,d.jsx)(o,c({ref:t,className:h()(s?"".concat(l,"-").concat(s):l,r)},a))});pb.displayName="CardImg";const gb=pb,mb=["className","bsPrefix","as"],yb=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,o=i(e,mb);return r=v(r,"card-img-overlay"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});yb.displayName="CardImgOverlay";const vb=yb,wb=["className","bsPrefix","as"],bb=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="a"}=e,o=i(e,wb);return r=v(r,"card-link"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});bb.displayName="CardLink";const _b=bb,Eb=["className","bsPrefix","as"],Cb=In("h6"),Sb=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=Cb}=e,o=i(e,Eb);return r=v(r,"card-subtitle"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});Sb.displayName="CardSubtitle";const Ab=Sb,Ib=["className","bsPrefix","as"],Tb=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="p"}=e,o=i(e,Ib);return r=v(r,"card-text"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});Tb.displayName="CardText";const xb=Tb,Nb=["className","bsPrefix","as"],kb=In("h5"),Rb=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=kb}=e,o=i(e,Nb);return r=v(r,"card-title"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});Rb.displayName="CardTitle";const Db=Rb,Mb=["bsPrefix","className","bg","text","border","body","children","as"],Ob=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,bg:s,text:o,border:a,body:l=!1,children:u,as:f="div"}=e,p=i(e,Mb);const g=v(n,"card");return(0,d.jsx)(f,c(c({ref:t},p),{},{className:h()(r,g,s&&"bg-".concat(s),o&&"text-".concat(o),a&&"border-".concat(a)),children:l?(0,d.jsx)(ob,{children:u}):u}))});Ob.displayName="Card";const Pb=Object.assign(Ob,{Img:gb,Title:Db,Subtitle:Ab,Body:ob,Link:_b,Text:xb,Header:db,Footer:cb,ImgOverlay:vb}),Lb=e=>{let{onLoginSuccess:t}=e;return(0,d.jsx)(C,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:(0,d.jsx)(Pb,{className:"p-4",style:{maxWidth:"400px",width:"100%"},children:(0,d.jsxs)(Pb.Body,{children:[(0,d.jsx)("h2",{className:"text-center mb-4",children:"Iniciar Sesi\xf3n"}),(0,d.jsx)(M,{variant:"primary",className:"w-100",onClick:async()=>{try{await async function(e,t,n){if(Si(e.app))return Promise.reject(ng(e,"operation-not-supported-in-this-environment"));const r=hm(e);sg(e,t,Fm);const i=Iy(r,n);return new My(r,"signInViaPopup",t,i).executeNotNull()}(bv,_v),t()}catch(e){console.error("Error signing in with Google: ",e),alert("Error al iniciar sesi\xf3n con Google. Por favor, int\xe9ntalo de nuevo.")}},children:"Iniciar Sesi\xf3n con Google"})]})})})},Fb=["bsPrefix","className","as"],Bb=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s="div"}=e,o=i(e,Fb);const a=v(n,"row"),l=w(),u=b(),f="".concat(a,"-cols"),p=[];return l.forEach(e=>{const t=o[e];let n;delete o[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==u?"-".concat(e):"";null!=n&&p.push("".concat(f).concat(r,"-").concat(n))}),(0,d.jsx)(s,c(c({ref:t},o),{},{className:h()(r,a,...p)}))});Bb.displayName="Row";const jb=Bb,Ub=["bsPrefix","bg","pill","text","className","as"],Vb=e.forwardRef((e,t)=>{let{bsPrefix:n,bg:r="primary",pill:s=!1,text:o,className:a,as:l="span"}=e,u=i(e,Ub);const f=v(n,"badge");return(0,d.jsx)(l,c(c({ref:t},u),{},{className:h()(a,f,s&&"rounded-pill",o&&"text-".concat(o),r&&"bg-".concat(r))}))});Vb.displayName="Badge";const zb=Vb,Hb=e=>{let{products:t,onStockChange:n,onDeleteProduct:r,onStartEdit:i,onShowHistory:s,onGenerateOrder:o,userRole:a}=e;return(0,d.jsx)(jb,{xs:1,md:2,lg:3,xl:4,className:"g-4",children:t.map(e=>(console.log("Product: ".concat(e.name,", Stock: ").concat(e.stock,", MinStock: ").concat(e.minStock)),(0,d.jsx)(le,{children:(0,d.jsx)(Pb,{className:"product-card h-100",style:{backgroundImage:"url(".concat(e.imageUrl,")")},children:(0,d.jsxs)("div",{className:"card-body-overlay",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(Pb.Title,{className:"d-flex justify-content-between align-items-start",children:[e.name,(0,d.jsxs)(zb,{bg:0===e.stock?"danger":e.stock<=(e.minStock||0)?"warning":"success",pill:!0,children:[e.stock," en Stock"]})]}),(0,d.jsx)(Pb.Subtitle,{className:"mb-2 text-muted",children:e.category}),(0,d.jsx)(Pb.Text,{children:e.description}),(0,d.jsxs)(Pb.Text,{className:"fs-4 fw-bold",children:["$",e.price.toFixed(2)]})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,d.jsx)(M,{variant:"outline-light",size:"sm",onClick:()=>n(e.id,-1),disabled:"viewer"===a,children:"-1"}),(0,d.jsx)("span",{className:"mx-2",children:"Ajustar Stock"}),(0,d.jsx)(M,{variant:"outline-light",size:"sm",onClick:()=>n(e.id,1),disabled:"viewer"===a,children:"+1"})]}),(0,d.jsxs)("div",{className:"d-grid gap-2",children:[(0,d.jsx)(M,{variant:"outline-primary",onClick:()=>i(e),disabled:"viewer"===a,children:"Editar"}),(0,d.jsx)(M,{variant:"outline-info",size:"sm",onClick:()=>{console.log("Historial button clicked for product:",e.name),s(e)},children:"Historial"}),e.stock<=(e.minStock||0)&&(0,d.jsx)(M,{variant:"outline-warning",size:"sm",onClick:()=>o(e),disabled:"viewer"===a,children:"Generar Pedido"}),(0,d.jsx)(M,{variant:"outline-danger",onClick:()=>r(e.id),disabled:"viewer"===a,children:"Eliminar"})]})]})]})})},e.id)))})},Wb=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],Gb=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,striped:s,bordered:o,borderless:a,hover:l,size:u,variant:f,responsive:p}=e,g=i(e,Wb);const m=v(n,"table"),y=h()(r,m,f&&"".concat(m,"-").concat(f),u&&"".concat(m,"-").concat(u),s&&"".concat(m,"-").concat("string"===typeof s?"striped-".concat(s):"striped"),o&&"".concat(m,"-bordered"),a&&"".concat(m,"-borderless"),l&&"".concat(m,"-hover")),w=(0,d.jsx)("table",c(c({},g),{},{className:y,ref:t}));if(p){let e="".concat(m,"-responsive");return"string"===typeof p&&(e="".concat(e,"-").concat(p)),(0,d.jsx)("div",{className:e,children:w})}return w});Gb.displayName="Table";const qb=Gb,Yb=t=>{let{products:n,onStockChange:r,onDeleteProduct:i,onStartEdit:s,onShowHistory:o,onGenerateOrder:a,userRole:l}=t;const[u,h]=(0,e.useState)({});e.useEffect(()=>{const e={};n.forEach(t=>{e[t.id]=t.stock}),h(e)},[n]);return(0,d.jsxs)(qb,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mt-4",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"text-nowrap",children:"Nombre"}),(0,d.jsx)("th",{className:"text-nowrap",children:"Categor\xeda"}),(0,d.jsx)("th",{className:"text-nowrap",children:"Proveedor"}),(0,d.jsx)("th",{className:"text-nowrap text-end",children:"Precio Costo"}),(0,d.jsx)("th",{className:"text-nowrap text-end",children:"Precio Venta"}),(0,d.jsx)("th",{className:"text-nowrap text-center",children:"Stock"}),(0,d.jsx)("th",{className:"text-nowrap text-center",children:"Acciones"})]})}),(0,d.jsx)("tbody",{children:n.map(e=>{const t=u[e.id];return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("strong",{className:"text-primary",children:e.name})}),(0,d.jsx)("td",{children:e.category}),(0,d.jsx)("td",{children:e.supplierName||"N/A"}),(0,d.jsxs)("td",{className:"text-end",children:["$",e.costPrice?e.costPrice.toFixed(2):"N/A"]}),(0,d.jsxs)("td",{className:"text-end",children:["$",e.price.toFixed(2)]}),(0,d.jsxs)("td",{className:"text-center",children:[(0,d.jsxs)("div",{className:"d-flex align-items-center justify-content-center flex-wrap",children:[(0,d.jsx)(M,{variant:"outline-secondary",size:"sm",onClick:()=>r(e.id,-1),disabled:"viewer"===l,children:"-"}),(0,d.jsx)(Ne.Control,{type:"number",size:"sm",value:t,onChange:t=>{return n=e.id,r=t.target.value,void h(e=>c(c({},e),{},{[n]:parseInt(r,10)||0}));var n,r},style:{width:"60px",textAlign:"center",margin:"0 5px"},disabled:"viewer"===l}),(0,d.jsx)(M,{variant:"outline-secondary",size:"sm",onClick:()=>r(e.id,1),disabled:"viewer"===l,children:"+"}),t!==e.stock&&(0,d.jsx)(M,{variant:"primary",size:"sm",onClick:()=>((e,t)=>{const n=u[e];void 0!==n&&n!==t&&r(e,n-t)})(e.id,e.stock),className:"ms-2",disabled:"viewer"===l,children:"Guardar"})]}),(0,d.jsx)(zb,{bg:0===e.stock?"danger":e.stock<=(e.minStock||0)?"warning":"success",pill:!0,className:"mt-1"})]}),(0,d.jsx)("td",{className:"text-center",children:(0,d.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-1 justify-content-center flex-wrap",children:[(0,d.jsx)(M,{variant:"outline-primary",size:"sm",onClick:()=>s(e),disabled:"viewer"===l,children:"Editar"}),(0,d.jsx)(M,{variant:"outline-info",size:"sm",onClick:()=>{console.log("Historial button clicked for product:",e.name),o(e)},children:"Historial"}),e.stock<=(e.minStock||0)&&(0,d.jsx)(M,{variant:"outline-warning",size:"sm",onClick:()=>a(e),disabled:"viewer"===l,children:"Generar Pedido"}),(0,d.jsx)(M,{variant:"outline-danger",size:"sm",onClick:()=>i(e.id),disabled:"viewer"===l,children:"Eliminar"})]})})]},e.id)})})]})},Xb=t=>{let{show:n,handleClose:r,onAddProduct:i,onUpdateProduct:s,productToEdit:o,categories:a,suppliers:l,userRole:u}=t;const[h,f]=(0,e.useState)({name:"",description:"",stock:0,price:0,costPrice:0,category:"",supplierId:"",minStock:0,barcode:""});(0,e.useEffect)(()=>{f(o?{name:o.name||"",description:o.description||"",stock:o.stock||0,price:o.price||0,costPrice:o.costPrice||0,category:o.category||"",supplierId:o.supplierId||"",minStock:o.minStock||0,barcode:o.barcode||""}:{name:"",description:"",stock:0,price:0,costPrice:0,category:"",supplierId:"",minStock:0,barcode:""})},[o,n]);const p=e=>{const{name:t,value:n}=e.target;f(e=>c(c({},e),{},{[t]:n}))},[g,m]=(0,e.useState)(""),[y,v]=(0,e.useState)("");(0,e.useEffect)(()=>{m(h.price),v(h.costPrice)},[h.price,h.costPrice]);const w=Number(g)||Number(h.price)||0,b=Number(y)||Number(h.costPrice)||0,_=((e,t)=>{if(0===e)return 0;return((e-t)/e*100).toFixed(2)})(w,b),E=(w-b).toFixed(2);return(0,d.jsxs)(Pn,{show:n,onHide:r,size:"lg",children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:o?"Editar Producto":"A\xf1adir Producto"})}),(0,d.jsxs)(Ne,{onSubmit:e=>{if(e.preventDefault(),"viewer"===u)return void alert("No tienes permisos para realizar esta acci\xf3n.");const t=c(c({},h),{},{stock:Number(h.stock)||0,price:Number(h.price)||0,costPrice:Number(h.costPrice)||0,minStock:Number(h.minStock)||0});o?s(c(c({},t),{},{id:o.id,imageUrl:o.imageUrl})):i(t)},children:[(0,d.jsxs)(Pn.Body,{children:[(0,d.jsxs)(Ne.Group,{controlId:"productName",className:"mb-3",children:[(0,d.jsx)(Ne.Label,{children:"Nombre del Producto"}),(0,d.jsx)(Ne.Control,{type:"text",name:"name",value:h.name,onChange:p,required:!0,disabled:"viewer"===u})]}),(0,d.jsxs)(Ne.Group,{controlId:"productDescription",className:"mb-3",children:[(0,d.jsx)(Ne.Label,{children:"Descripci\xf3n"}),(0,d.jsx)(Ne.Control,{as:"textarea",rows:3,name:"description",value:h.description,onChange:p,disabled:"viewer"===u})]}),(0,d.jsxs)(jb,{className:"mb-3",children:[(0,d.jsx)(le,{md:4,children:(0,d.jsxs)(Ne.Group,{controlId:"productCostPrice",children:[(0,d.jsx)(Ne.Label,{children:"Precio de Costo"}),(0,d.jsx)(Ne.Control,{type:"number",name:"costPrice",value:h.costPrice,onChange:p,step:"0.01",disabled:"viewer"===u})]})}),(0,d.jsx)(le,{md:4,children:(0,d.jsxs)(Ne.Group,{controlId:"productPrice",children:[(0,d.jsx)(Ne.Label,{children:"Precio de Venta"}),(0,d.jsx)(Ne.Control,{type:"number",name:"price",value:h.price,onChange:p,required:!0,step:"0.01",disabled:"viewer"===u})]})}),(0,d.jsx)(le,{md:4,className:"d-flex align-items-end",children:(0,d.jsxs)("div",{children:[(0,d.jsx)(Ne.Label,{children:"Margen de Ganancia"}),(0,d.jsx)("h4",{children:(0,d.jsxs)(zb,{bg:Number(_)<15?"danger":Number(_)<40?"warning":"success",children:[_,"%"]})}),(0,d.jsxs)("p",{className:"mb-0",children:["Ganancia Bruta: $",E]})]})})]}),(0,d.jsx)("hr",{className:"my-4"}),(0,d.jsx)("h5",{children:"Simulador de Rentabilidad"}),(0,d.jsxs)(jb,{className:"mb-3",children:[(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Ne.Group,{controlId:"simulatedCost",children:[(0,d.jsx)(Ne.Label,{children:"Simular Precio de Costo"}),(0,d.jsx)(Ne.Control,{type:"number",value:y,onChange:e=>v(e.target.value),step:"0.01"})]})}),(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Ne.Group,{controlId:"simulatedPrice",children:[(0,d.jsx)(Ne.Label,{children:"Simular Precio de Venta"}),(0,d.jsx)(Ne.Control,{type:"number",value:g,onChange:e=>m(e.target.value),step:"0.01"})]})})]}),(0,d.jsxs)(jb,{className:"mb-3",children:[(0,d.jsx)(le,{md:6,children:(0,d.jsxs)("p",{className:"mb-0",children:["Margen Simulado: ",(0,d.jsx)("strong",{children:(0,d.jsxs)(zb,{bg:Number(_)<15?"danger":Number(_)<40?"warning":"success",children:[_,"%"]})})]})}),(0,d.jsx)(le,{md:6,children:(0,d.jsxs)("p",{className:"mb-0",children:["Ganancia Bruta Simulada: ",(0,d.jsxs)("strong",{children:["$",E]})]})})]}),(0,d.jsxs)(jb,{className:"mb-3",children:[(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Ne.Group,{controlId:"productStock",children:[(0,d.jsx)(Ne.Label,{children:"Stock Actual"}),(0,d.jsx)(Ne.Control,{type:"number",name:"stock",value:h.stock,onChange:p,required:!0,disabled:"viewer"===u})]})}),(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Ne.Group,{controlId:"productMinStock",children:[(0,d.jsx)(Ne.Label,{children:"Stock M\xednimo"}),(0,d.jsx)(Ne.Control,{type:"number",name:"minStock",value:h.minStock,onChange:p,disabled:"viewer"===u})]})})]}),(0,d.jsxs)(jb,{className:"mb-3",children:[(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Ne.Group,{controlId:"productCategory",children:[(0,d.jsx)(Ne.Label,{children:"Categor\xeda"}),(0,d.jsxs)(Ne.Select,{name:"category",value:h.category,onChange:p,disabled:"viewer"===u,children:[(0,d.jsx)("option",{value:"",children:"Sin categor\xeda"}),a.map(e=>(0,d.jsx)("option",{value:e.name,children:e.name},e.id))]})]})}),(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Ne.Group,{controlId:"productSupplier",children:[(0,d.jsx)(Ne.Label,{children:"Proveedor"}),(0,d.jsxs)(Ne.Select,{name:"supplierId",value:h.supplierId,onChange:p,disabled:"viewer"===u,children:[(0,d.jsx)("option",{value:"",children:"Sin proveedor"}),l.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id))]})]})})]}),(0,d.jsxs)(Ne.Group,{controlId:"productBarcode",className:"mb-3",children:[(0,d.jsx)(Ne.Label,{children:"C\xf3digo de Barras"}),(0,d.jsx)(Ne.Control,{type:"text",name:"barcode",value:h.barcode,onChange:p,disabled:"viewer"===u})]})]}),(0,d.jsxs)(Pn.Footer,{children:[(0,d.jsx)(M,{variant:"secondary",onClick:r,children:"Cancelar"}),"viewer"!==u&&(0,d.jsx)(M,{variant:"primary",type:"submit",children:o?"Actualizar":"Guardar"})]})]})]})};function Kb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;const r=[];return Object.entries(e).forEach(e=>{let[i,s]=e;null!=s&&("object"===typeof s?t.forEach(e=>{const t=s[e];if(null!=t){const s=e!==n?"-".concat(e):"";r.push("".concat(i).concat(s,"-").concat(t))}}):r.push("".concat(i,"-").concat(s)))}),r}const Qb=["as","bsPrefix","className","direction","gap"],Zb=e.forwardRef((e,t)=>{let{as:n="div",bsPrefix:r,className:s,direction:o,gap:a}=e,l=i(e,Qb);r=v(r,"horizontal"===o?"hstack":"vstack");const u=w(),f=b();return(0,d.jsx)(n,c(c({},l),{},{ref:t,className:h()(s,r,...Kb({gap:a},u,f))}))});Zb.displayName="Stack";const Jb=Zb,$b=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],e_=e.forwardRef((e,t)=>{let{bsPrefix:n,active:r,disabled:s,eventKey:o,className:a,variant:l,action:u,as:f}=e,p=i(e,$b);n=v(n,"list-group-item");const[g,m]=Pw(c({key:Cv(o,p.href),active:r},p)),y=Ue(e=>{if(s)return e.preventDefault(),void e.stopPropagation();g.onClick(e)});s&&void 0===p.tabIndex&&(p.tabIndex=-1,p["aria-disabled"]=!0);const w=f||(u?p.href?"a":"button":"div");return(0,d.jsx)(w,c(c(c({ref:t},p),g),{},{onClick:y,className:h()(a,n,m.isActive&&"active",s&&"disabled",l&&"".concat(n,"-").concat(l),u&&"".concat(n,"-action"))}))});e_.displayName="ListGroupItem";const t_=e_,n_=["className","bsPrefix","variant","horizontal","numbered","as"],r_=e.forwardRef((e,t)=>{const n=xv(e,{activeKey:"onSelect"}),{className:r,bsPrefix:s,variant:o,horizontal:a,numbered:l,as:u="div"}=n,f=i(n,n_),p=v(s,"list-group");let g;return a&&(g=!0===a?"horizontal":"horizontal-".concat(a)),(0,d.jsx)(zw,c(c({ref:t},f),{},{as:u,className:h()(r,p,o&&"".concat(p,"-").concat(o),g&&"".concat(p,"-").concat(g),l&&"".concat(p,"-numbered"))}))});r_.displayName="ListGroup";const i_=Object.assign(r_,{Item:t_}),s_=e=>{let{categories:t,onAdd:n,onDelete:r,userRole:i}=e;return(0,d.jsxs)(Jb,{gap:3,children:[(0,d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,d.jsx)("h4",{className:"mb-0",children:"Gestionar Categor\xedas"}),(0,d.jsx)(M,{variant:"primary",onClick:n,disabled:"viewer"===i,children:"+ Nueva Categor\xeda"})]}),(0,d.jsx)(i_,{children:t.map(e=>(0,d.jsxs)(i_.Item,{className:"d-flex justify-content-between align-items-center",children:[e.name,(0,d.jsx)(M,{variant:"outline-danger",size:"sm",onClick:()=>r(e.id),disabled:"viewer"===i,children:"Eliminar"})]},e.id))})]})},o_=t=>{let{show:n,handleClose:r,onSave:i,userRole:s}=t;const[o,a]=(0,e.useState)("");(0,e.useEffect)(()=>{n&&a("")},[n]);return(0,d.jsxs)(Pn,{show:n,onHide:r,centered:!0,children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:"Nueva Categor\xeda"})}),(0,d.jsx)(Pn.Body,{children:(0,d.jsx)(Ne,{children:(0,d.jsxs)(Ne.Group,{className:"mb-3",controlId:"formCategoryName",children:[(0,d.jsx)(Ne.Label,{children:"Nombre de la Categor\xeda"}),(0,d.jsx)(Ne.Control,{type:"text",placeholder:"Ej: Limpieza de Ba\xf1os",value:o,onChange:e=>a(e.target.value),autoFocus:!0})]})})}),(0,d.jsxs)(Pn.Footer,{children:[(0,d.jsx)(M,{variant:"secondary",onClick:r,children:"Cerrar"}),(0,d.jsx)(M,{variant:"primary",onClick:()=>{o.trim()&&(i(o.trim()),r())},disabled:"viewer"===s,children:"Guardar"})]})]})},a_=e=>{let{movements:t}=e;return(0,d.jsxs)(qb,{striped:!0,bordered:!0,hover:!0,responsive:!0,size:"sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Fecha"}),(0,d.jsx)("th",{children:"Tipo"}),(0,d.jsx)("th",{children:"Cantidad"})]})}),(0,d.jsx)("tbody",{children:t.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:new Date(e.date).toLocaleString()}),(0,d.jsx)("td",{children:e.type}),(0,d.jsx)("td",{children:e.amount})]},e.id))})]})},l_=e=>{let{show:t,handleClose:n,movements:r,productName:i}=e;return(0,d.jsxs)(Pn,{show:t,onHide:n,centered:!0,size:"lg",children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsxs)(Pn.Title,{children:["Historial de Movimientos: ",i]})}),(0,d.jsx)(Pn.Body,{children:(0,d.jsx)(a_,{movements:r})}),(0,d.jsx)(Pn.Footer,{children:(0,d.jsx)(M,{variant:"secondary",onClick:n,children:"Cerrar"})})]})},c_=e=>{let{suppliers:t,onAdd:n,onEdit:r,onDelete:i,userRole:s}=e;return(0,d.jsxs)(Jb,{gap:3,children:[(0,d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,d.jsx)("h4",{className:"mb-0",children:"Gestionar Proveedores"}),(0,d.jsx)(M,{variant:"primary",onClick:n,disabled:"viewer"===s,children:"+ Nuevo Proveedor"})]}),(0,d.jsx)(i_,{children:t.map(e=>(0,d.jsxs)(i_.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:e.name}),(0,d.jsx)("br",{}),(0,d.jsxs)("small",{className:"text-muted",children:[e.contactPerson," - ",e.phone]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(M,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>r(e),disabled:"viewer"===s,children:"Editar"}),(0,d.jsx)(M,{variant:"outline-danger",size:"sm",onClick:()=>i(e.id),disabled:"viewer"===s,children:"Eliminar"})]})]},e.id))})]})},u_=t=>{let{show:n,handleClose:r,onSave:i,supplierToEdit:s,userRole:o}=t;const[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(""),[h,f]=(0,e.useState)(""),[p,g]=(0,e.useState)(""),m=null!==s;(0,e.useEffect)(()=>{n&&(m?(l(s.name),u(s.contactPerson||""),f(s.phone||""),g(s.email||"")):(l(""),u(""),f(""),g("")))},[n,s,m]);return(0,d.jsxs)(Pn,{show:n,onHide:r,centered:!0,children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:m?"Editar Proveedor":"Nuevo Proveedor"})}),(0,d.jsx)(Pn.Body,{children:(0,d.jsxs)(Ne,{children:[(0,d.jsxs)(Ne.Group,{className:"mb-3",controlId:"formSupplierName",children:[(0,d.jsx)(Ne.Label,{children:"Nombre del Proveedor"}),(0,d.jsx)(Ne.Control,{type:"text",placeholder:"Ej: Proveedor S.A.",value:a,onChange:e=>l(e.target.value),required:!0,autoFocus:!0})]}),(0,d.jsxs)(Ne.Group,{className:"mb-3",controlId:"formSupplierContact",children:[(0,d.jsx)(Ne.Label,{children:"Persona de Contacto"}),(0,d.jsx)(Ne.Control,{type:"text",placeholder:"Ej: Juan P\xe9rez",value:c,onChange:e=>u(e.target.value)})]}),(0,d.jsxs)(Ne.Group,{className:"mb-3",controlId:"formSupplierPhone",children:[(0,d.jsx)(Ne.Label,{children:"Tel\xe9fono"}),(0,d.jsx)(Ne.Control,{type:"text",placeholder:"Ej: +54 11 1234-5678",value:h,onChange:e=>f(e.target.value)})]}),(0,d.jsxs)(Ne.Group,{className:"mb-3",controlId:"formSupplierEmail",children:[(0,d.jsx)(Ne.Label,{children:"Email"}),(0,d.jsx)(Ne.Control,{type:"email",placeholder:"Ej: contacto@proveedor.com",value:p,onChange:e=>g(e.target.value)})]})]})}),(0,d.jsxs)(Pn.Footer,{children:[(0,d.jsx)(M,{variant:"secondary",onClick:r,children:"Cerrar"}),(0,d.jsx)(M,{variant:"primary",onClick:()=>{a.trim()?(i({name:a,contactPerson:c,phone:h,email:p}),r()):alert("El nombre del proveedor es obligatorio.")},disabled:"viewer"===o,children:"Guardar"})]})]})};var h_;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(h_||(h_={}));var d_,f_,p_=new Map([[h_.QR_CODE,"QR_CODE"],[h_.AZTEC,"AZTEC"],[h_.CODABAR,"CODABAR"],[h_.CODE_39,"CODE_39"],[h_.CODE_93,"CODE_93"],[h_.CODE_128,"CODE_128"],[h_.DATA_MATRIX,"DATA_MATRIX"],[h_.MAXICODE,"MAXICODE"],[h_.ITF,"ITF"],[h_.EAN_13,"EAN_13"],[h_.EAN_8,"EAN_8"],[h_.PDF_417,"PDF_417"],[h_.RSS_14,"RSS_14"],[h_.RSS_EXPANDED,"RSS_EXPANDED"],[h_.UPC_A,"UPC_A"],[h_.UPC_E,"UPC_E"],[h_.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function g_(e){return Object.values(h_).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(d_||(d_={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(f_||(f_={}));var m_,y_=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[f_.SCAN_TYPE_CAMERA,f_.SCAN_TYPE_FILE],e}(),v_=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!p_.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,p_.get(t))},e}(),w_=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(m_||(m_={}));var b_=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:m_.UNKWOWN_ERROR}},e}(),__=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function E_(e){return"undefined"===typeof e||null===e}var C_,S_=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),A_=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),I_=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),T_=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,s=Object.keys(e);i<s.length;i++){var o=s[i];if(r.has(o))return t.logError("".concat(o," is not supported videoConstaints."),!0),!1}return!0},e}(),x_=n(72),N_=function(){function e(e,t,n){if(this.formatMap=new Map([[h_.QR_CODE,x_.BarcodeFormat.QR_CODE],[h_.AZTEC,x_.BarcodeFormat.AZTEC],[h_.CODABAR,x_.BarcodeFormat.CODABAR],[h_.CODE_39,x_.BarcodeFormat.CODE_39],[h_.CODE_93,x_.BarcodeFormat.CODE_93],[h_.CODE_128,x_.BarcodeFormat.CODE_128],[h_.DATA_MATRIX,x_.BarcodeFormat.DATA_MATRIX],[h_.MAXICODE,x_.BarcodeFormat.MAXICODE],[h_.ITF,x_.BarcodeFormat.ITF],[h_.EAN_13,x_.BarcodeFormat.EAN_13],[h_.EAN_8,x_.BarcodeFormat.EAN_8],[h_.PDF_417,x_.BarcodeFormat.PDF_417],[h_.RSS_14,x_.BarcodeFormat.RSS_14],[h_.RSS_EXPANDED,x_.BarcodeFormat.RSS_EXPANDED],[h_.UPC_A,x_.BarcodeFormat.UPC_A],[h_.UPC_E,x_.BarcodeFormat.UPC_E],[h_.UPC_EAN_EXTENSION,x_.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!x_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(x_.DecodeHintType.POSSIBLE_FORMATS,r),i.set(x_.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(i){r(i)}})},e.prototype.decode=function(e){var t=new x_.MultiFormatReader(this.verbose,this.hints),n=new x_.HTMLCanvasElementLuminanceSource(e),r=new x_.BinaryBitmap(new x_.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:v_.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),k_=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(Vk){s(Vk)}}function a(e){try{l(r.throw(e))}catch(Vk){s(Vk)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},R_=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vk){a=[6,Vk],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},D_=function(){function e(t,n,r){if(this.formatMap=new Map([[h_.QR_CODE,"qr_code"],[h_.AZTEC,"aztec"],[h_.CODABAR,"codabar"],[h_.CODE_39,"code_39"],[h_.CODE_93,"code_93"],[h_.CODE_128,"code_128"],[h_.DATA_MATRIX,"data_matrix"],[h_.ITF,"itf"],[h_.EAN_13,"ean_13"],[h_.EAN_8,"ean_8"],[h_.PDF_417,"pdf417"],[h_.UPC_A,"upc_a"],[h_.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return k_(this,void 0,void 0,function(){var t,n;return R_(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:v_.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,i=e;r<i.length;r++){var s=i[r],o=s.boundingBox.width*s.boundingBox.height;o>n&&(n=o,t=s)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),M_=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(Vk){s(Vk)}}function a(e){try{l(r.throw(e))}catch(Vk){s(Vk)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},O_=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vk){a=[6,Vk],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},P_=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&D_.isSupported()?(this.primaryDecoder=new D_(e,n,r),this.secondaryDecoder=new N_(e,n,r)):this.primaryDecoder=new N_(e,n,r)}return e.prototype.decodeAsync=function(e){return M_(this,void 0,void 0,function(){var t;return O_(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return M_(this,void 0,void 0,function(){var t,n;return O_(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),L_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F_=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(Vk){s(Vk)}}function a(e){try{l(r.throw(e))}catch(Vk){s(Vk)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},B_=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vk){a=[6,Vk],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},j_=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),U_=function(e){function t(t){return e.call(this,"zoom",t)||this}return L_(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return L_(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(j_)),V_=function(e){function t(t){return e.call(this,"torch",t)||this}return L_(t,e),t}(j_),z_=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new U_(this.track)},e.prototype.torchFeature=function(){return new V_(this.track)},e}(),H_=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return F_(this,void 0,void 0,function(){var s,o;return B_(this,function(a){switch(a.label){case 0:return s=new e(t,n,i),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:a.sent(),a.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return F_(this,void 0,void 0,function(){return B_(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new z_(this.getFirstTrackOrFail())},e}(),W_=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return F_(this,void 0,void 0,function(){return B_(this,function(r){return[2,H_.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return F_(this,void 0,void 0,function(){var n;return B_(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),G_=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(Vk){s(Vk)}}function a(e){try{l(r.throw(e))}catch(Vk){s(Vk)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},q_=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vk){a=[6,Vk],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Y_=function(){function e(){}return e.failIfNotSupported=function(){return G_(this,void 0,void 0,function(){return q_(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return G_(this,void 0,void 0,function(){return q_(this,function(t){return[2,W_.create(e)]})})},e}(),X_=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(Vk){s(Vk)}}function a(e){try{l(r.throw(e))}catch(Vk){s(Vk)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},K_=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vk){a=[6,Vk],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Q_=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=S_.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=S_.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return X_(this,void 0,void 0,function(){var e,t,n,r,i,s,o;return K_(this,function(a){switch(a.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=a.sent(),r=[],i=0,s=n;i<s.length;i++)"videoinput"===(o=s[i]).kind&&r.push({id:o.deviceId,label:o.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];"video"===s.kind&&n.push({id:s.id,label:s.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(C_||(C_={}));var Z_,J_=function(){function e(){this.state=C_.NOT_STARTED,this.onGoingTransactionNewState=C_.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===C_.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=C_.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===C_.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=C_.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==C_.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case C_.UNKNOWN:throw"Transition from unknown is not allowed";case C_.NOT_STARTED:this.failIfNewStateIs(e,[C_.PAUSED]);case C_.SCANNING:case C_.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),$_=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===C_.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==C_.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===C_.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===C_.PAUSED},e}(),eE=function(){function e(){}return e.create=function(){return new $_(new J_)},e}(),tE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tE(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(y_),rE=function(){function e(e,t){this.logger=t,this.fps=nE.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=nE.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?T_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!E_(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),iE=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new __(this.verbose),this.qrcode=new P_(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=eE.create()}return e.prototype.start=function(e,t,n,r){var i,s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var o=rE.create(t,this.logger);this.clearElement();var a=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=a,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:nE.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,h=this.stateManagerProxy.startTransition(C_.SCANNING);return new Promise(function(t,r){var a=l?o.videoConstraints:u.createVideoConstraints(e);if(!a)return h.cancel(),void r("videoConstraints should be defined");var c={};l&&!o.aspectRatio||(c.aspectRatio=o.aspectRatio);var d={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,o),u.isScanning=!0,u.foreverScan(o,n,i)}};Y_.failIfNotSupported().then(function(e){e.create(a).then(function(e){return e.render(s.element,c,d).then(function(e){u.renderedCamera=e,h.execute(),t(null)}).catch(function(e){h.cancel(),r(e)})}).catch(function(e){h.cancel(),r(S_.errorGettingUserMedia(e))})}).catch(function(e){h.cancel(),r(S_.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(C_.PAUSED),this.showPausedState(),(E_(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(C_.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(C_.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(nE.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(E_(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var s=new Image;s.onload=function(){var e=s.width,o=s.height,a=document.getElementById(n.elementId),l=a.clientWidth?a.clientWidth:nE.DEFAULT_WIDTH,c=Math.max(a.clientHeight?a.clientHeight:o,nE.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,o,l,c);if(t){var h=n.createCanvasElement(l,c,"qr-canvas-visible");h.style.display="inline-block",a.appendChild(h);var d=h.getContext("2d");if(!d)throw"Unable to get 2d context from canvas";d.canvas.width=l,d.canvas.height=c,d.drawImage(s,0,0,e,o,u.x,u.y,u.width,u.height)}var f=nE.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(s.width,u.width),g=Math.max(s.height,u.height),m=p+2*f,y=g+2*f,v=n.createCanvasElement(m,y);a.appendChild(v);var w=v.getContext("2d");if(!w)throw"Unable to get 2d context from canvas";w.canvas.width=m,w.canvas.height=y,w.drawImage(s,0,0,e,o,f,f,p,g);try{n.qrcode.decodeRobustlyAsync(v).then(function(e){r(w_.createFromQrcodeResult(e))}).catch(i)}catch(b){i("QR code parse error, error = ".concat(b))}},s.onerror=i,s.onabort=i,s.onstalled=i,s.onsuspend=i,s.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Q_.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!T_.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[h_.QR_CODE,h_.AZTEC,h_.CODABAR,h_.CODE_39,h_.CODE_93,h_.CODE_128,h_.DATA_MATRIX,h_.MAXICODE,h_.ITF,h_.EAN_13,h_.EAN_8,h_.PDF_417,h_.RSS_14,h_.RSS_EXPANDED,h_.UPC_A,h_.UPC_E,h_.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var s=i[r];g_(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(E_(e))return!0;if(!E_(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(E_(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!E_(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var s,o=this.toQrdimensions(e,t,i),a=function(e){if(e<nE.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(nE.MIN_QR_BOX_SIZE,"px.")};a(o.width),a(o.height),o.width=((s=o.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),s=e),s)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=E_(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&i.height<=t,o={x:0,y:0,width:e,height:t},a=s?this.getShadedRegionBounds(e,t,i):o,l=this.createCanvasElement(a.width,a.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=a.width,c.canvas.height=a.height,this.element.append(l),s&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=S_.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,w_.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=S_.codeParseError(e);return t(r,b_.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),s=i.videoWidth/i.clientWidth,o=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*s,l=this.qrRegion.height*o,c=this.qrRegion.x*s,u=this.qrRegion.y*o;this.context.drawImage(i,c,u,a,l,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(i){i||!0===e.disableFlip?h():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){h()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),h()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",s=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},o=Object.keys(e);if(1!==o.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var a=Object.keys(e)[0];if(a!==t&&a!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(a!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(s(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(i in c))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(s(c["".concat(i)]))return{facingMode:{exact:c["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,s=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(s)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?nE.BORDER_SHADER_MATCH_COLOR:nE.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,i=t,s=document.createElement("canvas");return s.style.width="".concat(r,"px"),s.style.height="".concat(i,"px"),s.style.display="none",s.id=E_(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var s=(t-r.width)/2,o=(n-r.height)/2;if(i.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(nE.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var a=40;this.insertShaderBorders(i,a,5,-5,null,0,!0),this.insertShaderBorders(i,a,5,-5,null,0,!1),this.insertShaderBorders(i,a,5,null,-5,0,!0),this.insertShaderBorders(i,a,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,s,o){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=nE.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(t,"px"),a.style.height="".concat(n,"px"),null!==r&&(a.style.top="".concat(r,"px")),null!==i&&(a.style.bottom="".concat(i,"px")),o?a.style.left="".concat(s,"px"):a.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),e.appendChild(a)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),sE="data:image/svg+xml;base64,",oE=sE+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",aE=sE+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",lE=sE+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",cE=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),uE=function(){function e(){this.data=cE.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=cE.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),hE=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=I_.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=I_.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),dE=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=lE,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=lE,this.infoIcon.style.opacity="0.6")},e}(),fE=function(){function e(){var e=this;this.infoDiv=new hE,this.infoIcon=new dE(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),pE=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(Vk){s(Vk)}}function a(e){try{l(r.throw(e))}catch(Vk){s(Vk)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},gE=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vk){a=[6,Vk],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},mE=function(){function e(){}return e.hasPermissions=function(){return pE(this,void 0,void 0,function(){var e,t,n,r;return gE(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),yE=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===f_.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===f_.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return y_.DEFAULT_SUPPORTED_SCAN_TYPE;var t=y_.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var i=r[n];if(!y_.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},e}(),vE=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),wE=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(vE.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),bE=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(Vk){s(Vk)}}function a(e){try{l(r.throw(e))}catch(Vk){s(Vk)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},_E=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vk){a=[6,Vk],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},EE=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return bE(this,void 0,void 0,function(){var e,t;return _E(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?A_.torchOffButton():A_.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?A_.torchOnFailedMessage():A_.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),CE=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=wE.createElement("button",vE.TORCH_BUTTON_ID),this.torchController=new EE(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=A_.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return bE(n,void 0,void 0,function(){return _E(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(vE.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(vE.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(vE.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(vE.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new EE(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=A_.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var s=new e(n,i);return s.render(t,r),s},e}(),SE=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=wE.createElement("button",vE.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=wE.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],s=r.name;i.setImageNameToButton(s),n(r)}}});var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var o=!1,a=0;a<r.length;++a){var l=r.item(a);if(l){if(l.type.match(/image.*/)){o=!0;var c=l.name;i.setImageNameToButton(c),n(l),s.innerText=A_.dragAndDropMessage();break}}}o||(s.innerText=A_.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=A_.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var i=A_.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=A_.fileSelectionChooseImage()+" - "+A_.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),AE=function(){function e(e){this.selectElement=wE.createElement("select",vE.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=A_.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,s=0,o=this.cameras;s<o.length;s++){var a=o[s],l=a.id,c=null==a.label?l:a.label;c&&""!==c||(c=[A_.anonymousCameraPrefix(),i++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),IE=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=wE.createElement("input",vE.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=A_.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=A_.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Z_||(Z_={}));var TE=function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new yE(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new __(this.verbose),this.persistedDataManager=new uE,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(A_.lastMatch(t),Z_.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id=".concat(this.elementId," not found");r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new iE(this.getScanRegionId(),function(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(e){(E_(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=y_.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!y_.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=y_.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=y_.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:y_.SCAN_DEFAULT_FPS,rememberLastUsedCamera:y_.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:y_.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),yE.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new fE).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(A_.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};iE.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(A_.noCameraFound(),Z_.STATUS_WARNING),i())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,Z_.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=wE.createElement("button",this.getCameraPermissionButtonId());r.innerText=A_.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;yE.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?mE.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=yE.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=yE.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=SE.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";yE.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(A_.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,Z_.STATUS_WARNING),n.qrCodeErrorCallback(e,b_.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=IE.create(r,!1),s=AE.create(r,e),o=document.createElement("span"),a=wE.createElement("button",vE.CAMERA_START_BUTTON_ID);a.innerText=A_.scanButtonStartScanningText(),o.appendChild(a);var l,c=wE.createElement("button",vE.CAMERA_STOP_BUTTON_ID);c.innerText=A_.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,o.appendChild(c);r.appendChild(o);var u=function(e){e||(a.style.display="none"),a.innerText=A_.scanButtonStartScanningText(),a.style.opacity="1",a.disabled=!1,e&&(a.style.display="inline-block")};if(a.addEventListener("click",function(e){a.innerText=A_.scanButtonScanningStarting(),s.disable(),a.disabled=!0,a.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r=s.getValue();n.persistedDataManager.setLastUsedCameraId(r),n.html5Qrcode.start(r,function(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=CE.create(o,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,Z_.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,s,o,a=1;t.config.defaultZoomValueIfSupported&&(a=t.config.defaultZoomValueIfSupported),r=a,s=n.min(),a=r>(o=n.max())?o:r<s?s:r,i.setValues(n.min(),n.max(),a,n.step()),i.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),s.enable(),u(!0),n.setHeaderMessage(e,Z_.STATUS_WARNING)})}),s.hasSingleItem()&&a.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),a.disabled=!1,c.style.display="none",a.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,Z_.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var h=n.persistedDataManager.getLastUsedCameraId();s.hasValue(h)?(s.setValue(h),a.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=A_.textIfCameraScanSelected(),n=A_.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var s=wE.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=yE.isCameraScanType(this.currentScanType)?t:n,s.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,yE.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),s.innerText=n,e.currentScanType=f_.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),s.innerText=t,e.currentScanType=f_.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),i.appendChild(s),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&mE.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Z_.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case Z_.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Z_.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Z_.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=oE,this.cameraScanImage.alt=A_.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=aE,this.fileScanImage.alt=A_.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return vE.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return vE.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const xE=t=>{let{onScanSuccess:n,onScanFailure:r}=t;return(0,e.useEffect)(()=>{const e=new TE("qr-reader",{fps:10,formatsToSupport:[h_.CODE_128,h_.EAN_13,h_.EAN_8,h_.QR_CODE],rememberLastUsedCamera:!0},!1);return e.render(n,r),()=>{try{e.clear()}catch(t){console.warn("Failed to clear scanner: ",t)}}},[n,r]),(0,d.jsx)("div",{id:"qr-reader",style:{width:"100%"}})},NE=t=>{let{show:n,handleClose:r,currentAdminId:i}=t;const[s,o]=(0,e.useState)([]),[a,l]=(0,e.useState)(""),[u,h]=(0,e.useState)("viewer"),[f,p]=(0,e.useState)(null),[g,m]=(0,e.useState)(null);(0,e.useEffect)(()=>{if(!i||!n)return;const e=Hp(Of(wv,"users",i,"employees"),e=>{const t=e.docs.map(e=>c(c({},e.data()),{},{id:e.id}));o(t)},e=>{console.error("Error fetching employees:",e),m("Error al cargar empleados.")});return()=>e()},[i,n]);return(0,d.jsxs)(Pn,{show:n,onHide:r,centered:!0,size:"lg",children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:"Gestionar Empleados"})}),(0,d.jsxs)(Pn.Body,{children:[g&&(0,d.jsx)("p",{className:"text-danger",children:g}),(0,d.jsxs)(Ne,{children:[(0,d.jsxs)(Ne.Group,{className:"mb-3",children:[(0,d.jsx)(Ne.Label,{children:"Email del Empleado (para referencia)"}),(0,d.jsx)(Ne.Control,{type:"email",placeholder:"empleado@ejemplo.com",value:a,onChange:e=>l(e.target.value),required:!0})]}),(0,d.jsxs)(Ne.Group,{className:"mb-3",children:[(0,d.jsx)(Ne.Label,{children:"Rol"}),(0,d.jsxs)(Ne.Select,{value:u,onChange:e=>h(e.target.value),children:[(0,d.jsx)("option",{value:"viewer",children:"Solo Lectura"}),(0,d.jsx)("option",{value:"editor",children:"Editor"})]})]}),(0,d.jsx)(M,{variant:"primary",onClick:async()=>{if(m(null),a)try{const e=Math.random().toString(36).substring(2,8).toUpperCase();await jp(Pf(wv,"invitations",e),{adminId:i,employeeEmail:a,role:u,createdAt:new Date,usedBy:null}),p(e),l(""),h("viewer")}catch(Vk){console.error("Error generating invitation:",Vk),m("Error al generar la invitaci\xf3n.")}else m("El email del empleado no puede estar vac\xedo.")},children:"A\xf1adir Empleado"}),f&&(0,d.jsxs)("div",{className:"mt-3 alert alert-success",children:["C\xf3digo de Invitaci\xf3n Generado: ",(0,d.jsx)("strong",{children:f}),(0,d.jsx)("p",{className:"mt-2",children:"Comparte este c\xf3digo con el empleado. Deber\xe1 introducirlo al iniciar sesi\xf3n."})]})]}),(0,d.jsx)("h4",{className:"mt-4",children:"Empleados Actuales"}),0===s.length?(0,d.jsx)("p",{children:"No hay empleados a\xf1adidos."}):(0,d.jsxs)(qb,{striped:!0,bordered:!0,hover:!0,className:"mt-3",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Email"}),(0,d.jsx)("th",{children:"Rol"}),(0,d.jsx)("th",{children:"Acciones"})]})}),(0,d.jsx)("tbody",{children:s.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.email}),(0,d.jsx)("td",{children:"editor"===e.role?"Editor":"Solo Lectura"}),(0,d.jsx)("td",{children:(0,d.jsx)(M,{variant:"danger",size:"sm",onClick:()=>(async e=>{if(m(null),window.confirm("\xbfEst\xe1s seguro de que deseas eliminar al empleado ".concat(e,"?")))try{await Vp(Pf(wv,"users",i,"employees",e)),await Vp(Pf(wv,"employeeToAdminMap",e))}catch(Vk){console.error("Error deleting employee:",Vk),m("Error al eliminar empleado.")}})(e.id),children:"Eliminar"})})]},e.id))})]})]}),(0,d.jsx)(Pn.Footer,{children:(0,d.jsx)(M,{variant:"secondary",onClick:r,children:"Cerrar"})})]})},kE=t=>{let{show:n,handleClose:r,currentUser:i,onInvitationRedeemed:s}=t;const[o,a]=(0,e.useState)(""),[l,c]=(0,e.useState)(null),[u,h]=(0,e.useState)(!1);return(0,d.jsxs)(Pn,{show:n,onHide:r,centered:!0,backdrop:"static",keyboard:!1,children:[(0,d.jsx)(Pn.Header,{children:(0,d.jsx)(Pn.Title,{children:"Canjear Invitaci\xf3n"})}),(0,d.jsxs)(Pn.Body,{children:[l&&(0,d.jsx)("p",{className:"text-danger",children:l}),(0,d.jsx)("p",{children:"Has iniciado sesi\xf3n, pero no est\xe1s asociado a ning\xfan local. Si tienes un c\xf3digo de invitaci\xf3n, introd\xfacelo aqu\xed."}),(0,d.jsx)(Ne,{children:(0,d.jsxs)(Ne.Group,{className:"mb-3",controlId:"formInviteCode",children:[(0,d.jsx)(Ne.Label,{children:"C\xf3digo de Invitaci\xf3n"}),(0,d.jsx)(Ne.Control,{type:"text",placeholder:"Introduce tu c\xf3digo",value:o,onChange:e=>a(e.target.value),required:!0,autoFocus:!0,disabled:u})]})})]}),(0,d.jsx)(Pn.Footer,{children:(0,d.jsx)(M,{variant:"primary",onClick:async()=>{if(c(null),h(!0),!o.trim())return c("Por favor, introduce un c\xf3digo de invitaci\xf3n."),void h(!1);if(!i)return c("No hay usuario logeado para canjear la invitaci\xf3n."),void h(!1);try{const e=Pf(wv,"invitations",o.trim().toUpperCase()),t=await Fp(e);if(!t.exists())return c("C\xf3digo de invitaci\xf3n inv\xe1lido o no existe."),void h(!1);const n=t.data();if(null!==(null===n||void 0===n?void 0:n.usedBy))return c("Este c\xf3digo de invitaci\xf3n ya ha sido utilizado."),void h(!1);const a=null===n||void 0===n?void 0:n.adminId,l=null===n||void 0===n?void 0:n.role;if(!a||!l)return c("Datos de invitaci\xf3n incompletos."),void h(!1);await Up(e,{usedBy:i.uid}),await jp(Pf(wv,"employeeToAdminMap",i.uid),{adminId:a,role:l,inviteCode:o.trim().toUpperCase()}),await jp(Pf(wv,"users",a,"employees",i.uid),{email:i.email||"N/A",role:l}),s(a,l),r()}catch(Vk){console.error("Error al canjear la invitaci\xf3n:",Vk),c("Error al canjear la invitaci\xf3n: "+Vk.message)}finally{h(!1)}},disabled:u,children:u?"Canjeando...":"Canjear"})})]})},RE=e=>{let{products:t}=e;const n=t.map(e=>{return c(c({},e),{},{margin:(t=e.price,n=e.costPrice||0,0===t?0:(t-n)/t*100)});var t,n}).filter(e=>e.costPrice&&e.costPrice>0),r=[...n].sort((e,t)=>t.margin-e.margin),i=r.slice(0,5),s=r.slice(-5).reverse(),o=e=>(0,d.jsx)(i_,{variant:"flush",children:e.map(e=>(0,d.jsxs)(i_.Item,{className:"d-flex justify-content-between align-items-center",children:[e.name,(0,d.jsxs)(zb,{bg:e.margin<15?"danger":e.margin<40?"warning":"success",pill:!0,children:[e.margin.toFixed(1),"%"]})]},e.id))}),a=n.length,l=n.reduce((e,t)=>e+t.margin,0),u=a>0?l/a:0,h=n.reduce((e,t)=>{const n=t.category||"Sin Categor\xeda";return e[n]||(e[n]={totalMargin:0,count:0}),e[n].totalMargin+=t.margin,e[n].count++,e},{}),f=Object.entries(h).map(e=>{let[t,n]=e;return{category:t,averageMargin:n.totalMargin/n.count}}).sort((e,t)=>t.averageMargin-e.averageMargin);return(0,d.jsxs)(C,{className:"mt-4",children:[(0,d.jsx)("h1",{children:"Reportes de Rentabilidad"}),(0,d.jsx)("p",{children:"An\xe1lisis de la rentabilidad de los productos en base a sus precios de costo y venta."}),(0,d.jsx)(jb,{className:"mb-4",children:(0,d.jsx)(le,{children:(0,d.jsx)(Pb,{className:"text-center",children:(0,d.jsxs)(Pb.Body,{children:[(0,d.jsx)(Pb.Title,{children:"Margen de Ganancia General"}),(0,d.jsx)(Pb.Text,{children:(0,d.jsx)("h2",{children:(0,d.jsxs)(zb,{bg:Number(u)<15?"danger":Number(u)<40?"warning":"success",children:[u.toFixed(1),"%"]})})}),(0,d.jsxs)(Pb.Text,{className:"text-muted",children:["(Promedio de ",a," productos con costo definido)"]})]})})})}),(0,d.jsxs)(jb,{className:"mt-4",children:[(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Pb,{children:[(0,d.jsx)(Pb.Header,{as:"h5",className:"bg-success text-white",children:"Top 5 Productos M\xe1s Rentables"}),o(i)]})}),(0,d.jsx)(le,{md:6,children:(0,d.jsxs)(Pb,{children:[(0,d.jsx)(Pb.Header,{as:"h5",className:"bg-danger text-white",children:"Top 5 Productos Menos Rentables"}),o(s)]})})]}),(0,d.jsx)(jb,{className:"mt-4",children:(0,d.jsx)(le,{children:(0,d.jsxs)(Pb,{children:[(0,d.jsx)(Pb.Header,{as:"h5",children:"Rentabilidad por Categor\xeda"}),(0,d.jsx)(i_,{variant:"flush",children:f.map(e=>(0,d.jsxs)(i_.Item,{className:"d-flex justify-content-between align-items-center",children:[e.category,(0,d.jsxs)(zb,{bg:Number(e.averageMargin)<15?"danger":Number(e.averageMargin)<40?"warning":"success",pill:!0,children:[e.averageMargin.toFixed(1),"%"]})]},e.category))})]})})})]})},DE=["className","bsPrefix","as"],ME=In("h4");ME.displayName="DivStyledAsH4";const OE=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=ME}=e,o=i(e,DE);return r=v(r,"alert-heading"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});OE.displayName="AlertHeading";const PE=OE,LE=["className","bsPrefix","as"],FE=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=Qw}=e,o=i(e,LE);return r=v(r,"alert-link"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});FE.displayName="AlertLink";const BE=FE,jE=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],UE=e.forwardRef((e,t)=>{const n=xv(e,{show:"onClose"}),{bsPrefix:r,show:s=!0,closeLabel:o="Close alert",closeVariant:a,className:l,children:u,variant:f="primary",onClose:p,dismissible:g,transition:m=sn}=n,y=i(n,jE),w=v(r,"alert"),b=Ue(e=>{p&&p(!1,e)}),_=!0===m?sn:m,E=(0,d.jsxs)("div",c(c({role:"alert"},_?void 0:y),{},{ref:t,className:h()(l,w,f&&"".concat(w,"-").concat(f),g&&"".concat(w,"-dismissible")),children:[g&&(0,d.jsx)(wn,{onClick:b,"aria-label":o,variant:a}),u]}));return _?(0,d.jsx)(_,c(c({unmountOnExit:!0},y),{},{ref:void 0,in:s,children:E})):s?E:null});UE.displayName="Alert";const VE=Object.assign(UE,{Link:BE,Heading:PE}),zE=e.createContext(null);zE.displayName="InputGroupContext";const HE=zE,WE=["className","bsPrefix","as"],GE=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="span"}=e,o=i(e,WE);return r=v(r,"input-group-text"),(0,d.jsx)(s,c({ref:t,className:h()(n,r)},o))});GE.displayName="InputGroupText";const qE=GE,YE=["bsPrefix","size","hasValidation","className","as"],XE=e.forwardRef((t,n)=>{let{bsPrefix:r,size:s,hasValidation:o,className:a,as:l="div"}=t,u=i(t,YE);r=v(r,"input-group");const f=(0,e.useMemo)(()=>({}),[]);return(0,d.jsx)(HE.Provider,{value:f,children:(0,d.jsx)(l,c(c({ref:n},u),{},{className:h()(a,r,s&&"".concat(r,"-").concat(s),o&&"has-validation")}))})});XE.displayName="InputGroup";const KE=Object.assign(XE,{Text:qE,Radio:e=>(0,d.jsx)(qE,{children:(0,d.jsx)(H,c({type:"radio"},e))}),Checkbox:e=>(0,d.jsx)(qE,{children:(0,d.jsx)(H,c({type:"checkbox"},e))})}),QE=e=>{let{sale:t}=e;return(0,d.jsxs)("div",{className:"p-3 receipt-print-container",children:[(0,d.jsx)("h4",{className:"text-center mb-4",children:"Detalle de Venta"}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"ID de Venta:"})," ",t.id]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Fecha:"})," ",new Date(t.timestamp).toLocaleString()]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Vendedor:"})," ",t.sellerEmail?t.sellerEmail.split("@")[0]:t.userId]}),t.customerName&&(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Cliente:"})," ",t.customerName]}),t.paymentMethod&&(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"M\xe9todo de Pago:"})," ",t.paymentMethod]}),(0,d.jsx)("h5",{className:"mt-4",children:"Productos Vendidos:"}),(0,d.jsxs)(qb,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Producto"}),(0,d.jsx)("th",{className:"text-end",children:"Cantidad"}),(0,d.jsx)("th",{className:"text-end",children:"Precio Unitario"}),(0,d.jsx)("th",{className:"text-end",children:"Subtotal"})]})}),(0,d.jsx)("tbody",{children:t.items.map((e,t)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.productName}),(0,d.jsx)("td",{className:"text-end",children:e.quantity}),(0,d.jsxs)("td",{className:"text-end",children:["$",e.price.toFixed(2)]}),(0,d.jsxs)("td",{className:"text-end",children:["$",(e.quantity*e.price).toFixed(2)]})]},t))}),(0,d.jsx)("tfoot",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{colSpan:3,className:"text-end",children:"Total:"}),(0,d.jsxs)("th",{className:"text-end",children:["$",t.totalAmount.toFixed(2)]})]})})]})]})};var ZE=n(141);const JE=t=>{let{show:n,onClose:r,products:i,categories:s,userRole:o,currentUserId:a,currentUser:l,initialSale:u}=t;const[h,f]=(0,e.useState)([]),[p,g]=(0,e.useState)(""),[m,y]=(0,e.useState)(""),[v,w]=(0,e.useState)(!1),[b,_]=(0,e.useState)(null),[E,C]=(0,e.useState)(u||null),S=(0,e.useRef)(null),A=(0,ZE.useReactToPrint)({contentRef:S,documentTitle:"Comprobante de Venta",onAfterPrint:()=>console.log("Impresi\xf3n finalizada")});(0,e.useEffect)(()=>{n||(f([]),g(""),y(""),_(null))},[n]);const I=i.filter(e=>(e.name.toLowerCase().includes(p.toLowerCase())||e.barcode&&e.barcode.includes(p))&&(!m||e.category===m)),T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_(null);const n=h.find(t=>t.id===e.id);if(n){if(n.quantity+t>e.stock)return void _("No hay suficiente stock para ".concat(e.name,". Stock disponible: ").concat(e.stock));f(h.map(n=>n.id===e.id?c(c({},n),{},{quantity:n.quantity+t}):n))}else{if(t>e.stock)return void _("No hay suficiente stock para ".concat(e.name,". Stock disponible: ").concat(e.stock));f([...h,c(c({},e),{},{quantity:t})])}},x=(e,t)=>{_(null);const n=i.find(t=>t.id===e);if(n)if(t<=0)f(h.filter(t=>t.id!==e));else{if(t>n.stock)return void _("No hay suficiente stock para ".concat(n.name,". Stock disponible: ").concat(n.stock));f(h.map(n=>n.id===e?c(c({},n),{},{quantity:t}):n))}},N=()=>{let e=0,t=0;return h.forEach(n=>{e+=n.quantity*n.price,t+=n.quantity*(n.costPrice||0)}),{totalAmount:e,totalCost:t}},{totalAmount:k}=N();return(0,d.jsx)(Pn,{show:n,onHide:r,size:"xl",centered:!0,children:E?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(Pn.Header,{closeButton:!0,children:[(0,d.jsx)(Pn.Title,{children:"Comprobante de Venta"})," "]}),(0,d.jsx)(Pn.Body,{children:(0,d.jsxs)("div",{ref:S,children:[" ",(0,d.jsx)(QE,{sale:E})]})}),(0,d.jsxs)(Pn.Footer,{children:[(0,d.jsx)(M,{variant:"secondary",onClick:r,children:"Cerrar"}),(0,d.jsx)(M,{variant:"info",onClick:A,children:"Imprimir Comprobante"})," ",(0,d.jsx)(M,{variant:"primary",onClick:()=>{console.log("Resetting for new sale from footer..."),C(null),f([]),g(""),y(""),_(null)},children:"Nueva Venta"})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(Pn.Header,{closeButton:!0,children:[(0,d.jsx)(Pn.Title,{children:"Realizar Venta"})," "]}),(0,d.jsxs)(Pn.Body,{children:[b&&(0,d.jsx)(VE,{variant:"danger",children:b}),(0,d.jsxs)("div",{className:"d-flex flex-column flex-lg-row",children:[(0,d.jsxs)("div",{className:"flex-grow-1 me-lg-3 mb-3 mb-lg-0",children:[(0,d.jsx)("h5",{children:"Productos Disponibles"}),(0,d.jsxs)(KE,{className:"mb-3",children:[(0,d.jsx)(J,{placeholder:"Buscar producto o escanear c\xf3digo de barras...",value:p,onChange:e=>g(e.target.value)}),(0,d.jsx)(M,{variant:"outline-secondary",onClick:()=>w(!0),children:"Escanear"})]}),(0,d.jsx)(Ne.Group,{controlId:"categoryFilter",className:"mb-3",children:(0,d.jsxs)(Ne.Select,{value:m,onChange:e=>y(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Todas las categor\xedas"}),s.map(e=>(0,d.jsx)("option",{value:e.name,children:e.name},e.id))]})}),v&&(0,d.jsxs)(Pn,{show:v,onHide:()=>w(!1),centered:!0,children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:"Escanear C\xf3digo de Barras"})}),(0,d.jsx)(Pn.Body,{children:(0,d.jsx)(xE,{onScanSuccess:e=>{_(null);const t=i.find(t=>t.barcode===e);t?(T(t,1),w(!1),g("")):_("Producto no encontrado con ese c\xf3digo de barras.")}})})]}),(0,d.jsx)(i_,{style:{maxHeight:"400px",overflowY:"auto"},children:I.map(e=>(0,d.jsxs)(i_.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:e.name})," (",e.stock," en stock)",(0,d.jsx)("br",{}),(0,d.jsxs)("small",{children:["$",e.price.toFixed(2)]})]}),(0,d.jsx)(M,{variant:"success",size:"sm",onClick:()=>T(e),disabled:e.stock<=0||"viewer"===o,children:"A\xf1adir"})]},e.id))})]}),(0,d.jsxs)("div",{className:"flex-grow-1",children:[(0,d.jsx)("h5",{children:"Carrito de Compras"}),0===h.length?(0,d.jsx)(VE,{variant:"info",children:"El carrito est\xe1 vac\xedo."}):(0,d.jsx)(i_,{style:{maxHeight:"400px",overflowY:"auto"},children:h.map(e=>(0,d.jsxs)(i_.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:e.name}),(0,d.jsx)("br",{}),(0,d.jsxs)("small",{children:["$",e.price.toFixed(2)," x ",e.quantity," = $",(e.price*e.quantity).toFixed(2)]})]}),(0,d.jsxs)(KE,{style:{width:"120px"},children:[(0,d.jsx)(M,{variant:"outline-secondary",size:"sm",onClick:()=>x(e.id,e.quantity-1),children:"-"}),(0,d.jsx)(J,{type:"number",value:e.quantity,onChange:t=>x(e.id,parseInt(t.target.value,10)||0),min:0,style:{textAlign:"center"}}),(0,d.jsx)(M,{variant:"outline-secondary",size:"sm",onClick:()=>x(e.id,e.quantity+1),children:"+"})]}),(0,d.jsx)(M,{variant:"danger",size:"sm",onClick:()=>{return t=e.id,_(null),void f(h.filter(e=>e.id!==t));var t},children:"X"})]},e.id))}),(0,d.jsxs)("h4",{className:"mt-3 text-end",children:["Total: $",k.toFixed(2)]})]})]})]}),(0,d.jsxs)(Pn.Footer,{children:[(0,d.jsx)(M,{variant:"secondary",onClick:r,children:"Cerrar"}),(0,d.jsx)(M,{variant:"primary",onClick:async()=>{if(_(null),0!==h.length)if("viewer"!==o)try{const{totalAmount:e,totalCost:t}=N(),n={userId:a,sellerEmail:(null===l||void 0===l?void 0:l.email)||"N/A",timestamp:Date.now(),totalAmount:e,totalCost:t,items:h.map(e=>{const t={productId:e.id,productName:e.name,quantity:e.quantity,price:e.price,costPrice:e.costPrice||0};return void 0!==e.barcode&&(t.barcode=e.barcode),t})},r=await zp(Of(wv,"users",a,"sales"),n);console.log("Venta registrada con ID:",r.id);for(const i of h){const e=Pf(wv,"users",a,"products",i.id);await Up(e,{stock:qp(-i.quantity)}),await zp(Of(wv,"users",a,"movements"),{productId:i.id,productName:i.name,type:"salida",amount:i.quantity,date:Date.now(),saleId:r.id})}C(n)}catch(Vk){console.error("Error al completar la venta: ",Vk),_("Error al completar la venta: ".concat(Vk.message))}else _("No tienes permisos para realizar ventas.");else _("El carrito est\xe1 vac\xedo.")},disabled:0===h.length||"viewer"===o,children:"Completar Venta"})]})]})},E?"receipt-view":"sales-form")};function $E(e){return e+.5|0}const eC=(e,t,n)=>Math.max(Math.min(e,n),t);function tC(e){return eC($E(2.55*e),0,255)}function nC(e){return eC($E(255*e),0,255)}function rC(e){return eC($E(e/2.55)/100,0,1)}function iC(e){return eC($E(100*e),0,100)}const sC={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},oC=[..."0123456789ABCDEF"],aC=e=>oC[15&e],lC=e=>oC[(240&e)>>4]+oC[15&e],cC=e=>(240&e)>>4===(15&e);function uC(e){var t=(e=>cC(e.r)&&cC(e.g)&&cC(e.b)&&cC(e.a))(e)?aC:lC;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const hC=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dC(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function fC(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function pC(e,t,n){const r=dC(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function gC(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),o=(i+s)/2;let a,l,c;return i!==s&&(c=i-s,l=o>.5?c/(2-i-s):c/(i+s),a=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),a=60*a+.5),[0|a,l||0,o]}function mC(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(nC)}function yC(e,t,n){return mC(dC,e,t,n)}function vC(e){return(e%360+360)%360}function wC(e){const t=hC.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?tC(+t[5]):nC(+t[5]));const i=vC(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return mC(pC,e,t,n)}(i,s,o):"hsv"===t[1]?function(e,t,n){return mC(fC,e,t,n)}(i,s,o):yC(i,s,o),{r:n[0],g:n[1],b:n[2],a:r}}const bC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_C={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let EC;function CC(e){EC||(EC=function(){const e={},t=Object.keys(_C),n=Object.keys(bC);let r,i,s,o,a;for(r=0;r<t.length;r++){for(o=a=t[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,bC[s]);s=parseInt(_C[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),EC.transparent=[0,0,0,0]);const t=EC[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const SC=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const AC=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,IC=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function TC(e,t,n){if(e){let r=gC(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=yC(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function xC(e,t){return e?Object.assign(t||{},e):e}function NC(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=nC(e[3]))):(t=xC(e,{r:0,g:0,b:0,a:1})).a=nC(t.a),t}function kC(e){return"r"===e.charAt(0)?function(e){const t=SC.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?tC(e):eC(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?tC(n):eC(n,0,255)),r=255&(t[4]?tC(r):eC(r,0,255)),i=255&(t[6]?tC(i):eC(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):wC(e)}class RC{constructor(e){if(e instanceof RC)return e;const t=typeof e;let n;"object"===t?n=NC(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*sC[e[1]],g:255&17*sC[e[2]],b:255&17*sC[e[3]],a:5===n?17*sC[e[4]]:255}:7!==n&&9!==n||(t={r:sC[e[1]]<<4|sC[e[2]],g:sC[e[3]]<<4|sC[e[4]],b:sC[e[5]]<<4|sC[e[6]],a:9===n?sC[e[7]]<<4|sC[e[8]]:255})),t}(e)||CC(e)||kC(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=xC(this._rgb);return e&&(e.a=rC(e.a)),e}set rgb(e){this._rgb=NC(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(rC(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?uC(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=gC(e),n=t[0],r=iC(t[1]),i=iC(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(rC(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,o=2*s-1,a=n.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=IC(rC(e.r)),i=IC(rC(e.g)),s=IC(rC(e.b));return{r:nC(AC(r+n*(IC(rC(t.r))-r))),g:nC(AC(i+n*(IC(rC(t.g))-i))),b:nC(AC(s+n*(IC(rC(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new RC(this.rgb)}alpha(e){return this._rgb.a=nC(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=$E(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return TC(this._rgb,2,e),this}darken(e){return TC(this._rgb,2,-e),this}saturate(e){return TC(this._rgb,1,e),this}desaturate(e){return TC(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=gC(e);n[0]=vC(n[0]+t),n=yC(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function DC(){}const MC=(()=>{let e=0;return()=>e++})();function OC(e){return null===e||void 0===e}function PC(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function LC(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function FC(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function BC(e,t){return FC(e)?e:t}function jC(e,t){return"undefined"===typeof e?t:e}const UC=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function VC(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function zC(e,t,n,r){let i,s,o;if(PC(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(LC(e))for(o=Object.keys(e),s=o.length,i=0;i<s;i++)t.call(n,e[o[i]],o[i])}function HC(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function WC(e){if(PC(e))return e.map(WC);if(LC(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=WC(e[n[i]]);return t}return e}function GC(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function qC(e,t,n,r){if(!GC(e))return;const i=t[e],s=n[e];LC(i)&&LC(s)?YC(i,s,r):t[e]=WC(s)}function YC(e,t,n){const r=PC(t)?t:[t],i=r.length;if(!LC(e))return e;const s=(n=n||{}).merger||qC;let o;for(let a=0;a<i;++a){if(o=r[a],!LC(o))continue;const t=Object.keys(o);for(let r=0,i=t.length;r<i;++r)s(t[r],e,o,n)}return e}function XC(e,t){return YC(e,t,{merger:KC})}function KC(e,t,n){if(!GC(e))return;const r=t[e],i=n[e];LC(r)&&LC(i)?XC(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=WC(i))}const QC={"":e=>e,x:e=>e.x,y:e=>e.y};function ZC(e,t){const n=QC[t]||(QC[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function JC(e){return e.charAt(0).toUpperCase()+e.slice(1)}const $C=e=>"undefined"!==typeof e,eS=e=>"function"===typeof e,tS=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const nS=Math.PI,rS=2*nS,iS=rS+nS,sS=Number.POSITIVE_INFINITY,oS=nS/180,aS=nS/2,lS=nS/4,cS=2*nS/3,uS=Math.log10,hS=Math.sign;function dS(e,t,n){return Math.abs(e-t)<n}function fS(e){const t=Math.round(e);e=dS(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(uS(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function pS(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function gS(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function mS(e){return e*(nS/180)}function yS(e){return e*(180/nS)}function vS(e){if(!FC(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function wS(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*nS&&(s+=rS),{angle:s,distance:i}}function bS(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _S(e,t){return(e-t+iS)%rS-nS}function ES(e){return(e%rS+rS)%rS}function CS(e,t,n,r){const i=ES(e),s=ES(t),o=ES(n),a=ES(s-i),l=ES(o-i),c=ES(i-s),u=ES(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function SS(e,t,n){return Math.max(t,Math.min(n,e))}function AS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function IS(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const TS=(e,t,n,r)=>IS(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),xS=(e,t,n)=>IS(e,n,r=>e[r][t]>=n);const NS=["push","pop","shift","splice","unshift"];function kS(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(NS.forEach(t=>{delete e[t]}),delete e._chartjs)}function RS(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const DS="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function MS(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n=s,r||(r=!0,DS.call(window,()=>{r=!1,e.apply(t,n)}))}}const OS=e=>"start"===e?"left":"end"===e?"right":"center",PS=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function LS(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(TS(l,u,h).lo,n?r:TS(t,u,o.getPixelForValue(h)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!OC(e[a.axis]));i-=Math.max(0,e)}i=SS(i,0,r-1)}if(p){let e=Math.max(TS(l,o.axis,d,!0).hi+1,n?0:TS(t,u,o.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!OC(e[a.axis]));e+=Math.max(0,t)}s=SS(e,i,r)-i}else s=r-i}return{start:i,count:s}}function FS(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const BS=e=>0===e||1===e,jS=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*rS/n),US=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*rS/n)+1,VS={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*aS),easeOutSine:e=>Math.sin(e*aS),easeInOutSine:e=>-.5*(Math.cos(nS*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>BS(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>BS(e)?e:jS(e,.075,.3),easeOutElastic:e=>BS(e)?e:US(e,.075,.3),easeInOutElastic(e){const t=.1125;return BS(e)?e:e<.5?.5*jS(2*e,t,.45):.5+.5*US(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-VS.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*VS.easeInBounce(2*e):.5*VS.easeOutBounce(2*e-1)+.5};function zS(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function HS(e){return zS(e)?e:new RC(e)}function WS(e){return zS(e)?e:new RC(e).saturate(.5).darken(.1).hexString()}const GS=["x","y","borderWidth","radius","tension"],qS=["color","borderColor","backgroundColor"];const YS=new Map;function XS(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=YS.get(n);return r||(r=new Intl.NumberFormat(e,t),YS.set(n,r)),r}(t,n).format(e)}const KS={values:e=>PC(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=uS(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),XS(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(uS(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?KS.numeric.call(this,e,t,n):""}};var QS={formatters:KS};const ZS=Object.create(null),JS=Object.create(null);function $S(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function eA(e,t,n){return"string"===typeof t?YC($S(e,t),n):YC($S(e,""),t)}class tA{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>WS(t.backgroundColor),this.hoverBorderColor=(e,t)=>WS(t.borderColor),this.hoverColor=(e,t)=>WS(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return eA(this,e,t)}get(e){return $S(this,e)}describe(e,t){return eA(JS,e,t)}override(e,t){return eA(ZS,e,t)}route(e,t,n,r){const i=$S(this,e),s=$S(this,n),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[r];return LC(e)?Object.assign({},t,e):jC(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}var nA=new tA({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:qS},numbers:{type:"number",properties:GS}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:QS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function rA(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function iA(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||PC(h)){if(PC(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||PC(d)||(o=rA(e,i,s,o,d))}else o=rA(e,i,s,o,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function sA(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function oA(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function aA(e,t,n,r){lA(e,t,n,r,null)}function lA(e,t,n,r,i){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*oS;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,g,0,0,rS):e.arc(n,r,g,0,rS),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=cS,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=cS,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+lS)*l,h=Math.cos(m+lS)*(i?i/2-c:l),a=Math.sin(m+lS)*l,d=Math.sin(m+lS)*(i?i/2-c:l),e.arc(n-h,r-a,c,m-nS,m-aS),e.arc(n+d,r-o,c,m-aS,m),e.arc(n+h,r+a,c,m,m+aS),e.arc(n-d,r+o,c,m+aS,m+nS),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}m+=lS;case"rectRot":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+d,r-o),e.lineTo(n+h,r+a),e.lineTo(n-d,r+o),e.closePath();break;case"crossRot":m+=lS;case"cross":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"star":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o),m+=lS,h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-o,r-a),e.lineTo(n+o,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function cA(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function uA(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function hA(e){e.restore()}function dA(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function fA(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function pA(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function gA(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function mA(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=PC(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),OC(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&gA(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),OC(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),pA(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function yA(e,t){const{x:n,y:r,w:i,h:s,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*nS,nS,!0),e.lineTo(n,r+s-o.bottomLeft),e.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,nS,aS,!0),e.lineTo(n+i-o.bottomRight,r+s),e.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,aS,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-aS,!0),e.lineTo(n+o.topLeft,r)}const vA=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,wA=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bA(e,t){const n=(""+e).match(vA);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const _A=e=>+e||0;function EA(e,t){const n={},r=LC(t),i=r?Object.keys(t):t,s=LC(e)?r?n=>jC(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of i)n[o]=_A(s(o));return n}function CA(e){return EA(e,{top:"y",right:"x",bottom:"y",left:"x"})}function SA(e){return EA(e,["topLeft","topRight","bottomLeft","bottomRight"])}function AA(e){const t=CA(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function IA(e,t){e=e||{},t=t||nA.font;let n=jC(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=jC(e.style,t.style);r&&!(""+r).match(wA)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:jC(e.family,t.family),lineHeight:bA(jC(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:jC(e.weight,t.weight),string:""};return i.string=function(e){return!e||OC(e.size)||OC(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function TA(e,t,n,r){let i,s,o,a=!0;for(i=0,s=e.length;i<s;++i)if(o=e[i],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&PC(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function xA(e,t){return Object.assign(Object.create(e),t)}function NA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=UA("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>NA([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>OA(n,r,()=>function(e,t,n,r){let i;for(const s of t)if(i=UA(DA(s,e),n),"undefined"!==typeof i)return MA(e,i)?BA(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>VA(e).includes(t),ownKeys:e=>VA(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function kA(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:RA(e,r),setContext:t=>kA(e,t,n,r),override:i=>kA(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>OA(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=e;let a=r[t];eS(a)&&o.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||r);a.delete(e),MA(e,l)&&(l=BA(i._scopes,i,e,l));return l}(t,a,e,n));PC(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(LC(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=BA(r,i,e,l);t.push(kA(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));MA(t,a)&&(a=kA(a,i,s&&s[t],o));return a}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function RA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:eS(n)?n:()=>n,isIndexable:eS(r)?r:()=>r}}const DA=(e,t)=>e?e+JC(t):t,MA=(e,t)=>LC(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function OA(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function PA(e,t,n){return eS(e)?e(t,n):e}const LA=(e,t)=>!0===e?t:"string"===typeof e?ZC(t,e):void 0;function FA(e,t,n,r,i){for(const s of t){const t=LA(n,s);if(t){e.add(t);const s=PA(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function BA(e,t,n,r){const i=t._rootScopes,s=PA(t._fallback,n,r),o=[...e,...i],a=new Set;a.add(r);let l=jA(a,o,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=jA(a,o,s,l,r),null!==l))&&NA(Array.from(a),[""],i,s,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(PC(i)&&LC(n))return n;return i||{}}(t,n,r)))}function jA(e,t,n,r,i){for(;n;)n=FA(e,t,n,r,i);return n}function UA(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function VA(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function zA(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={r:i.parse(ZC(u,s),c)};return o}const HA=Number.EPSILON||1e-14,WA=(e,t)=>t<e.length&&!e[t].skip&&e[t],GA=e=>"x"===e?"y":"x";function qA(e,t,n,r){const i=e.skip?t:e,s=t,o=n.skip?t:n,a=bS(s,i),l=bS(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function YA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=GA(t),r=e.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=WA(e,0);for(o=0;o<r;++o)if(a=l,l=c,c=WA(e,o+1),l){if(c){const e=c[t]-l[t];i[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?hS(i[o-1])!==hS(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(e,t,n){const r=e.length;let i,s,o,a,l,c=WA(e,0);for(let u=0;u<r-1;++u)l=c,c=WA(e,u+1),l&&c&&(dS(t[u],0,HA)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=s*o*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=GA(n),i=e.length;let s,o,a,l=WA(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=WA(e,c+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a["cp1".concat(n)]=i-s,a["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,a["cp2".concat(n)]=i+s,a["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function XA(e,t,n){return Math.max(Math.min(e,n),t)}function KA(e,t,n,r,i){let s,o,a,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)YA(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=qA(n,a,e[Math.min(s+1,o-(r?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,s,o,a=cA(e[0],t);for(n=0,r=e.length;n<r;++n)o=s,s=a,a=n<r-1&&cA(e[n+1],t),s&&(i=e[n],o&&(i.cp1x=XA(i.cp1x,t.left,t.right),i.cp1y=XA(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=XA(i.cp2x,t.left,t.right),i.cp2y=XA(i.cp2y,t.top,t.bottom)))}(e,n)}function QA(){return"undefined"!==typeof window&&"undefined"!==typeof document}function ZA(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function JA(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const $A=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const eI=["top","right","bottom","left"];function tI(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=eI[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function nI(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=$A(n),s="border-box"===i.boxSizing,o=tI(i,"padding"),a=tI(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let o,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))o=i,a=s;else{const e=t.getBoundingClientRect();o=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const rI=e=>Math.round(10*e)/10;function iI(e,t,n,r){const i=$A(e),s=tI(i,"margin"),o=JA(i.maxWidth,e,"clientWidth")||sS,a=JA(i.maxHeight,e,"clientHeight")||sS,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&ZA(e);if(s){const e=s.getBoundingClientRect(),o=$A(s),a=tI(o,"border","width"),l=tI(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,r=JA(o.maxWidth,s,"clientWidth"),i=JA(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||sS,maxHeight:i||sS}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=tI(i,"border","width"),t=tI(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=rI(Math.min(c,o,l.maxWidth)),u=rI(Math.min(u,a,l.maxHeight)),c&&!u&&(u=rI(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=rI(Math.floor(u*r))),{width:c,height:u}}function sI(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const oI=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};QA()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Vk){}return e}();function aI(e,t){const n=function(e,t){return $A(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function lI(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function cI(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function uI(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=lI(e,i,n),a=lI(i,s,n),l=lI(s,t,n),c=lI(o,a,n),u=lI(a,l,n);return lI(c,u,n)}function hI(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function dI(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function fI(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function pI(e){return"angle"===e?{between:CS,compare:_S,normalize:ES}:{between:AS,compare:(e,t)=>e-t,normalize:e=>e}}function gI(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function mI(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=pI(r),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=pI(r),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(t[h%l][r]),i,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,v=!1,w=null;const b=()=>v||l(i,y,g)&&0!==a(i,y),_=()=>!v||0===a(s,g)||l(s,y,g);for(let E=u,C=u;E<=h;++E)m=t[E%o],m.skip||(g=c(m[r]),g!==y&&(v=l(g,i,s),null===w&&b()&&(w=0===a(g,i)?E:C),null!==w&&_()&&(p.push(gI({start:w,end:E,loop:d,count:o,style:f})),w=null),C=E,y=g));return null!==w&&p.push(gI({start:w,end:h,loop:d,count:o,style:f})),p}function yI(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=mI(r[i],e.points,t);s.length&&n.push(...s)}return n}function vI(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=wI(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,r,i){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,h=t%l)}}for(const p of t){h=a?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=wI(r.setContext(xA(i,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),bI(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,r):t}function wI(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function bI(e,t){if(!t)return!1;const n=[],r=function(e,t){return zS(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function _I(e,t,n){return e.options.clip?e[n]:t[n]}function EI(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:_I(n,t,"left"),right:_I(n,t,"right"),top:_I(r,t,"top"),bottom:_I(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class CI{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=DS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var SI=new CI;const AI="transparent",II={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=HS(e||AI),i=r.valid&&HS(t||AI);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class TI{constructor(e,t,n,r){const i=t[n];r=TA([e.to,r,i,e.from]);const s=TA([e.from,i,r]);this._active=!0,this._fn=e.fn||II[e.type||typeof s],this._easing=VS[e.easing]||VS.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=TA([e.to,t,r,e.from]),this._from=TA([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||t<n),!this._active)return this._target[r]=o,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class xI{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!LC(e))return;const t=Object.keys(nA.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!LC(i))return;const s={};for(const e of t)s[e]=i[e];(PC(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(i[l]=u=new TI(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(SI.add(this._chart,n),!0):void 0}}function NI(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function kI(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function RI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let o,a,l,c;if(null===t)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=e.values[l],FC(c)&&(s||0===t||hS(t)===hS(c))&&(t+=c)}return u||r.all?t:0}function DI(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function MI(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function OI(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function PI(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,r),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=MI(i,u,n),d[a]=s,d._top=OI(d,o,!0,r.type),d._bottom=OI(d,o,!1,r.type);(d._visualValues||(d._visualValues={}))[a]=s}}function LI(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function FI(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const BI=e=>"reset"===e||"none"===e,jI=(e,t)=>t?e:Object.assign({},e);class UI{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=DI(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&FI(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=jC(n.xAxisID,LI(e,"x")),s=t.yAxisID=jC(n.yAxisID,LI(e,"y")),o=t.rAxisID=jC(n.rAxisID,LI(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,i,s,o),c=t.vAxisID=r(a,s,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&kS(this._data,this),e._stacked&&FI(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(LC(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){kS(n,this);const e=this._cachedMeta;FI(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),NS.forEach(e=>{const t="_onData"+JC(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const o=n.apply(this,i);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...i)}),o}})}))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=DI(t.vScale,t),t.stack!==n.stack&&(r=!0,FI(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(PI(this,t._parsed),t._stacked=DI(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=PC(r[e])?this.parseArrayData(n,r,e,t):LC(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(i()&&(u=!1),h=l);n._sorted=u}s&&PI(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,o=i.axis,a=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[o]:c||i.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:i.parse(ZC(d,o),h),y:s.parse(ZC(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return RI({keys:kI(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const o=r&&n._stacks[t.axis];r&&o&&(r.values=o,s=RI(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:kI(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=r[h];const t=d[o.axis];return!FC(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,a),!i));++h);if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],FC(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return LC(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(jC(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=NI(e,n),i=NI(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,o,a),c=o;c<o+a;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return xA(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return xA(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,o=i[s],a=this.enableOptionSharing&&$C(n);if(o)return jI(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(nA.elements[e]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,r,t),u);return f.$shared&&(f.$shared=a,i[s]=Object.freeze(jI(f,a))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(e,n,t))}const l=new xI(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||BI(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){BI(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!BI(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(i),o=e;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&FI(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function VI(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=RS(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&($C(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return a}function zI(e,t,n,r){return PC(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function HI(e,t,n,r){const i=e.iScale,s=e.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(zI(d,h,s,c));return l}function WI(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function GI(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[qI(u,o,a,l)]=!0,i=c)),s[qI(i,o,a,l)]=!0,e.borderSkipped=s}function qI(e,t,n,r){var i,s,o;return r?(o=n,e=YI(e=(i=e)===(s=t)?o:i===o?s:i,n,t)):e=YI(e,t,n),e}function YI(e,t,n){return"start"===e?t:"end"===e?n:e}function XI(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}a(UI,"defaults",{}),a(UI,"datasetElementType",null),a(UI,"dataElementType",null);class KI extends UI{parsePrimitiveData(e,t,n,r){return HI(e,t,n,r)}parseArrayData(e,t,n,r){return HI(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=t[h],f={},f[i.axis]=i.parse(ZC(p,l),h),u.push(zI(ZC(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,o=WI(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=i||OC(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||WI(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const m=g.options||e[d].options;GI(g,m,p,s),XI(g,m,c.ratio),this.updateElement(e[d],d,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),a=o&&o[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===a),r=t&&t[e.vScale.axis];if(OC(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[jC("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=e.barThickness;return{min:o||VI(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,o=i||0,a=this.getParsed(e),l=a._custom,c=WI(l);let u,h,d=a[t.axis],f=0,p=n?this.applyStack(t,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&hS(d)!==hS(l.barEnd)&&(f=0),f+=d);const g=OC(i)||c?f:i;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?hS(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,o)*s,d===o&&(m-=h/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(o)){const e=hS(h)*t.getLineWidthForValue(o)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=jC(r.maxBarThickness,1/0);let o,a;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let s,o;return OC(i)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:t.pixels[e]-s/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(jC(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+h;o=c.start+c.chunk*d+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}a(KI,"id","bar"),a(KI,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),a(KI,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class QI extends UI{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=jC(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=jC(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=o.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=jC(n&&n._custom,i),r}}a(QI,"id","bubble"),a(QI,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),a(QI,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class ZI extends UI{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,o=e=>+n[e];if(LC(n[e])){const{key:e="value"}=this._parsing;o=t=>+ZC(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=o(i)}}_getRotation(){return mS(this.options.rotation-90)}_getCircumference(){return mS(this.options.circumference)}_getRotationExtents(){let e=rS,t=-rS;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let r=1,i=1,s=0,o=0;if(t<rS){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(e,t,r)=>CS(e,a,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>CS(e,a,l,!0)?-1:Math.min(t,t*n,r,r*n),g=f(0,c,h),m=f(aS,u,d),y=p(nS,c,h),v=p(nS+aS,u,d);r=(g-y)/2,i=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,w=Math.max(Math.min(y,v)/2,0),b=UC(this.options.radius,w),_=(b-Math.max(b*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=m*b,r.total=this.calculateTotal(),this.outerRadius=b-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/rS)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=i&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,i);for(g=t;g<t+n;++g){const t=this._circumference(g,i),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=t,this.updateElement(n,g,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?rS*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=XS(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,o,a;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,o=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(jC(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}a(ZI,"id","doughnut"),a(ZI,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),a(ZI,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),a(ZI,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class JI extends UI{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=LS(t,r,s);this._drawStart=o,this._drawCount=a,FS(t)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,o,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=pS(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let w=t>0&&this.getParsed(t-1);for(let b=0;b<v;++b){const n=e[b],f=m?n:{};if(b<t||b>=y){f.skip=!0;continue}const v=this.getParsed(b),_=OC(v[d]),E=f[h]=s.getPixelForValue(v[h],b),C=f[d]=i||_?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],b);f.skip=isNaN(E)||isNaN(C)||_,f.stop=b>0&&Math.abs(v[h]-w[h])>g,p&&(f.parsed=v,f.raw=l.data[b]),u&&(f.options=c||this.resolveDataElementOptions(b,n.active?"active":r)),m||this.updateElement(n,b,f,r),w=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}a(JI,"id","line"),a(JI,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),a(JI,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class $I extends UI{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=XS(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return zA.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*nS;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,r,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,r,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":r)};this.updateElement(t,h,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?mS(this.resolveDataElementOptions(e,t).angle||n):0}}a($I,"id","polarArea"),a($I,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),a($I,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class eT extends ZI{}a(eT,"id","pie"),a(eT,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class tT extends UI{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return zA.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":r),a=i.getPointPositionForValue(o,this.getParsed(o).r),l=s?i.xCenter:a.x,c=s?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,r)}}}a(tT,"id","radar"),a(tT,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),a(tT,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class nT extends UI{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=LS(t,n,r);if(this._drawStart=i,this._drawCount=s,FS(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=pS(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let w=t;w<t+n;++w){const t=e[w],n=this.getParsed(w),c=y?t:{},p=OC(n[f]),b=c[d]=s.getPixelForValue(n[d],w),_=c[f]=i||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],w);c.skip=isNaN(b)||isNaN(_)||p,c.stop=w>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[w]),h&&(c.options=u||this.resolveDataElementOptions(w,t.active?"active":r)),y||this.updateElement(t,w,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}a(nT,"id","scatter"),a(nT,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),a(nT,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function rT(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class iT{static override(e){Object.assign(iT.prototype,e)}constructor(e){a(this,"options",void 0),this.options=e||{}}init(){}formats(){return rT()}parse(){return rT()}format(){return rT()}add(){return rT()}diff(){return rT()}startOf(){return rT()}endOf(){return rT()}}var sT=iT;function oT(e,t,n,r){const{controller:i,data:s,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const o=a._reversePixels?xS:TS;if(!r){const r=o(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex(e=>!OC(e[t.axis]));r.lo-=Math.max(0,s);const o=n.slice(r.hi).findIndex(e=>!OC(e[t.axis]));r.hi+=Math.max(0,o)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=o(s,t,n-r),i=o(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function aT(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=oT(s[a],t,o,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function lT(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return aT(e,n,t,function(n,o,a){(i||cA(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function cT(e,t,n,r,i,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return aT(e,n,t,function(n,c,u){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=a(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function uT(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?cT(e,t,n,r,i,s):function(e,t,n,r){let i=[];return aT(e,n,t,function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=wS(e,{x:t.x,y:t.y});CS(l,o,a)&&i.push({element:e,datasetIndex:n,index:s})}),i}(e,t,n,i):[]}function hT(e,t,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return aT(e,n,t,(e,r,l)=>{e[o]&&e[o](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,i))}),r&&!a?[]:s}var dT={evaluateInteractionItems:aT,modes:{index(e,t,n,r){const i=nI(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?lT(e,i,s,r,o):uT(e,i,s,!1,r,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=nI(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?lT(e,i,s,r,o):uT(e,i,s,!1,r,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>lT(e,nI(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=nI(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return uT(e,i,s,n.intersect,r,o)},x:(e,t,n,r)=>hT(e,nI(t,e),"x",n.intersect,r),y:(e,t,n,r)=>hT(e,nI(t,e),"y",n.intersect,r)}};const fT=["left","top","right","bottom"];function pT(e,t){return e.filter(e=>e.pos===t)}function gT(e,t){return e.filter(e=>-1===fT.indexOf(e.pos)&&e.box.axis===t)}function mT(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function yT(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!fT.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&t.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:o&&t.availableHeight)}return n}function vT(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function wT(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function bT(e,t,n,r){const{pos:i,box:s}=n,o=e.maxPadding;if(!LC(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&wT(o,s.getPadding());const a=Math.max(0,t.outerWidth-vT(o,e,"left","right")),l=Math.max(0,t.outerHeight-vT(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function _T(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function ET(e,t,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,_T(a.horizontal,t));const{same:o,other:h}=bT(t,n,a,r);c|=o&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&ET(i,t,n,r)||u}function CT(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function ST(e,t,n,r){const i=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,s=l.size||e.height;$C(l.start)&&(o=l.start),e.fullSize?CT(e,i.left,o,n.outerWidth-i.right-i.left,s):CT(e,t.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=e.bottom}else{const r=t.h*c,o=l.size||e.width;$C(l.start)&&(s=l.start),e.fullSize?CT(e,s,i.top,o,n.outerHeight-i.bottom-i.top):CT(e,s,t.top+l.placed,o,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=o}var AT={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=AA(e.options.layout.padding),s=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,s,o,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=mT(t.filter(e=>e.box.fullSize),!0),r=mT(pT(t,"left"),!0),i=mT(pT(t,"right")),s=mT(pT(t,"top"),!0),o=mT(pT(t,"bottom")),a=gT(t,"x"),l=gT(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:pT(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;zC(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);wT(d,AA(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),p=yT(l.concat(c),h);ET(a.fullSize,f,h,p),ET(l,f,h,p),ET(c,f,h,p)&&ET(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),ST(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,ST(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},zC(a.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class IT{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class TT extends IT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xT="$chartjs",NT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kT=e=>null===e||""===e;const RT=!!oI&&{passive:!0};function DT(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,RT)}function MT(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function OT(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||MT(n.addedNodes,r),t=t&&!MT(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function PT(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||MT(n.removedNodes,r),t=t&&!MT(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const LT=new Map;let FT=0;function BT(){const e=window.devicePixelRatio;e!==FT&&(FT=e,LT.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function jT(e,t,n){const r=e.canvas,i=r&&ZA(r);if(!i)return;const s=MS((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),o=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)});return o.observe(i),function(e,t){LT.size||window.addEventListener("resize",BT),LT.set(e,t)}(e,s),o}function UT(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){LT.delete(e),LT.size||window.removeEventListener("resize",BT)}(e)}function VT(e,t,n){const r=e.canvas,i=MS(t=>{null!==e.ctx&&n(function(e,t){const n=NT[e.type]||e.type,{x:r,y:i}=nI(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,RT)}(r,t,i),i}class zT extends IT{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[xT]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",kT(i)){const t=aI(e,"width");void 0!==t&&(e.width=t)}if(kT(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=aI(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[xT])return!1;const n=t[xT].initial;["height","width"].forEach(e=>{const r=n[e];OC(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[xT],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:OT,detach:PT,resize:jT}[t]||VT;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:UT,detach:UT,resize:UT}[t]||DT)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return iI(e,t,n,r)}isAttached(e){const t=e&&ZA(e);return!(!t||!t.isConnected)}}class HT{constructor(){a(this,"x",void 0),a(this,"y",void 0),a(this,"active",!1),a(this,"options",void 0),a(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return pS(this.x)&&pS(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function WT(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return function(e,t,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===o&&(t.push(e[i]),s++,o=n[s*r])}(t,c,s,o/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(o>0){let e,n;const r=o>1?Math.round((l-a)/(o-1)):null;for(GT(t,c,u,OC(r)?0:a-r,a),e=0,n=o-1;e<n;e++)GT(t,c,u,s[e],s[e+1]);return GT(t,c,u,l,OC(r)?t.length:l+r),c}return GT(t,c,u),c}function GT(e,t,n,r,i){const s=jC(r,0),o=Math.min(jC(i,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}a(HT,"defaults",{}),a(HT,"defaultRoutes",void 0);const qT=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,YT=(e,t)=>Math.min(t||e,e);function XT(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function KT(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-a||c>o+a)))return c}function QT(e){return e.drawTicks?e.tickLength:0}function ZT(e,t){if(!e.display)return 0;const n=IA(e.font,t),r=AA(e.padding);return(PC(e.text)?e.text.length:1)*n.lineHeight+r.height}function JT(e,t,n){let r=OS(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class $T extends HT{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=BC(e,Number.POSITIVE_INFINITY),t=BC(t,Number.NEGATIVE_INFINITY),n=BC(n,Number.POSITIVE_INFINITY),r=BC(r,Number.NEGATIVE_INFINITY),{min:BC(e,n),max:BC(t,r),minDefined:FC(e),maxDefined:FC(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:BC(n,BC(r,n)),max:BC(r,BC(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){VC(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=UC(t,(i-r)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?XT(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=WT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){VC(this.options.afterUpdate,[this])}beforeSetDimensions(){VC(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){VC(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),VC(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){VC(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=VC(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){VC(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){VC(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=YT(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=SS(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),o=this.maxHeight-QT(e.grid)-t.padding-ZT(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=yS(Math.min(Math.asin(SS((c.highest.height+6)/s,-1,1)),Math.asin(SS(o/a,-1,1))-Math.asin(SS(h/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){VC(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){VC(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=ZT(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=QT(i)+s):(e.height=this.maxHeight,e.width=QT(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,l=mS(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){VC(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)OC(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=XT(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(t/YT(t,n));let l,c,u,h,d,f,p,g,m,y,v,w=0,b=0;for(l=0;l<t;l+=a){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,OC(h)||PC(h)){if(PC(h))for(c=0,u=h.length;c<u;++c)v=h[c],OC(v)||PC(v)||(m=rA(r,p.data,p.gc,m,v),y+=g)}else m=rA(r,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),w=Math.max(m,w),b=Math.max(y,b)}!function(e,t){zC(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const _=s.indexOf(w),E=o.indexOf(b),C=e=>({width:s[e]||0,height:o[e]||0});return{first:C(0),last:C(t-1),widest:C(_),highest:C(E),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return SS(this._alignToPixels?sA(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return xA(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=xA(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=mS(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=QT(i),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return sA(n,e,f)};let m,y,v,w,b,_,E,C,S,A,I,T;if("top"===s)m=g(this.bottom),_=this.bottom-u,C=m-p,A=g(e.top)+p,T=e.bottom;else if("bottom"===s)m=g(this.top),A=e.top,T=g(e.bottom)-p,_=m+p,C=this.top+u;else if("left"===s)m=g(this.right),b=this.right-u,E=m-p,S=g(e.left)+p,I=e.right;else if("right"===s)m=g(this.left),S=e.left,I=g(e.right)-p,b=m+p,E=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(LC(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}A=e.top,T=e.bottom,_=m+p,C=_+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(LC(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}b=m-p,E=b-u,S=e.left,I=e.right}const x=jC(r.ticks.maxTicksLimit,c),N=Math.max(1,Math.ceil(c/x));for(y=0;y<c;y+=N){const e=this.getContext(y),t=i.setContext(e),r=o.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=KT(this,y,a),void 0!==v&&(w=sA(n,v,s),l?b=E=S=I=w:_=C=A=T=w,h.push({tx1:b,ty1:_,tx2:E,ty2:C,x1:S,y1:A,x2:I,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,h=QT(n.grid),d=h+c,f=u?-c:d,p=-mS(this.labelRotation),g=[];let m,y,v,w,b,_,E,C,S,A,I,T,x="middle";if("top"===r)_=this.bottom-f,E=this._getXAxisLabelAlignment();else if("bottom"===r)_=this.top+f,E=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);E=e.textAlign,b=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);E=e.textAlign,b=e.x}else if("x"===t){if("center"===r)_=(e.top+e.bottom)/2+d;else if(LC(r)){const e=Object.keys(r)[0],t=r[e];_=this.chart.scales[e].getPixelForValue(t)+d}E=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(e.left+e.right)/2-d;else if(LC(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)}E=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?x="top":"end"===a&&(x="bottom"));const N=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],w=v.label;const e=i.setContext(this.getContext(m));C=this.getPixelForTick(m)+i.labelOffset,S=this._resolveTickFontOptions(m),A=S.lineHeight,I=PC(w)?w.length:1;const t=I/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,d=E;if(s?(b=C,"inner"===E&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===r?"near"===l||0!==p?-I*A+A/2:"center"===l?-N.highest.height/2-t*A+A:-N.highest.height+A/2:"near"===l||0!==p?A/2:"center"===l?N.highest.height/2-t*A:N.highest.height-I*A,u&&(T*=-1),0===p||e.showLabelBackdrop||(b+=A/2*Math.sin(p))):(_=C,T=(1-I)*A/2),e.showLabelBackdrop){const t=AA(e.backdropPadding),n=N.heights[m],r=N.widths[m];let i=T-t.top,s=0-t.left;switch(x){case"middle":i-=n/2;break;case"bottom":i-=n}switch(E){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===y-1?s-=r:m>0&&(s-=r/2)}h={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:w,font:S,textOffset:T,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:x,translation:[b,_],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-mS(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const o=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=sA(e,this.left,s)-s/2,c=sA(e,this.right,o)+o/2,u=h=a):(u=sA(e,this.top,s)-s/2,h=sA(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&uA(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;mA(t,i.label,0,i.textOffset,n,e)}n&&hA(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=IA(n.font),s=AA(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||LC(t)?(a+=s.bottom,PC(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-i,m=a-s;if(e.isHorizontal()){if(d=PS(r,s,a),LC(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:qT(e,n,t);h=a-s}else{if(LC(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:qT(e,n,t);f=PS(r,o,i),p="left"===n?-aS:aS}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,t,o);mA(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:JT(o,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=jC(e.grid&&e.grid.z,-1),r=jC(e.border&&e.border.z,0);return this._isVisible()&&this.draw===$T.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return IA(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ex{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=YC(Object.create(null),[n?nA.get(n):{},nA.get(t),e.defaults]);nA.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");nA.route(s,i,l,a)})}(t,e.defaultRoutes);e.descriptors&&nA.describe(t,e.descriptors)}(e,s,n),this.override&&nA.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in nA[r]&&(delete nA[r][n],this.override&&delete ZS[n])}}class tx{constructor(){this.controllers=new ex(UI,"datasets",!0),this.elements=new ex(HT,"elements"),this.plugins=new ex(Object,"plugins"),this.scales=new ex($T,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):zC(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=JC(e);VC(n["before"+r],[],n),t[e](n),VC(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var nx=new tx;class rx{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===VC(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){OC(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=jC(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(nx.plugins.items);for(let s=0;s<r.length;s++)n.push(nx.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const o=[],a=e.getContext();for(const l of i){const t=l.id,i=ix(n[t],r);null!==i&&o.push({plugin:l,options:sx(e.config,{plugin:l,local:s[t]},i,a)})}return o}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function ix(e,t){return t||!1!==e?!0===e?{}:e:null}function sx(e,t,n,r){let{plugin:i,local:s}=t;const o=e.pluginScopeKeys(i),a=e.getOptionScopes(n,o);return s&&i.defaults&&a.push(i.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ox(e,t){const n=nA.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ax(e){if("x"===e||"y"===e||"r"===e)return e}function lx(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function cx(e){if(ax(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||lx(i.position)||e.length>1&&ax(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function ux(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function hx(e,t){const n=ZS[e.type]||{scales:{}},r=t.scales||{},i=ox(e.type,t),s=Object.create(null);return Object.keys(r).forEach(t=>{const o=r[t];if(!LC(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=cx(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return ux(e,"x",n[0])||ux(e,"y",n[0])}return{}}(t,e),nA.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,i),c=n.scales||{};s[t]=XC(Object.create(null),[{axis:a},o,c[a],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,o=n.indexAxis||ox(i,t),a=(ZS[i]||{}).scales||{};Object.keys(a).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),XC(s[i],[{axis:t},r[i],a[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];XC(t,[nA.scales[t.type],nA.scale])}),s}function dx(e){const t=e.options||(e.options={});t.plugins=jC(t.plugins,{}),t.scales=hx(e,t)}function fx(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const px=new Map,gx=new Set;function mx(e,t){let n=px.get(e);return n||(n=t(),px.set(e,n),gx.add(n)),n}const yx=(e,t,n)=>{const r=ZC(t,n);void 0!==r&&e.add(r)};class vx{constructor(e){this._config=function(e){return(e=e||{}).data=fx(e.data),dx(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=fx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),dx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return mx(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return mx("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return mx("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return mx("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach(t=>{e&&(a.add(e),t.forEach(t=>yx(a,e,t))),t.forEach(e=>yx(a,r,e)),t.forEach(e=>yx(a,ZS[i]||{},e)),t.forEach(e=>yx(a,nA,e)),t.forEach(e=>yx(a,JS,e))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),gx.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,ZS[t]||{},nA.datasets[t]||{},{type:t},nA,JS]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:o}=wx(this._resolverCache,e,r);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=RA(e);for(const i of t){const t=n(i),s=r(i),o=(s||t)&&e[i];if(t&&(eS(o)||bx(o))||s&&PC(o))return!0}return!1}(s,t)){i.$shared=!1;a=kA(s,n=eS(n)?n():n,this.createResolver(e,n,o))}for(const l of t)i[l]=a[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=wx(this._resolverCache,e,n);return LC(t)?kA(i,t,void 0,r):i}}function wx(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:NA(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,s)}return s}const bx=e=>LC(e)&&Object.getOwnPropertyNames(e).some(t=>eS(e[t]));const _x=["top","bottom","left","right","chartArea"];function Ex(e,t){return"top"===e||"bottom"===e||-1===_x.indexOf(e)&&"x"===t}function Cx(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Sx(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),VC(n&&n.onComplete,[e],t)}function Ax(e){const t=e.chart,n=t.options.animation;VC(n&&n.onProgress,[e],t)}function Ix(e){return QA()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Tx={},xx=e=>{const t=Ix(e);return Object.values(Tx).filter(e=>e.canvas===t).pop()};function Nx(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class kx{static register(){nx.add(...arguments),Rx()}static unregister(){nx.remove(...arguments),Rx()}constructor(e,t){const n=this.config=new vx(t),r=Ix(e),i=xx(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!QA()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?TT:zT}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=MC(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rx,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],Tx[this.id]=this,o&&a?(SI.listen(this,"complete",Sx),SI.listen(this,"progress",Ax),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return OC(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return nx}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sI(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return oA(this.canvas,this.ctx),this}stop(){return SI.stop(this),this}resize(e,t){SI.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,sI(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),VC(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){zC(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=cx(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),zC(i,t=>{const i=t.options,s=i.id,o=cx(s,i),a=jC(i.type,t.dtype);void 0!==i.position&&Ex(i.position,o)===Ex(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(nx.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),zC(r,(e,t)=>{e||delete n[t]}),zC(n,e=>{AT.configure(this,e,e.options),AT.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Cx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||ox(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=nx.getController(s),{datasetElementType:r,dataElementType:o}=nA.datasets[s];Object.assign(t,{dataElementType:nx.getElement(o),datasetElementType:r&&nx.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){zC(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||zC(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Cx("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){zC(this.scales,e=>{AT.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);tS(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){Nx(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!tS(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;AT.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],zC(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,eS(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(SI.has(this)?this.attached&&!SI.running(this)&&SI.start(this):(this.draw(),Sx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=EI(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&uA(t,r),e.controller.draw(),r&&hA(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return cA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=dT.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=xA(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);$C(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),SI.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),oA(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Tx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};zC(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){zC(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},zC(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!HC(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=i(t,e),o=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,o=this._getActiveElements(e,r,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,VC(i.onHover,[e,o,this],this),a&&VC(i.onClick,[e,o,this],this));const c=!HC(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function Rx(){return zC(kx.instances,e=>e._plugins.invalidate())}function Dx(e,t,n,r){const i=EA(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,r*t/2),a=e=>{const t=(n-Math.min(s,e))*r/2;return SS(e,0,Math.min(s,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:SS(i.innerStart,0,o),innerEnd:SS(i.innerEnd,0,o)}}function Mx(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Ox(e,t,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const g=(p-Math.max(.001,p*h-n/nS)/h)/2,m=l+g+f,y=i-g-f,{outerStart:v,outerEnd:w,innerStart:b,innerEnd:_}=Dx(t,d,h,y-m),E=h-v,C=h-w,S=m+v/E,A=y-w/C,I=d+b,T=d+_,x=m+b/I,N=y-_/T;if(e.beginPath(),s){const t=(S+A)/2;if(e.arc(o,a,h,S,t),e.arc(o,a,h,t,A),w>0){const t=Mx(C,A,o,a);e.arc(t.x,t.y,w,A,y+aS)}const n=Mx(T,y,o,a);if(e.lineTo(n.x,n.y),_>0){const t=Mx(T,N,o,a);e.arc(t.x,t.y,_,y+aS,N+Math.PI)}const r=(y-_/d+(m+b/d))/2;if(e.arc(o,a,d,y-_/d,r,!0),e.arc(o,a,d,r,m+b/d,!0),b>0){const t=Mx(I,x,o,a);e.arc(t.x,t.y,b,x+Math.PI,m-aS)}const i=Mx(E,m,o,a);if(e.lineTo(i.x,i.y),v>0){const t=Mx(E,S,o,a);e.arc(t.x,t.y,v,m-aS,S)}}else{e.moveTo(o,a);const t=Math.cos(S)*h+o,n=Math.sin(S)*h+a;e.lineTo(t,n);const r=Math.cos(A)*h+o,i=Math.sin(A)*h+a;e.lineTo(r,i)}e.closePath()}function Px(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(s){Ox(e,t,n,r,g,i);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(g=o+(a%rS||rS))}p&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(s,o,a,r-c,n+c),l>i?(c=i/l,e.arc(s,o,l,n+c,r-c,!0)):e.arc(s,o,i,n+aS,r-aS),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-o>=nS&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,ES(r-n));if(e.beginPath(),e.arc(i,s,o-c/2,r+h/2,n-h/2),a>0){const t=Math.min(c/a,ES(r-n));e.arc(i,s,a+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,o*ES(r-n));if("round"===u)e.arc(i,s,t,n-nS/2,r+nS/2,!0);else if("bevel"===u){const o=2*t*t,a=-o*Math.cos(n+nS/2)+i,l=-o*Math.sin(n+nS/2)+s,c=o*Math.cos(r+nS/2)+i,u=o*Math.sin(r+nS/2)+s;e.lineTo(a,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),s||(Ox(e,t,n,r,g,i),e.stroke())}a(kx,"defaults",nA),a(kx,"instances",Tx),a(kx,"overrides",ZS),a(kx,"registry",nx),a(kx,"version","4.5.0"),a(kx,"getChart",xx);class Lx extends HT{constructor(e){super(),a(this,"circumference",void 0),a(this,"endAngle",void 0),a(this,"fullCircles",void 0),a(this,"innerRadius",void 0),a(this,"outerRadius",void 0),a(this,"pixelMargin",void 0),a(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=wS(r,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=jC(u,a-o),f=CS(i,o,a)&&o!==a,p=d>=rS||f,g=AS(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>rS?Math.floor(n/rS):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(nS,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){Ox(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%rS||rS))}Ox(e,t,n,r,l,i),e.fill()}(e,this,a,i,s),Px(e,this,a,i,s),e.restore()}}function Fx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=jC(n.borderCapStyle,t.borderCapStyle),e.setLineDash(jC(n.borderDash,t.borderDash)),e.lineDashOffset=jC(n.borderDashOffset,t.borderDashOffset),e.lineJoin=jC(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=jC(n.borderWidth,t.borderWidth),e.strokeStyle=jC(n.borderColor,t.borderColor)}function Bx(e,t,n){e.lineTo(n.x,n.y)}function jx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function Ux(e,t,n,r){const{points:i,options:s}=t,{count:o,start:a,loop:l,ilen:c}=jx(i,n,r),u=function(e){return e.stepped?dA:e.tension||"monotone"===e.cubicInterpolationMode?fA:Bx}(s);let h,d,f,{move:p=!0,reverse:g}=r||{};for(h=0;h<=c;++h)d=i[(a+(g?c-h:h))%o],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=i[(a+(g?c:0))%o],u(e,f,d,g,s.stepped)),!!l}function Vx(e,t,n,r){const i=t.points,{count:s,start:o,ilen:a}=jx(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,g,m=0,y=0;const v=e=>(o+(c?a-e:e))%s,w=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=i[v(0)],e.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=i[v(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(w(),e.lineTo(t,n),d=r,y=0,f=p=n),g=n}w()}function zx(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Vx:Ux}a(Lx,"id","arc"),a(Lx,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),a(Lx,"defaultRoutes",{backgroundColor:"backgroundColor"}),a(Lx,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Hx="function"===typeof Path2D;function Wx(e,t,n,r){Hx&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),Fx(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,o=zx(t);for(const a of i)Fx(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Gx extends HT{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;KA(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return vI(e,!0===r?[{start:o,end:a,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(o-1)%i,loop:r}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%i,end:a%i,loop:r}),s}(n,o,a<o?a+i:a,!!e._fullLoop&&0===o&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=yI(this,{property:t,start:r,end:r});if(!s.length)return;const o=[],a=function(e){return e.stepped?cI:e.tension||"monotone"===e.cubicInterpolationMode?uI:lI}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=i[c],d=i[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return zx(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=zx(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of r)s&=i(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Wx(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function qx(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}a(Gx,"id","line"),a(Gx,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),a(Gx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),a(Gx,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Yx extends HT{constructor(e){super(),a(this,"parsed",void 0),a(this,"skip",void 0),a(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return qx(this,e,"x",t)}inYRange(e,t){return qx(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!cA(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,aA(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Xx(e,t){const{x:n,y:r,base:i,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Kx(e,t,n,r){return e?0:SS(t,n,r)}function Qx(e){const t=Xx(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=CA(r);return{t:Kx(i.top,s.top,0,n),r:Kx(i.right,s.right,0,t),b:Kx(i.bottom,s.bottom,0,n),l:Kx(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=SA(i),o=Math.min(t,n),a=e.borderSkipped,l=r||LC(i);return{topLeft:Kx(!l||a.top||a.left,s.topLeft,0,o),topRight:Kx(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Kx(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Kx(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Zx(e,t,n,r){const i=null===t,s=null===n,o=e&&!(i&&s)&&Xx(e,r);return o&&(i||AS(t,o.left,o.right))&&(s||AS(n,o.top,o.bottom))}function Jx(e,t){e.rect(t.x,t.y,t.w,t.h)}function $x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+o,radius:e.radius}}a(Yx,"id","point"),a(Yx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),a(Yx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class eN extends HT{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=Qx(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?yA:Jx;var a;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),o(e,$x(s,t,i)),e.clip(),o(e,$x(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,$x(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return Zx(this,e,t,n)}inXRange(e,t){return Zx(this,e,null,t)}inYRange(e,t){return Zx(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}a(eN,"id","bar"),a(eN,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),a(eN,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const tN=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class nN extends HT{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=VC(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=IA(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=tN(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let u=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:r},l[l.length-1]+=p+o}),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(i).width}(r,e,t,n),o=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=rN(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,i,e,r);s>0&&d+m+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=hI(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=PS(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,o=PS(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let i=0,o=PS(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,o=PS(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;uA(e,this),this._draw(),hA(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,o=nA.color,a=hI(e.rtl,this.left,this.width),l=IA(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=tN(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:PS(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:PS(i,this.top+y+c,this.bottom-t[0].height),line:0},dI(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach((w,b)=>{r.strokeStyle=w.fontColor,r.fillStyle=w.fontColor;const _=r.measureText(w.text).width,E=a.textAlign(w.textAlign||(w.textAlign=s.textAlign)),C=f+h+_;let S=d.x,A=d.y;a.setWidth(this.width),m?b>0&&S+C+c>this.right&&(A=d.y+=v,d.line++,S=d.x=PS(i,this.left+c,this.right-n[d.line])):b>0&&A+v>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,A=d.y=PS(i,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=jC(n.lineWidth,1);if(r.fillStyle=jC(n.fillStyle,o),r.lineCap=jC(n.lineCap,"butt"),r.lineDashOffset=jC(n.lineDashOffset,0),r.lineJoin=jC(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=jC(n.strokeStyle,o),r.setLineDash(jC(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(e,f/2);lA(r,o,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=SA(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?yA(r,{x:o,y:s,w:f,h:p,radius:l}):r.rect(o,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(S),A,w),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(E,S+f+h,m?S+C:this.right,e.rtl),function(e,t,n){mA(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(S),A,w),m)d.x+=C+c;else if("string"!==typeof w.text){const e=l.lineHeight;d.y+=rN(w,e)+c}else d.y+=v}),fI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=IA(t.font),r=AA(t.padding);if(!t.display)return;const i=hI(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=r.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=PS(e.align,u,this.right-h);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+PS(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=PS(o,u,u+h);s.textAlign=i.textAlign(OS(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,mA(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=IA(e.font),n=AA(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(AS(e,this.left,this.right)&&AS(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],AS(e,r.left,r.left+r.width)&&AS(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,o=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!o&&VC(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!o&&VC(t.onHover,[e,n,this],this)}else n&&VC(t.onClick,[e,n,this],this);var r,i}}function rN(e,t){return t*(e.text?e.text.length:0)}var iN={id:"legend",_element:nN,start(e,t,n){const r=e.legend=new nN({ctx:e.ctx,options:n,chart:e});AT.configure(e,r,n),AT.addBox(e,r)},stop(e){AT.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;AT.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=AA(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class sN extends HT{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=PC(n.text)?n.text.length:1;this._padding=AA(n.padding);const i=r*IA(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=PS(o,n,i),c=t+e,a=i-n):("left"===s.position?(l=n+e,c=PS(o,r,t),u=-.5*nS):(l=i-e,c=PS(o,t,r),u=.5*nS),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=IA(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(r);mA(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:OS(t.align),textBaseline:"middle",translation:[i,s]})}}var oN={id:"title",_element:sN,start(e,t,n){!function(e,t){const n=new sN({ctx:e.ctx,options:t,chart:e});AT.configure(e,n,t),AT.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;AT.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;AT.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const aN={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=bS(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function lN(e,t){return t&&(PC(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cN(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function uN(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:e,label:o,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function hN(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=IA(t.bodyFont),c=IA(t.titleFont),u=IA(t.footerFont),h=s.length,d=i.length,f=r.length,p=AA(t.padding);let g=p.height,m=0,y=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const w=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,zC(e.title,w),n.font=l.string,zC(e.beforeBody.concat(e.afterBody),w),v=t.displayColors?o+2+t.boxPadding:0,zC(r,e=>{zC(e.before,w),zC(e.lines,w),zC(e.after,w)}),v=0,n.font=u.string,zC(e.footer,w),n.restore(),m+=p.width,{width:m,height:g}}function dN(e,t,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===e&&i+s+o>t.width||"right"===e&&i-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function fN(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||dN(e,t,n,r),yAlign:r}}function pN(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=SA(o);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const g=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+i:"right"===a&&(p+=Math.max(h,f)+i),{x:SS(p,0,r.width-t.width),y:SS(g,0,r.height-t.height)}}function gN(e,t,n){const r=AA(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function mN(e){return lN([],cN(e))}function yN(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const vN={beforeTitle:DC,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:DC,beforeBody:DC,beforeLabel:DC,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return OC(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:DC,afterBody:DC,beforeFooter:DC,footer:DC,afterFooter:DC};function wN(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?vN[t].call(n,r):i}class bN extends HT{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new xI(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,xA(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=wN(n,"beforeTitle",this,e),i=wN(n,"title",this,e),s=wN(n,"afterTitle",this,e);let o=[];return o=lN(o,cN(r)),o=lN(o,cN(i)),o=lN(o,cN(s)),o}getBeforeBody(e,t){return mN(wN(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return zC(e,e=>{const t={before:[],lines:[],after:[]},i=yN(n,e);lN(t.before,cN(wN(i,"beforeLabel",this,e))),lN(t.lines,wN(i,"label",this,e)),lN(t.after,cN(wN(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return mN(wN(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=wN(n,"beforeFooter",this,e),i=wN(n,"footer",this,e),s=wN(n,"afterFooter",this,e);let o=[];return o=lN(o,cN(r)),o=lN(o,cN(i)),o=lN(o,cN(s)),o}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(uN(this.chart,t[o]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),zC(l,t=>{const n=yN(e.callbacks,t);r.push(wN(n,"labelColor",this,t)),i.push(wN(n,"labelPointStyle",this,t)),s.push(wN(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=aN[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=hN(this,n),o=Object.assign({},e,t),a=fN(this.chart,n,o),l=pN(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=SA(o),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,v,w,b;return"center"===i?(w=d+p/2,"left"===r?(g=h,m=g-s,v=w+s,b=w-s):(g=h+f,m=g+s,v=w-s,b=w+s),y=g):(m="left"===r?h+Math.max(a,c)+s:"right"===r?h+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=d,w=v-s,g=m-s,y=m+s):(v=d+p,w=v+s,g=m+s,y=m-s),b=v),{x1:g,x2:m,x3:y,y1:v,y2:w,y3:b}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,o,a;if(i){const l=hI(n.rtl,this.x,this.width);for(e.x=gN(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=IA(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=IA(i.bodyFont),u=gN(this,"left",i),h=r.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+d;if(i.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,aA(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,aA(e,t,n,c)}else{e.lineWidth=LC(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),o=SA(s.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,yA(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),yA(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=IA(n.bodyFont);let h=u.lineHeight,d=0;const f=hI(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+i},g=f.textAlign(s);let m,y,v,w,b,_,E;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=gN(this,g,n),t.fillStyle=n.bodyColor,zC(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,w=0,_=r.length;w<_;++w){for(m=r[w],y=this.labelTextColors[w],t.fillStyle=y,zC(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(t,e,w,f,n),h=Math.max(u.lineHeight,a)),b=0,E=v.length;b<E;++b)p(v[b]),h=u.lineHeight;zC(m.after,p)}d=0,h=u.lineHeight,zC(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,o;if(i){const a=hI(n.rtl,this.x,this.width);for(e.x=gN(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=IA(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=SA(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+l-h,a),t.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+d,a+c),t.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=aN[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=hN(this,e),o=Object.assign({},n,this._size),a=fN(t,e,o),l=pN(e,o,a,t);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=AA(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),dI(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),fI(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!HC(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),o=this._positionChanged(s,e),a=t||!HC(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=aN[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}a(bN,"positioners",aN);var _N={id:"tooltip",_element:bN,positioners:aN,afterInit(e,t,n){n&&(e.tooltip=new bN({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:vN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function EN(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function CN(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class SN extends $T{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(OC(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:SS(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:EN(n,e,jC(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return CN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function AN(e,t){const n=[],{bounds:r,step:i,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=i||1,f=c-1,{min:p,max:g}=t,m=!OC(s),y=!OC(o),v=!OC(l),w=(g-p)/(u+1);let b,_,E,C,S=fS((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];C=Math.ceil(g/S)-Math.floor(p/S),C>f&&(S=fS(C*S/f/d)*d),OC(a)||(b=Math.pow(10,a),S=Math.ceil(S*b)/b),"ticks"===r?(_=Math.floor(p/S)*S,E=Math.ceil(g/S)*S):(_=p,E=g),m&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/i,S/1e3)?(C=Math.round(Math.min((o-s)/S,c)),S=(o-s)/C,_=s,E=o):v?(_=m?s:_,E=y?o:E,C=l-1,S=(E-_)/C):(C=(E-_)/S,C=dS(C,Math.round(C),S/1e3)?Math.round(C):Math.ceil(C));const A=Math.max(vS(S),vS(_));b=Math.pow(10,OC(a)?A:a),_=Math.round(_*b)/b,E=Math.round(E*b)/b;let I=0;for(m&&(h&&_!==s?(n.push({value:s}),_<s&&I++,dS(Math.round((_+I*S)*b)/b,s,IN(s,w,e))&&I++):_<s&&I++);I<C;++I){const e=Math.round((_+I*S)*b)/b;if(y&&e>o)break;n.push({value:e})}return y&&h&&E!==o?n.length&&dS(n[n.length-1].value,o,IN(o,w,e))?n[n.length-1].value=o:n.push({value:o}):y&&E!==o||n.push({value:E}),n}function IN(e,t,n){let{horizontal:r,minRotation:i}=n;const s=mS(i),o=(r?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}a(SN,"id","category"),a(SN,"defaults",{ticks:{callback:CN}});class TN extends $T{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return OC(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,o=e=>i=n?i:e;if(e){const e=hS(r),t=hS(i);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);o(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=AN({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&gS(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return XS(e,this.chart.options.locale,this.options.ticks.format)}}class xN extends TN{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=FC(e)?e:0,this.max=FC(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=mS(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}a(xN,"id","linear"),a(xN,"defaults",{ticks:{callback:QS.formatters.numeric}});const NN=e=>Math.floor(uS(e)),kN=(e,t)=>Math.pow(10,NN(e)+t);function RN(e){return 1===e/Math.pow(10,NN(e))}function DN(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function MN(e,t){let{min:n,max:r}=t;n=BC(e.min,n);const i=[],s=NN(n);let o=function(e,t){let n=NN(t-e);for(;DN(e,t,n)>10;)n++;for(;DN(e,t,n)<10;)n--;return Math.min(n,NN(e))}(n,r),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=BC(e.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<r;)i.push({value:f,major:RN(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=BC(e.max,f);return i.push({value:p,major:RN(p),significand:d}),i}class ON extends $T{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=TN.prototype.parse.apply(this,[e,t]);if(0!==n)return FC(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=FC(e)?Math.max(0,e):null,this.max=FC(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!FC(this._userMin)&&(this.min=e===kN(this.min,0)?kN(this.min,-1):kN(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(kN(n,-1)),s(kN(r,1)))),n<=0&&i(kN(r,-1)),r<=0&&s(kN(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=MN({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&gS(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":XS(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=uS(e),this._valueRange=uS(this.max)-uS(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(uS(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function PN(e){const t=e.ticks;if(t.display&&e.display){const e=AA(t.backdropPadding);return jC(t.font&&t.font.size,nA.font.size)+e.height}return 0}function LN(e,t,n){return n=PC(n)?n:[n],{w:iA(e,t.string,n),h:n.length*t.lineHeight}}function FN(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function BN(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?nS/s:0;for(let l=0;l<s;l++){const s=o.setContext(e.getPointLabelContext(l));i[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],a),u=IA(s.font),h=LN(e.ctx,u,e._pointLabels[l]);r[l]=h;const d=ES(e.getIndexAngle(l)+a),f=Math.round(yS(d));jN(n,t,d,FN(f,c.x,h.w,0,180),FN(f,c.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:PN(s)/2,additionalAngle:o?nS/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=UN(e,u,l);r.push(i),"auto"===a&&(i.visible=VN(i,c),i.visible&&(c=i))}return r}(e,r,i)}function jN(e,t,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<t.l?(a=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function UN(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,r+i+o,s),c=Math.round(yS(ES(l.angle+aS))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function VN(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(cA({x:n,y:r},t)||cA({x:n,y:s},t)||cA({x:i,y:r},t)||cA({x:i,y:s},t))}function zN(e,t,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=t;if(!OC(a)){const n=SA(t.borderRadius),l=AA(t.backdropPadding);e.fillStyle=a;const c=r-l.left,u=i-l.top,h=s-r+l.width,d=o-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),yA(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function HN(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,rS);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}a(ON,"id","logarithmic"),a(ON,"defaults",{ticks:{callback:QS.formatters.logarithmic,major:{enabled:!0}}});class WN extends TN{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=AA(PN(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=FC(e)&&!isNaN(e)?e:0,this.max=FC(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/PN(this.options))}generateTickLabels(e){TN.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=VC(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?BN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return ES(e*(rS/(this._pointLabels.length||1))+mS(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(OC(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(OC(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return xA(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-aS+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),HN(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));zN(n,s,t);const o=IA(s.font),{x:a,y:l,textAlign:c}=t;mA(n,e._pointLabels[i],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),HN(e,n,o,r),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(e.save(),o=s-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=IA(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=a.backdropColor;const t=AA(a.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}mA(e,r.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),e.restore()}drawTitle(){}}a(WN,"id","radialLinear"),a(WN,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:QS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),a(WN,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),a(WN,"descriptors",{angleLines:{_fallback:"grid"}});const GN={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qN=Object.keys(GN);function YN(e,t){return e-t}function XN(e,t){if(OC(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof r&&(o=r(o)),FC(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!pS(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function KN(e,t,n,r){const i=qN.length;for(let s=qN.indexOf(e);s<i-1;++s){const e=GN[qN[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return qN[s]}return qN[i-1]}function QN(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=IS(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function ZN(e,t,n){const r=[],i={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class JN extends $T{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new sT(e.adapters.date);r.init(t),XC(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:XN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),o||isNaN(e.max)||(i=Math.max(i,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),r=FC(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=FC(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?KN(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=qN.length-1;s>=qN.indexOf(n);s--){const n=qN[s];if(GN[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return qN[n?qN.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=qN.indexOf(e)+1,n=qN.length;t<n;++t)if(GN[qN[t]].common)return qN[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),ZN(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=SS(r,0,s),i=SS(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||KN(i.minUnit,t,n,this._getLabelCapacity(t)),o=jC(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,l=pS(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,s),h++)QN(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||QN(c,u,f),Object.keys(c).sort(YN).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return VC(s,[e,t,n],this);const o=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=mS(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,ZN(this,[e],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(XN(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return RS(e.sort(YN))}}function $N(e,t,n){let r,i,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=TS(e,"pos",t)),({pos:r,time:s}=e[a]),({pos:i,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=TS(e,"time",t)),({time:r,pos:s}=e[a]),({time:i,pos:o}=e[l]));const c=i-r;return c?s+(o-s)*(t-r)/c:s}a(JN,"id","time"),a(JN,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class ek extends JN{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=$N(t,this.min),this._tableRange=$N(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=r.length;s<o;++s)c=r[s+1],a=r[s-1],l=r[s],Math.round((c+a)/2)!==l&&i.push({time:l,pos:s/(o-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return($N(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return $N(this._table,n*this._tableRange+this._minPos,!0)}}a(ek,"id","timeseries"),a(ek,"defaults",JN.defaults);const tk=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],nk="label";function rk(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function ik(e,t){e.labels=t}function sk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nk;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):c({},t)})}function ok(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nk;const n={labels:[],datasets:[]};return ik(n,e.labels),sk(n,e.datasets,t),n}function ak(t,n){const{height:r=150,width:s=300,redraw:o=!1,datasetIdKey:a,type:l,data:u,options:h,plugins:d=[],fallbackContent:f,updateMode:p}=t,g=i(t,tk),m=(0,e.useRef)(null),y=(0,e.useRef)(null),v=()=>{m.current&&(y.current=new kx(m.current,{type:l,data:ok(u,a),options:h&&c({},h),plugins:d}),rk(n,y.current))},w=()=>{rk(n,null),y.current&&(y.current.destroy(),y.current=null)};return(0,e.useEffect)(()=>{!o&&y.current&&h&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(y.current,h)},[o,h]),(0,e.useEffect)(()=>{!o&&y.current&&ik(y.current.config.data,u.labels)},[o,u.labels]),(0,e.useEffect)(()=>{!o&&y.current&&u.datasets&&sk(y.current.config.data,u.datasets,a)},[o,u.datasets]),(0,e.useEffect)(()=>{y.current&&(o?(w(),setTimeout(v)):y.current.update(p))},[o,h,u.labels,u.datasets,p]),(0,e.useEffect)(()=>{y.current&&(w(),setTimeout(v))},[l]),(0,e.useEffect)(()=>(v(),()=>w()),[]),e.createElement("canvas",c({ref:m,role:"img",height:r,width:s},g),f)}const lk=(0,e.forwardRef)(ak);function ck(t,n){return kx.register(n),(0,e.forwardRef)((n,r)=>e.createElement(lk,c(c({},n),{},{ref:r,type:t})))}const uk=ck("line",JI),hk=ck("bar",KI),dk=ck("doughnut",ZI);function fk(e,t){return Array.isArray(e)?e.includes(t):e===t}const pk=e.createContext({});pk.displayName="AccordionContext";const gk=pk,mk=["as","bsPrefix","className","children","eventKey"],yk=e.forwardRef((t,n)=>{let{as:r="div",bsPrefix:s,className:o,children:a,eventKey:l}=t,u=i(t,mk);const{activeEventKey:f}=(0,e.useContext)(gk);return s=v(s,"accordion-collapse"),(0,d.jsx)(Vv,c(c({ref:n,in:fk(f,l)},u),{},{className:h()(o,s),children:(0,d.jsx)(r,{children:e.Children.only(a)})}))});yk.displayName="AccordionCollapse";const vk=yk,wk=e.createContext({eventKey:""});wk.displayName="AccordionItemContext";const bk=wk,_k=["as","bsPrefix","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ek=e.forwardRef((t,n)=>{let{as:r="div",bsPrefix:s,className:o,onEnter:a,onEntering:l,onEntered:u,onExit:f,onExiting:p,onExited:g}=t,m=i(t,_k);s=v(s,"accordion-body");const{eventKey:y}=(0,e.useContext)(bk);return(0,d.jsx)(vk,{eventKey:y,onEnter:a,onEntering:l,onEntered:u,onExit:f,onExiting:p,onExited:g,children:(0,d.jsx)(r,c(c({ref:n},m),{},{className:h()(o,s)}))})});Ek.displayName="AccordionBody";const Ck=Ek,Sk=["as","bsPrefix","className","onClick"];const Ak=e.forwardRef((t,n)=>{let{as:r="button",bsPrefix:s,className:o,onClick:a}=t,l=i(t,Sk);s=v(s,"accordion-button");const{eventKey:u}=(0,e.useContext)(bk),f=function(t,n){const{activeEventKey:r,onSelect:i,alwaysOpen:s}=(0,e.useContext)(gk);return e=>{let o=t===r?null:t;s&&(o=Array.isArray(r)?r.includes(t)?r.filter(e=>e!==t):[...r,t]:[t]),null==i||i(o,e),null==n||n(e)}}(u,a),{activeEventKey:p}=(0,e.useContext)(gk);return"button"===r&&(l.type="button"),(0,d.jsx)(r,c(c({ref:n,onClick:f},l),{},{"aria-expanded":Array.isArray(p)?p.includes(u):u===p,className:h()(o,s,!fk(p,u)&&"collapsed")}))});Ak.displayName="AccordionButton";const Ik=Ak,Tk=["as","aria-controls","bsPrefix","className","children","onClick"],xk=e.forwardRef((e,t)=>{let{as:n="h2","aria-controls":r,bsPrefix:s,className:o,children:a,onClick:l}=e,u=i(e,Tk);return s=v(s,"accordion-header"),(0,d.jsx)(n,c(c({ref:t},u),{},{className:h()(o,s),children:(0,d.jsx)(Ik,{onClick:l,"aria-controls":r,children:a})}))});xk.displayName="AccordionHeader";const Nk=xk,kk=["as","bsPrefix","className","eventKey"],Rk=e.forwardRef((t,n)=>{let{as:r="div",bsPrefix:s,className:o,eventKey:a}=t,l=i(t,kk);s=v(s,"accordion-item");const u=(0,e.useMemo)(()=>({eventKey:a}),[a]);return(0,d.jsx)(bk.Provider,{value:u,children:(0,d.jsx)(r,c(c({ref:n},l),{},{className:h()(o,s)}))})});Rk.displayName="AccordionItem";const Dk=Rk,Mk=["as","activeKey","bsPrefix","className","onSelect","flush","alwaysOpen"],Ok=e.forwardRef((t,n)=>{const r=xv(t,{activeKey:"onSelect"}),{as:s="div",activeKey:o,bsPrefix:a,className:l,onSelect:u,flush:f,alwaysOpen:p}=r,g=i(r,Mk),m=v(a,"accordion"),y=(0,e.useMemo)(()=>({activeEventKey:o,onSelect:u,alwaysOpen:p}),[o,u,p]);return(0,d.jsx)(gk.Provider,{value:y,children:(0,d.jsx)(s,c(c({ref:n},g),{},{className:h()(l,m,f&&"".concat(m,"-flush"))}))})});Ok.displayName="Accordion";const Pk=Object.assign(Ok,{Button:Ik,Collapse:vk,Item:Dk,Header:Nk,Body:Ck});kx.register(SN,xN,eN,oN,_N,iN,Lx,Gx,Yx);const Lk=e=>{let{sales:t,products:n,categories:r}=e;const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month";const n=new Map;e.forEach(e=>{const r=new Date(e.timestamp);let i;i="day"===t?r.toISOString().split("T")[0]:"month"===t?"".concat(r.getFullYear(),"-").concat((r.getMonth()+1).toString().padStart(2,"0")):r.getFullYear().toString(),n.set(i,(n.get(i)||0)+e.totalAmount)});const r=Array.from(n.keys()).sort();return{labels:r,datasets:[{label:"Monto de Ventas",data:r.map(e=>n.get(e)||0),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}}(t,"month"),s=((e,t)=>{const n=new Map,r=new Map;t.forEach(e=>r.set(e.id,e.category||"Sin Categor\xeda")),e.forEach(e=>{e.items.forEach(e=>{const t=r.get(e.productId);t&&n.set(t,(n.get(t)||0)+e.quantity*e.price)})});const i=Array.from(n.keys()).sort();return{labels:i,datasets:[{label:"Monto de Ventas por Categor\xeda",data:i.map(e=>n.get(e)||0),backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}})(t,n),o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=new Map,i=new Map;t.forEach(e=>i.set(e.id,e.name)),e.forEach(e=>{e.items.forEach(e=>{var t;const n=i.get(e.productId)||e.productName,s=(null===(t=r.get(e.productId))||void 0===t?void 0:t.totalAmount)||0;r.set(e.productId,{name:n,totalAmount:s+e.quantity*e.price})})});const s=Array.from(r.values()).sort((e,t)=>t.totalAmount-e.totalAmount).slice(0,n);return{labels:s.map(e=>e.name),datasets:[{label:"Monto de Ventas",data:s.map(e=>e.totalAmount),backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]}}(t,n),a={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:""}}},l=c(c({},a),{},{plugins:c(c({},a.plugins),{},{title:c(c({},a.plugins.title),{},{text:"Ventas por Mes"})})}),u=c(c({},a),{},{plugins:c(c({},a.plugins),{},{title:c(c({},a.plugins.title),{},{text:"Ventas por Categor\xeda"})})}),h=c(c({},a),{},{plugins:c(c({},a.plugins),{},{title:c(c({},a.plugins.title),{},{text:"Productos M\xe1s Vendidos"})})});return(0,d.jsxs)(Pk,{defaultActiveKey:"0",className:"mt-4",children:[(0,d.jsxs)(Pk.Item,{eventKey:"0",children:[(0,d.jsx)(Pk.Header,{children:l.plugins.title.text}),(0,d.jsx)(Pk.Body,{children:(0,d.jsx)(Pb,{children:(0,d.jsx)(Pb.Body,{children:(0,d.jsx)(uk,{options:l,data:i})})})})]}),(0,d.jsxs)(Pk.Item,{eventKey:"1",children:[(0,d.jsx)(Pk.Header,{children:u.plugins.title.text}),(0,d.jsx)(Pk.Body,{children:(0,d.jsx)(Pb,{children:(0,d.jsx)(Pb.Body,{children:(0,d.jsx)(dk,{options:u,data:s})})})})]}),(0,d.jsxs)(Pk.Item,{eventKey:"2",children:[(0,d.jsx)(Pk.Header,{children:h.plugins.title.text}),(0,d.jsx)(Pk.Body,{children:(0,d.jsx)(Pb,{children:(0,d.jsx)(Pb.Body,{children:(0,d.jsx)(hk,{options:h,data:o})})})})]})]})},Fk=t=>{let{currentUserId:n,products:r,categories:i}=t;const[s,o]=e.useState([]),[a,l]=e.useState(!0),[u,h]=e.useState(null),[f,p]=e.useState(!1),[g,m]=e.useState(null);return e.useEffect(()=>{if(!n)return l(!1),void h("No hay usuario autenticado para cargar el historial de ventas.");const e=Hp(Ep(Of(wv,"users",n,"sales"),Ip("timestamp","desc")),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));o(t),l(!1)},e=>{console.error("Error fetching sales history:",e),h("Error al cargar el historial de ventas."),l(!1)});return()=>e()},[n]),a?(0,d.jsx)(C,{className:"mt-4",children:"Cargando historial de ventas..."}):u?(0,d.jsx)(C,{className:"mt-4",children:(0,d.jsx)(VE,{variant:"danger",children:u})}):(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsxs)(C,{className:"mt-4",children:[(0,d.jsx)("h2",{className:"mb-4",children:"Historial de Ventas"}),0===s.length?(0,d.jsx)(VE,{variant:"info",children:"No hay ventas registradas a\xfan."}):(0,d.jsxs)(qb,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mt-4",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"ID Venta"}),(0,d.jsx)("th",{children:"Fecha"}),(0,d.jsx)("th",{children:"Total"}),(0,d.jsx)("th",{children:"Art\xedculos"}),(0,d.jsx)("th",{children:"Vendedor"}),(0,d.jsx)("th",{children:"Acciones"})," "]})}),(0,d.jsx)("tbody",{children:s.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.id}),(0,d.jsx)("td",{children:new Date(e.timestamp).toLocaleString()}),(0,d.jsxs)("td",{children:["$",e.totalAmount.toFixed(2)]}),(0,d.jsx)("td",{children:(0,d.jsx)("ul",{className:"list-unstyled mb-0",children:e.items.map((e,t)=>(0,d.jsxs)("li",{children:[e.productName," (",e.quantity,")"]},t))})}),(0,d.jsx)("td",{children:e.sellerEmail?e.sellerEmail.split("@")[0]:e.userId}),(0,d.jsx)("td",{children:(0,d.jsxs)(M,{variant:"info",size:"sm",onClick:()=>(e=>{console.log("Viewing receipt for sale:",e),m(e),p(!0)})(e),children:[(0,d.jsx)("i",{className:"bi bi-eye"})," "]})})]},e.id))})]}),(0,d.jsx)(Lk,{sales:s,products:r,categories:i})]}),g&&(0,d.jsx)(JE,{show:f,onClose:()=>{p(!1),m(null)},products:r,categories:i,userRole:null,currentUserId:n,currentUser:null,initialSale:g})]})},Bk=["id"],jk=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)([]),[o,a]=(0,e.useState)([]),[l,u]=(0,e.useState)([]),[h,f]=(0,e.useState)(!0),[p,g]=(0,e.useState)(null),[m,y]=(0,e.useState)(null),[v,w]=(0,e.useState)(null),[b,_]=(0,e.useState)(""),[E,S]=(0,e.useState)(null),[A,T]=(0,e.useState)("main"),[x,N]=(0,e.useState)(!1),[k,R]=(0,e.useState)(null),[D,O]=(0,e.useState)(""),[P,L]=(0,e.useState)("board"),[F,B]=(0,e.useState)(!1),[j,U]=(0,e.useState)(!1),[V,z]=(0,e.useState)(!1),[H,W]=(0,e.useState)(!1),[G,q]=(0,e.useState)(!1),[Y,X]=(0,e.useState)(null),[K,Q]=(0,e.useState)(!1),[Z,J]=(0,e.useState)(!1),[$,ee]=(0,e.useState)(!1),[te,ne]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=function(e,t,n,r){return dr(e).onAuthStateChanged(t,n,r)}(bv,e=>{y(e),g(e?e.uid:null),f(!1)});return()=>{e()}},[]),(0,e.useEffect)(()=>{Ev("JmX2RmIspFYl53oaRTgzmcRSfju1","c8V9KWEEXlRlkMgVQqMdtWaLebA3",{name:"Nuevo Empleado Prueba",email:"nuevo.empleado.prueba@ejemplo.com"}).then(()=>{console.log("Empleado creado y permisos replicados exitosamente.")}).catch(e=>{console.error("Hubo un error al procesar el empleado:",e)})},[]),(0,e.useEffect)(()=>{if(p){const e=Hp(Pf(wv,"users",p),async e=>{if(e.exists()){console.log("User document found:",e.data());const t=e.data().role;w(t);let r=p;if("admin"!==t){const e=Pf(wv,"employeeToAdminMap",p),t=await Fp(e);t.exists()?(r=t.data().adminId,console.log("Fetching data from admin: ".concat(r," for employee: ").concat(p))):console.warn("Employee ".concat(p," has no associated admin in employeeToAdminMap. Fetching own data."))}const i=Hp(Ep(Of(wv,"users",r,"products"),Ip("name")),e=>{const t=e.docs.map(e=>c(c({},e.data()),{},{id:e.id}));n(t)}),o=Hp(Ep(Of(wv,"users",r,"categories"),Ip("name")),e=>{const t=e.docs.map(e=>c(c({},e.data()),{},{id:e.id}));s(t)}),l=Hp(Ep(Of(wv,"users",r,"suppliers"),Ip("name")),e=>{const t=e.docs.map(e=>c(c({},e.data()),{},{id:e.id}));a(t)});return()=>{i(),o(),l()}}console.log("User document NOT found in Firestore for UID:",p),w(null),n([]),s([]),a([])});return()=>{e()}}w(null),n([]),s([]),a([])},[p]);const re=()=>{N(!1),R(null)},ie=()=>{R(null),N(!0)},se=e=>{R(e),N(!0)},oe=async(e,t,n,r)=>{if(p&&"viewer"!==v)try{await zp(Of(wv,"users",p,"movements"),{productId:e,productName:t,type:n,amount:r,date:Date.now()})}catch(Vk){console.error("Error recording movement: ",Vk)}},ae=async(e,n)=>{if(!p||"viewer"===v)return;const r=Pf(wv,"users",p,"products",e),i=t.find(t=>t.id===e);if(i){const t=Math.max(0,i.stock+n);await Up(r,{stock:t}),await oe(e,i.name,"ajuste",n)}},le=async e=>{if(p&&"viewer"!==v&&window.confirm("\xbfEst\xe1s seguro de que deseas eliminar este producto?")){const t=Pf(wv,"users",p,"products",e),n=await Fp(t);if(n.exists()){const r=n.data();await oe(e,r.name,"salida",r.stock),await Vp(t)}}},ce=async e=>{if(!p)return;S(e);const t=Ep(Of(wv,"users",p,"movements"),function(e,t,n){const r=t,i=vp("where",e);return Cp._create(i,r,n)}("productId","==",e.id),Ip("date","desc"));try{const e=await function(e){e=Gs(e,Rf);const t=Gs(e.firestore,Uf),n=Vf(t),r=new Bp(t);return wp(e._query),Cf(n,e._query).then(n=>new Pp(t,r,e,n))}(t),n=[];e.forEach(e=>{n.push(c(c({},e.data()),{},{id:e.id}))}),u(n),z(!0)}catch(n){console.error("Error fetching movements:",n)}},ue=e=>{const t=o.find(t=>t.id===e.supplierId);if(!t||!t.email)return void alert("No se puede generar el pedido. El producto no tiene un proveedor asignado o el proveedor no tiene un email.");e.minStock&&(e.minStock,e.stock);const n=encodeURIComponent("Pedido de reposici\xf3n: ".concat(e.name)),r=encodeURIComponent("Estimado/a ".concat(t.contactPerson||t.name,",...")),i="https://mail.google.com/mail/?view=cm&fs=1&to=".concat(encodeURIComponent(t.email),"&su=").concat(n,"&body=").concat(r);window.open(i,"_blank")},he=t.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())).filter(e=>!b||e.category===b);return h?(0,d.jsx)("div",{children:"Cargando..."}):p?(0,d.jsxs)("div",{children:[(0,d.jsx)(rb,{searchTerm:D,onSearchChange:O,userEmail:(null===m||void 0===m?void 0:m.email)||null,onLogout:async()=>{try{await bv.signOut(),T("main")}catch(e){console.error("Error al cerrar sesi\xf3n:",e),alert("Error al cerrar sesi\xf3n. Por favor, int\xe9ntalo de nuevo.")}},onNavigate:T}),"main"===A?(0,d.jsxs)(C,{className:"mt-4",children:[(0,d.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,d.jsx)("h1",{className:"mb-0",children:"Inventario"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(I,{className:"me-2",children:[(0,d.jsx)(M,{variant:"board"===P?"primary":"outline-primary",onClick:()=>L("board"),children:"Tarjetas"}),(0,d.jsx)(M,{variant:"list"===P?"primary":"outline-primary",onClick:()=>L("list"),children:"Lista"})]}),v&&"viewer"!==v&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M,{variant:"secondary",onClick:()=>W(!0),className:"me-2",children:"Proveedores"}),(0,d.jsx)(M,{variant:"info",onClick:()=>B(!0),className:"me-2",children:"Categor\xedas"}),(0,d.jsx)(M,{variant:"warning",onClick:()=>ne(!0),className:"me-2",children:"Realizar Venta"})," "]}),"admin"===v&&(0,d.jsx)(M,{variant:"dark",onClick:()=>J(!0),className:"me-2",children:"Gestionar Empleados"}),v&&"viewer"!==v&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M,{variant:"primary",onClick:()=>Q(!0),className:"me-2",children:"Escanear Producto"}),(0,d.jsx)(M,{variant:"success",size:"lg",onClick:ie,children:"+ A\xf1adir Producto"})]})]})]}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsxs)(Ne.Group,{controlId:"categoryFilter",children:[(0,d.jsx)(Ne.Label,{children:"Filtrar por Categor\xeda"}),(0,d.jsxs)(Ne.Select,{value:b,onChange:e=>_(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Todas las categor\xedas"}),r.map(e=>(0,d.jsx)("option",{value:e.name,children:e.name},e.id))]})]})}),"board"===P?(0,d.jsx)(Hb,{products:he,onStockChange:ae,onDeleteProduct:le,onStartEdit:se,onShowHistory:ce,onGenerateOrder:ue,userRole:v}):(0,d.jsx)(Yb,{products:he,onStockChange:ae,onDeleteProduct:le,onStartEdit:se,onShowHistory:ce,onGenerateOrder:ue,userRole:v})]}):"reports"===A?(0,d.jsx)(RE,{products:t}):"sales"===A?(0,d.jsx)(Fk,{currentUserId:p||"",products:t,categories:r}):null,(0,d.jsx)(Xb,{show:x,handleClose:re,onAddProduct:async e=>{if(p&&"viewer"!==v){try{const t=await zp(Of(wv,"users",p,"products"),c(c({},e),{},{imageUrl:"https://picsum.photos/seed/".concat(Math.random(),"/400/300")}));await oe(t.id,e.name,"entrada",e.stock)}catch(Vk){console.error("Error adding document: ",Vk)}re()}},onUpdateProduct:async e=>{if(!p||"viewer"===v)return;const t=Pf(wv,"users",p,"products",e.id),{id:n}=e,r=i(e,Bk);await Up(t,r),re()},productToEdit:k,categories:r,suppliers:o,userRole:v}),E&&(0,d.jsx)(l_,{show:V,handleClose:()=>z(!1),movements:l,productName:E.name}),(0,d.jsxs)(Pn,{show:F,onHide:()=>B(!1),centered:!0,children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:"Administrador de Categor\xedas"})}),(0,d.jsx)(Pn.Body,{children:(0,d.jsx)(s_,{categories:r,onAdd:()=>U(!0),onDelete:async e=>{p&&"viewer"!==v&&window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta categor\xeda?")&&await Vp(Pf(wv,"users",p,"categories",e))},userRole:v})})]}),(0,d.jsx)(o_,{show:j,handleClose:()=>U(!1),onSave:async e=>{if(p&&"viewer"!==v)try{await zp(Of(wv,"users",p,"categories"),{name:e})}catch(Vk){console.error("Error adding category: ",Vk)}},userRole:v}),(0,d.jsxs)(Pn,{show:H,onHide:()=>W(!1),centered:!0,size:"lg",children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:"Administrador de Proveedores"})}),(0,d.jsx)(Pn.Body,{children:(0,d.jsx)(c_,{suppliers:o,onAdd:()=>{X(null),q(!0)},onEdit:e=>{X(e),q(!0)},onDelete:async e=>{p&&"viewer"!==v&&window.confirm("\xbfEst\xe1s seguro de que deseas eliminar este proveedor?")&&await Vp(Pf(wv,"users",p,"suppliers",e))},userRole:v})})]}),(0,d.jsx)(u_,{show:G,handleClose:()=>q(!1),onSave:async e=>{if(p&&"viewer"!==v){if(Y){const t=Pf(wv,"users",p,"suppliers",Y.id);await Up(t,e)}else await zp(Of(wv,"users",p,"suppliers"),e);q(!1),X(null)}},supplierToEdit:Y,userRole:v}),(0,d.jsxs)(Pn,{show:K,onHide:()=>Q(!1),centered:!0,size:"lg",children:[(0,d.jsx)(Pn.Header,{closeButton:!0,children:(0,d.jsx)(Pn.Title,{children:"Escanear C\xf3digo de Barras"})}),(0,d.jsx)(Pn.Body,{children:(0,d.jsx)(xE,{onScanSuccess:e=>{Q(!1);const n=t.find(t=>t.barcode===e);n?se(n):(R({}),ie())}})})]}),"admin"===v&&p&&(0,d.jsx)(NE,{show:Z,handleClose:()=>J(!1),currentAdminId:p}),$&&m&&(0,d.jsx)(kE,{show:$,handleClose:()=>ee(!1),currentUser:m,onInvitationRedeemed:(e,t)=>{g(e),w(t),ee(!1)}}),(0,d.jsx)(JE,{show:te,onClose:()=>ne(!1),products:t,categories:r,userRole:v,currentUserId:p||"",currentUser:m})]}):(0,d.jsx)(Lb,{onLoginSuccess:()=>{}})},Uk=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)})};t.createRoot(document.getElementById("root")).render((0,d.jsx)(e.StrictMode,{children:(0,d.jsx)(jk,{})})),Uk()})()})();
//# sourceMappingURL=main.f65a8c8a.js.map